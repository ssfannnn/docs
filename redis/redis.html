<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Redis | 记录美好生活</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/docs/favicon.ico">
    <meta name="description" content="面向学习">
    <meta name="author" content="沉溺的鱼">
    <meta name="keywords" content="记录自己的学习过程">
    
    <link rel="preload" href="/docs/assets/css/0.styles.4fbbd53d.css" as="style"><link rel="preload" href="/docs/assets/js/app.cf5f4e08.js" as="script"><link rel="preload" href="/docs/assets/js/2.5d1e2b3f.js" as="script"><link rel="preload" href="/docs/assets/js/3.c42f2619.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.279998ef.js"><link rel="prefetch" href="/docs/assets/js/11.fdb914f3.js"><link rel="prefetch" href="/docs/assets/js/12.240da4c1.js"><link rel="prefetch" href="/docs/assets/js/13.27adc495.js"><link rel="prefetch" href="/docs/assets/js/14.33b94b6c.js"><link rel="prefetch" href="/docs/assets/js/15.2d5d2839.js"><link rel="prefetch" href="/docs/assets/js/16.1ff5ea8a.js"><link rel="prefetch" href="/docs/assets/js/17.4b738493.js"><link rel="prefetch" href="/docs/assets/js/18.da36ac29.js"><link rel="prefetch" href="/docs/assets/js/19.28e99716.js"><link rel="prefetch" href="/docs/assets/js/4.27d27964.js"><link rel="prefetch" href="/docs/assets/js/5.a5f1d2d8.js"><link rel="prefetch" href="/docs/assets/js/6.5834fd47.js"><link rel="prefetch" href="/docs/assets/js/7.1aa795cf.js"><link rel="prefetch" href="/docs/assets/js/8.621cf6b8.js"><link rel="prefetch" href="/docs/assets/js/9.2f397d83.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.4fbbd53d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><img src="/docs/favicon.ico" alt="记录美好生活" class="logo"> <span class="site-name can-hide">记录美好生活</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">Java系列</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">Java系列</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/javaweb/javaweb.html" class="nav-link">
  JavaWeb
</a></li><li class="dropdown-item"><!----> <a href="/docs/mybatis/mybatis.html" class="nav-link">
  Mybatis
</a></li><li class="dropdown-item"><!----> <a href="/docs/springmvc/springmvc.html" class="nav-link">
  SpringMVC
</a></li><li class="dropdown-item"><!----> <a href="/docs/spring/spring.html" class="nav-link">
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/docs/springboot/springboot.html" class="nav-link">
  Springboot
</a></li><li class="dropdown-item"><!----> <a href="/docs/redis/redis.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/docs/mysql/mysql.html" class="nav-link">
  Mysql
</a></li><li class="dropdown-item"><!----> <a href="/docs/stream/stream.html" class="nav-link">
  函数式编程
</a></li></ul></div></div><div class="nav-item"><a href="/docs/question/question.html" class="nav-link">
  提问
</a></div><div class="nav-item"><a href="/docs/others/others.html" class="nav-link">
  技术分享
</a></div><div class="nav-item"><a href="/docs/knowledge/knowledge.html" class="nav-link">
  心得体会
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">Java系列</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">Java系列</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/javaweb/javaweb.html" class="nav-link">
  JavaWeb
</a></li><li class="dropdown-item"><!----> <a href="/docs/mybatis/mybatis.html" class="nav-link">
  Mybatis
</a></li><li class="dropdown-item"><!----> <a href="/docs/springmvc/springmvc.html" class="nav-link">
  SpringMVC
</a></li><li class="dropdown-item"><!----> <a href="/docs/spring/spring.html" class="nav-link">
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/docs/springboot/springboot.html" class="nav-link">
  Springboot
</a></li><li class="dropdown-item"><!----> <a href="/docs/redis/redis.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/docs/mysql/mysql.html" class="nav-link">
  Mysql
</a></li><li class="dropdown-item"><!----> <a href="/docs/stream/stream.html" class="nav-link">
  函数式编程
</a></li></ul></div></div><div class="nav-item"><a href="/docs/question/question.html" class="nav-link">
  提问
</a></div><div class="nav-item"><a href="/docs/others/others.html" class="nav-link">
  技术分享
</a></div><div class="nav-item"><a href="/docs/knowledge/knowledge.html" class="nav-link">
  心得体会
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Redis</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/redis/redis.html#linux安装" class="sidebar-link">Linux安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/redis/redis.html#在linux环境下开启redis" class="sidebar-link">在linux环境下开启Redis</a></li><li class="sidebar-sub-header"><a href="/docs/redis/redis.html#测试性能" class="sidebar-link">测试性能</a></li></ul></li><li><a href="/docs/redis/redis.html#基础知识" class="sidebar-link">基础知识</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/redis/redis.html#五大数据类型" class="sidebar-link">五大数据类型</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/redis/redis.html#三种特殊数据类型" class="sidebar-link">三种特殊数据类型</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/redis/redis.html#基本操作" class="sidebar-link">基本操作</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/redis/redis.html#string类型" class="sidebar-link">String类型</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/redis/redis.html#list-2" class="sidebar-link">List</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/redis/redis.html#set-集合-无序不重复集合" class="sidebar-link">set(集合)  无序不重复集合</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/redis/redis.html#hash-哈希" class="sidebar-link">Hash（哈希）</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/redis/redis.html#zset-有序集合" class="sidebar-link">Zset(有序集合)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/redis/redis.html#geospatial地理位置" class="sidebar-link">geospatial地理位置</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/redis/redis.html#hyperloglog-2" class="sidebar-link">hyperloglog</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/redis/redis.html#bitmaps-2" class="sidebar-link">bitmaps</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/redis/redis.html#事务" class="sidebar-link">事务</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/redis/redis.html#锁" class="sidebar-link">锁</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/redis/redis.html#jeris" class="sidebar-link">JeRis</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/redis/redis.html#springboot整合" class="sidebar-link">Springboot整合</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/redis/redis.html#redis-conf详解" class="sidebar-link">Redis.conf详解</a></li><li class="sidebar-sub-header"><a href="/docs/redis/redis.html#redisrdb持久化" class="sidebar-link">RedisRDB持久化</a></li><li class="sidebar-sub-header"><a href="/docs/redis/redis.html#aof持久化-append-only-file" class="sidebar-link">AOF持久化(Append Only File)</a></li><li class="sidebar-sub-header"><a href="/docs/redis/redis.html#redis发布订阅" class="sidebar-link">Redis发布订阅</a></li><li class="sidebar-sub-header"><a href="/docs/redis/redis.html#redis主从复制" class="sidebar-link">Redis主从复制</a></li><li class="sidebar-sub-header"><a href="/docs/redis/redis.html#redis缓存穿透和雪崩" class="sidebar-link">Redis缓存穿透和雪崩</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="redis"><a href="#redis" class="header-anchor">#</a> Redis</h1> <h2 id="linux安装"><a href="#linux安装" class="header-anchor">#</a> Linux安装</h2> <h3 id="在linux环境下开启redis"><a href="#在linux环境下开启redis" class="header-anchor">#</a> 在linux环境下开启Redis</h3> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAmcAAAAwCAYAAABUpt13AAAaDklEQVR4nO1dv2/juLb+sth2/PpnD95UzCKedgpX87RbpKGAW1xnywG2UW/2m+QPkHs2F5hyx7dYwGxS7OpNFeBtOw4mrOZirNdfzx+gV5CSJVmiftjyj4QfcIAoNMnDw0OK4iHPAYDITL1o+GkcjaNRNKj8bQsaj6JxNI4ub3rHXeZTkEtDGnwYR+PoMhoO91GfledJEeVRGLCIHJqPJnwSFgVd8fz2Q/S3P6Pop3fDw7f5KfDZJTWdC0y/P4J55VDUdD7r3VxG42gcjcaH5/0U6HsAwHCA0W8jDIYAsMLy6g73M1RjOMTot4uNfL2bS1xe97C8muF+NsAoGmGweMDd6wVWAHo3I4yuB+hhheWiRj0agw9jjMb6IVUetijT3L7Tlktc32q2BMaq3IerOyxm5nwYjzD+MNAJPVx8GuMC0HzX52tTLlaeTeSZtG+2RG88QA/A6vYOdzerErnc436m03Sdq8USGKq8WDxg9nqLwUEYgmACAgkhZPb/HPAcHxIAKEfIJBwP4JwCICAQmEqCCSWQUweOL5N8QlL1fzGF5+kyqpkBCziIkCATCgIAcgrH8SHL+NRwedCivjKM8ebPD+jrpxfvPuFv74Bv71/jj/fAD//4hB9erX/97eMV/rid4cW7T/jp3RDfPs6At2O8wAKfb1/j80f9w1djvPn1A/qvAGCB8PY1/krSbvDm1+uNNHOZJj4X6F9HePNWJ365xR+/3OBbzPTbD/jpeowXAL59WeDFq2GSry1i3VZY4v7sHkv9NPhwidFYpy2WePj5Hou4qoq5oGxsmuaC8veKnlNinq8vMb6Ox2DPkLZCW+xTLub5pYfhp0tcDNe8rWb3uLtaVs9nFfN8bzzC5QfdF3XfASchs/IyFS/N3ivfAQOMPo0wGC5x/3qG2dk9vg6HiJtajgFGny4wwAPuzma4n/Uw+HCJ4bAi23CoBsniAXdnd/j6UF1TjOWV4m+ZT9iizHI8Ablo9PAVd68fsEIPF9frNpTmm91jdhYvHFZ4eD1LPbeFlWdbeQ4uVrjXv+9dj3Tbs3K5uwUGH0YbcukNgeXrGWZnd7j/Z736ikHA+ATSc9Dve5iD1swm4TsOpqCg0kPfEyDUVYspACATkLmHft+Bjwk4I6bSNniiVMLr99Hv99F3fMgqPreqrwgz/PXjGX6/VZ357f1r/P7jmV64LPD5lzP8/qOm2xlevP2wXgQBeIEZ/vjlFt8wxA/vbvACADDGm398QP/VDH/9cobff/wZ//cqnXaNPm7xx49n+OvjEP3r7AKwuEwTn0B4e4bff7xCuNG+Md5cj/Hii6rv87+qBl49rG7uMDu7w0N+fTceYTTuYXV7h9nZDLOfvwLJGKueCwrHZsVcUD7el7g/m2F2pVJintSL2JR2InLRKJ5fVljoeWqm29kbj9TiwjifVc/zaV4G13XeAaciM3OZTd8r32H8EgMAq9uF/qJYYXmz3pEqRZzvn1+xArCcLQH0MBhXiPqip1abmXxZgY6jcUKXNzW6rqrMNngKctFYzpbA4t/VvHcJK89yVPBS2PacXFaLFYrksrpd6C9FJe/WIC4oEZgLCUBCzEW9fFJCQuJRAvJR6uc0smUS0myxJPzczlcln9vVtwv0Xq3fAOH/zIAvuXHwdow+gG/vbxF+AYAFwvd6JytO+zjDtzg/hui/rSizLQrr6x69v7/EYNgDFkssruId6Oq5oHBsdvF+OBB2KheNJnNrb1gxT9aY5/f9PtqbzNq+q0rq+z4WtprcGzR4z/lOpcxjkssxwcqzPYraELcvNqfsBRsLqw7KJOcgEDXrkZBFPzTxuVV9TTFE//o3vHnbbLfpxasLAMDqy+Zi2pTWBfZdH2YLPMx6uBhfYPTpAhlz03OeCzqQS4zifD0MPozWJsGaOCpZ71lmu277d3FB5SviFf79UM5c5Uq6aT69ZRpTnW3itrxsV+bxy+WYYOVpQAUvRW2I26e2yvfUDkKw832mfJnycfuFkonPLuorw9trvHk7xLf3V4lZsw6+fVEDIb3DVietC+y7PmCFxZU2EV7pnQdtUupsLjgJ7F4uMQrzjYfaJHifmDVrcXlUst6vzHbd9u8w+4olgN71UB9i62FwU2QHHuDlOPUY5/v7S/QADMYDACssZ6ssk8P/yJb1sFKH4DL5tkQXZT4FuRwTrDxbo6jtsVzSZzZ64xGG4/JytoKcQ0gKlxIABNRNneWSj5CEwiXYTKtEtkyZ3wojDEEYgtct0sRnnfo6wQOAIfr/XbNzPs4QAnjxLj70P0Q/PjsWp71VB/RVmQuEHzva2frXA75t1Nch9KIAAFYPq+z5HMNcYMRTmAu6kIuGOV98XKKmzGrP83vAvmW2ZZl5fAcscf/6HsvFAKNPY4yjEV4ucjbiq3ssF+q2wfpMzBL3rx+wxAUuozFGY7VluFhAbScutMnlt1ynLha4v11iNbzAZXSJlxc1GR8OcRkp/gYAMLxYP7ct04jTl8vLlvlizpa3D1gu1G2ccZS6adIKVp5t5bl86GGkf7+6jW8bZeUyji4xHH7F186OBEn43hSEBwhDDhfps1wC/hSYBCHCkONc1jyPBgByCulyhGEAhik8f9vFkonPLuoz4OMtPn9cqJuRf/6G//yvuguoGf765QrhlzHe/CNSeb/Etydn+OuXW4S4xk9/RnjzVt3W/PxlCz5f3eCnPyP8Lb7N+ep6/fzlBv97O8M3/b8farehJWZf8TUeS58uMFgs8fBzPE8Y5gITTHNBjXF7FOhCLhqF88tsgYfZSs2t0ahw/iyez6rn+b1h3zIzldnyvXJwfx6WLFnapCfvF6hLv2OWuqGd+knr2LfhydJ+5PK05penJ7PvYGFhYWFhUYghfri+WZtXtVlzNxcEeujt6yjbScHKpTmensy+PzQDFhYWFhbHigU+vx/jza8R3sROb9//vHaI2wbDIS4/XehzSMp58uk6t9ghrFya4wnL7AxqC83CwsLCwsLCwuIIYM2aFhYWFhYWFhZHhPXijHKEYYiwybX1g4CABQ14JAxBwHbvn6kNnhEvhAVanwIwkn4OER6LDHaJWvJsqLsAAAqu5RZsHWpoh6C8oB/btO95ID8ejhXlfB5h3564Dp6KTlgcDup2AOVRuMebU4QFUcDIbsojLArCMApzFDCy1Y0wwoJsWUkaiViQry+IGKnB57HcTtuSF3P/0YiHPKJFaZV6RiO+Ie89y6VMlw7YtzsdL7ugPc8Xp02G8XBU1CGfXYyPk9bBU9EJS4eiozRrEsYRNNllkT6cOPhxv4++M4WEhJhv58NI+g76/T6caWGMGEydVJ19B126TDopkPPWO2OUM0AcUJAd6VJnSO3YUW6/wI8SW4yHvaJDPimbAGLeXTSGU8Op6ITFwVBjcUbAggC8aMFEGHigTS48t4gqS9Pm02BCQCbxti4HTbIFCKiE76gFjycnCPQeddo0Vr5tTcD4BJh6mcWSy4NNXvSLjRWlbQPt1TwMA3C+ufUe85JsZxOGIAgQBCHCgK/5UfbA8rRa9ZEkTxgG4DTbwg1eAChTWu5FH5sQjP2nTAphMAFJzHENFgyUg8HPLXJLeOHUzKdJLnkTZKF5JJbdpi6ZUKhnMOhuTgcbmzgI0S89CpeqAOM1MpWP6by+lOmZmyvRMDazH1u8dvvM+Qx8lrbPpEttyzS2wDgeKA+LTf2VOmEY02XzrrFMM5/GebdirtMthUsF/MwgOg0d3LesLSzSUNtopVvE2oS3kab+zymJABJRnjb9mNIUFZppCIuC/Fbvxv/isku2A/Pt0GaqQl5MaUZe82bNQJdR3PaEn0x92mzKaaqNKm/AyLodprSq+gDdJpr8lsZ/l/GSyUcyz2mZG81sRf1YS89UnnzZ+brTz+V8VvRDmocynpqYTWrpUoHuVvRDqbwp3zC91javl47pnL4QGvGghjwr28fXPBEaMV5DphX5yvmsbp9Zl5qXWU83zCasTL/XGpsFY9o079bRMyOfRfNuHZ0omytOQAcPJmtLlhqYNYXvZ7ekiQtKBOZCApAQcwFCSHWaCYSAiDkE1l86zQ5BU3BOMPVyvMLESws+Ee/sxaYvH+CB+loraHsWcRogH+V6e1tKSKidD/ko9XNcnSHNVB9hYFTA94X+vYRI/jbwAihZUFc/qy/fjabsEIRxUOHng+0kvKxjJGZ5KeWzsh+qUKZLJrTRpXS+zX4oz+Kh33cwlQKeNr3LqdPIvL45pnP6IgV8IUHOyZbyJGqHLy6ztkxL8pn4NLUPBl3aosxdYLPfS3TCNKYr590WemZCLZ2gUBbNYqkdtQ4ek6wtnh1qLs4kCuMDpxcJQFYBTWklIOdEByKmYBMC4fTh+LL2ZEg5BykyQe2Yzw1IAc9LTfr5Mk287AJt6zOliTmEDmZNGAPVi+ZuQMGozJk9crxQV5lOqZvlxcTnFrIu1SUT2upSWz6JCwoJCQKXlr8ASyotHtOp26GJ+Tp5qbXgU/rwPJEyKxXfAtww/1TmM/Bpap9Jl9qW2RIZU1veDrerMW2a63aBqjKpCyryRxWSzEeig6a8RyRri2eF7SIEEAICpHZ4HlM7Ooa0LkA5OJnC8Qpq2Tef+TK7hqm+1rwI+FMG7lKAEgi/w20z6oISChqGqX8GCOkUjuNDQmAuOFxKAJdCzL16fLZtu0mXTNibzlPw1DnNIJzEf4BOHTjb3EyRscxzIOet5SmFD0/4qhjGEXCGeVKH2oX2m+Yr47MSBl1qXWYLEAY+AYTTVwsXyhGyunkbjPeu512jThAwRjD1Gs4de9dBA45J1hbPCu1va8o5hKRqkgMBdane9apIS4EQN7OzIB+l/kIS8KcSNFBmzeqPHArOqcHkYOKlms/N4hg4o6kDoLr+uShse6cw1Sd9+IKCJbwS0DTflUULYMIxIcUmzXz/1StUQpJcnwovdes1ZaJLTZ7KHMUKzauFfBrl8gipd9s2+6hKl0xooUutoEyZnpAQXh99TyQy3G5h5sOXk8wBbEI5GEV7vSa5sQJS7yVmymfiswYKdWnLMtviUdVUX56mMV1z3t0ZqnSCMkwg0GxD90A6qC8aZDYwj0nWFs8OW7jSkPC9KcACtU2MKbzkxWBK07/wfQgy0dvMehdAzCEoAyOA9D04/T4cz4PT9yBSN1smZH3TSV3aU2aKzO2ntKlATiFdXsyLKa3gZiKnis852HrrPWCA50B9IKq2Ex4gDDncDo2BugHG+oTnQCQ3nDjcxwbb7XKuvFoUmDQL+69WmT58QbTsGuQTcwhKi82rhXya5CLgT4FJoHg4l6m0Kl0ytq1Mlwy62xrqduZcqOMAzc/UFUPpS8ohtTvXCxiTPA3tkz58uGtHulTCq7MLW5GvnM86jSzWpa3KbIp4HBTpYAXKx3T1vNscJt01zz3UbfeRczQ6iH3L2sIiC3U7IHX7q/Qm5B5IOX7lEa28cbYD2odTWMoLb991Wt/O2lRxM/ZoqAaf++6HnZFyylvLEa4lS4ek9Bg7JofbliydJh2cgQ0ilEdB4qqiw+vGHU0ghMXXtsvdc3RGu1ycncp17xI+D9oPliw9A7JjzJKlzujgDByOOvu6W/tBC2r609kZ7WhxRnnsv+0I+qk1nwfsB0uWngXZMWbJUhd0pv+wsLCwsLCwsLA4AhxlbE0LCwsLCwsLi+eK9eKMpm7HdHx9fDsop5W1eczHUTwknhEv6zh3yuFjOu5drWD2p4Za8myouwDSDjmbRcvoGIXxSNu0rznq6dJ+eLGwsLDoAtmdMzmF0++jqc/ANiAsaPmyUU4rMzwmV52ztO3LLP0SCDaCIOfre17Ba839R8EmEl6/n4QTkr6j/JhVKpdajBxsIdKRLikU6G4l1uGZjh9t2teillq6tB9eqkFAWZDoVJBaLRK6DpydCfCd+lAudOdCSvJZWFg8GRylWTMT1qTOLov04fTTsS6nkJANw9kUFeskTlELUjFNx9dsENPwyWOLOHKUM0AcUJAd6VJnSO3YUf68PhBOAYRxcCr0h0of3vxc9xGF6wJzbx2fV1IdnzfnlFnFUJWY+gIABQ8mQLxAdXxIym2/W1g8MdRYnBGwIAAvWjClvuACnltElaUVOHZNOyMlLEBA48DiDjw5Sb420ztZ5eYKAsYnQC4uosuDTV70i40VpW2DZPclAOeb5p+Yl2S3jTAEQYAgCBEGfM2PsgeWp9WqjyR5wjAAp9kWbvACQO1e5V70sRnL2H96RzGYgKScQtZ+cVAOhnwcvhJelPfhcj5NcsmbIAtNdLHsNnXJhEI9g0F3czrYeAeWEEDMIbVT2sdafBrGdF5fyvTMzZVoGJvZj60mCwmz7pbmqjVPNEDreULvIKciXcgkzqQKvi3WCZgXBFpXxaQ87ZNzEDmFH2eUAr4vQV27OrOweGpQVzdLXTDoq9IbabHjTxJt+rgxpSkiLNj0iVPkr2rjfxUOR/PtICwKwhJeTGlGXtfXxxUFuozitif8ZOrTDnc5TbVR5Q0YWbfDlFZVH6DbRJPf0vjvMl4y+UjmOS3zwv4z9WMtPVN58mXn604/l/NZ0Q9pHsp4auKWpJYuFehuRT+UyjvlNDpLgfY7ZaKyMZ3TF0IjHtSQZ2X7+JonQiNW0+VCqe7W6p8dOlCuOU8U5gtYxHiQ9E/AaTG/GVkb2lHk/udkHSxbsmSpjGqbNTfCcBAXlKivPUBCzIWOi1mRZgIhIDqkSvy13eysDwXnBFMvHzLExEsLPhHv7K1NEuDaJFHQ9iziNBVLNDEBSgkJtfMhH6V+jqszpJnqIwyMCvi+SEKOiORvAy9Q8QcJjWNn0sKYlrsEYRxU+IXBrlQsxHgLJMtLKZ+V/VCFMl0yoY0upfNt9kN5Fk+bu9Zn0uTUaWRe3xzTOX2RAn68m7OVPIna4YvLrCPTSt3dN1r2LZmAzL3EPCkIT+1Gps6uBgwQzuYZuUTu+lk+QpIJWLyLSFTsRwsLi6eFmoszicKYrjIXpzH9UjGllYCcEx08loJNCISjAjnXnZAp5yBFJqgd87kBKeB5qQVEvkwTL7tA2/pMaWIOoYODE8aKY1ruDBSMSvhlqwoxh9AxL0HdLC8mPreQdakumdBWl9rySVxQSEgQuBQNz8WVjOnU7dDEfJ0srFrwKX14nkiZNvNm2/TlmlxaF2PFiAa81O7blAkSEr6fXtilPvL0mbP8xyhlE2Ca/mgR8Jw4pmOIkLuAOPitBwsLix3j+61yEwICpHZ4HlM7Ooa0LkA5OJnC8Qpq2Tef+TK7hqm+1rwI+FMG7lKAEoiagYJbgbqghIKGYeqfAUI6heP4kBCYCw6XEsClEHOvHp9t227SJRP2pvMUPHVOMwgn8R+gUwfONjdTZCzzHMh5a3lK4cMTviqGcQScYZ7UoRYoflHGfY+jJrzU6Vv5CInzmlWrXcKJm6ol3j3s52qSPjxnzSVhAWjxStvCwuJE0f62ppxDSKpemCCgLtW7XhVpKRDiZr4+5aPUX5UC/lSCBsqsWf2FSsE53TTTpNLLeanmc7M4Bs5o6mKBrn8uCtveKUz1SR++UGaP+LA3TfNdWbQAJhwTUmzSzPdfvUIlJMn1ae52WmKiSy0SlGmTFZpXC/k0yuURUu+2bfZRlS6Z0EKXWkGZMj0hITztUkLLcLuFmQ9fTjKXAAjlYBTt9ZrkxgpIzYVNDd0t0qXO0KZvBeaSrk2QIGBM583PIem0+D8uTY55ZDhhDGurJgefGHadLSwsThJbuNKQ8L14ez0AwxReMkGY0vQvfB+CTLSpQ+8CiDkEZWAEkL4Hp9+H43lw+h5E6vbfhACUp25jaZNX/L8Nv0ByCunyYl5MaQU3E9VV9znmYGvzT8AALz4votpOeIAw5HA7NAbqBhjrE54Dkdyy43AfG5iK5FzdJit4QRT2X60yffiCaNk1yCfmEJQWm1cL+TTJRcCfApNA8XAuU2lVumRsW5kuGXS3NdTtzLlQxwGan6krhtKXlENqd64XvCZ5Gtonffhw1450qYRXcxe2UncLdakLWcM8Txjb4K9NkGEAKj2VV8wxT8klDPk6TbdDWTQ3ZSXmgMtj/3uAcLzOZxkLC4v9Q90OSN3+OmSwa8KCKAx5RCtvnO2AOgt8nqJ936TaUeBzRTu88dYp1eDzZG+00YjHN/3q3BC0tHvaxzxhyZIlSyla75ylTEuH9KotfQeOBzCe+qI8HDutQFjsy6lr81bHyN8UO1aU8Pk0+mHtwHQrk6WFhYWFxclguwsBHUEKD86xLwgMkL4PBCFCAkhR3wRyTKA8BKdSmZYOzYwBJj6fQj9YWFhYWDw/nEFtoVlYWFhYWFhYWBwBjjK2poWFhYWFhYXFc4VdnD1TpOMP1goub2FhYWFhYbEXfAdkX9R5D9X5oMWJyx7Ks64GmrgcaBnQeBeBkJuFgyKgLEjaH6TaRug6sHsmQHSVXEhJvj1D+o66ANLB7Q/CNj2dV+Ypk6eFhYWFhcUzRHJ1cyO4MmERTwXqJSyoCDRcJ+hyPrgyi3itYM3t85W2r8bv0+0llOn6VPBmmg7mXOrKIS0X5RYhCZJOaG2ZdUY7db3RTs7N5GnJkiVLliw9eVo/VL9UacRDHtGitNov+c0y6r3M2+Zr+3tDW5uUnZZLkb8kyqOAkYgwHgWcRqTFQo0wHgXaF1YY8Nxij0SMB9qHXRDxPI+l/WbKl0uLF5spX3lrqi/D9n1lyZIlS5YsPR1qduaMuqCFwYhV6JFaIW/IOUiujHXYpg7y1YH2Qp6xyOr6znnKJMpLQh8RFaJFPuZbX08uhBBI34cvXWXaC3gq5Es173wCiDiAsjcH2PoMGeUBqPTh6ODKoEEtb+mmfJm0vof5uQ6hE4cQisMv6fTGhtNSeVpYWFhYWDx9/D+b0ivnfpnxHwAAAABJRU5ErkJggg==" alt="image-20211205111153418"></p> <h3 id="测试性能"><a href="#测试性能" class="header-anchor">#</a> 测试性能</h3> <p>redis-benchmark:</p> <p>官方自带的性能测试工具</p> <p><img src="data:image/png;base64,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" alt="image-20211205100926402"></p> <p>测试</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">#测试:测试100个并发连接 每个并发100000个请求</span>
redis-benchmark -h localhost -p <span class="token number">6379</span> -c <span class="token number">100</span> -n <span class="token number">100000</span>
</code></pre></div><p><img src="/docs/assets/img/image-20211205101539901.cc65e475.png" alt="image-20211205101539901"></p> <h2 id="基础知识"><a href="#基础知识" class="header-anchor">#</a> 基础知识</h2> <h5 id="redis默认有16个数据库"><a href="#redis默认有16个数据库" class="header-anchor">#</a> redis默认有16个数据库</h5> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># cd /usr/local/bin</span>
<span class="token comment"># vim /fanconfig/redis.conf</span>
</code></pre></div><p><img src="/docs/assets/img/image-20211205102423899.84546157.png" alt="image-20211205102423899"></p> <p>默认使用的是第0个</p> <h5 id="可以-使用select进行切换"><a href="#可以-使用select进行切换" class="header-anchor">#</a> 可以 使用select进行切换</h5> <p><img src="/docs/assets/img/image-20211205102612324.e9f3a33d.png" alt="image-20211205102612324"></p> <h5 id="增加一个值"><a href="#增加一个值" class="header-anchor">#</a> 增加一个值</h5> <p><img src="data:image/png;base64,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" alt="image-20211205102642368"></p> <h5 id="获取所有数据"><a href="#获取所有数据" class="header-anchor">#</a> 获取所有数据</h5> <p><img src="data:image/png;base64,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" alt="image-20211205102813650"></p> <h5 id="清除当前数据库"><a href="#清除当前数据库" class="header-anchor">#</a> 清除当前数据库</h5> <p><img src="data:image/png;base64,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" alt="image-20211205102857332"></p> <h5 id="清空所有数据库"><a href="#清空所有数据库" class="header-anchor">#</a> 清空所有数据库</h5> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAdEAAACbCAYAAAA9d6ElAAAfXklEQVR4nO2dW6wtR3rX//v4HB/7nDn2+G5Pezw4E32bSzQS4oGEyQMNJIygloSAjFAeAMFDvwQFVgmJIHjICwikWkhcItVDpEQRSDwEjVgthIiikgABQhAhFCnaBUQTxzUzdsZjezwXj2/FQ3ev1d2rb6v3Wvty9v9nffI5q1ZVddWy++uu+ur7I4QQAeyasjGEsGtOR6l9T9kQnZbuNvYx0dEFG9WUMmVjsGpbVr8mZbfXOFRWmmi3e/3tejsmUTsXtZxzzJOtp79yXjafTx1713wOjrfrekK0amDOps41jUajXWO7hT7yDEmSbCxdefhViiQ18JsvCU7FI1/73mYm4w1MrqC1gpRtq+rPfo3cKyyUFJ8vFLwv+/Rn8KKwEGzK9kVkUfZZuxa/hNXbT0VZ6KlNi4YLAXb/S5nFWdHp9LF3zOdFsTPXhBByjel3olOQBRRyHMKHAkCepchLBxSCxeLMlw7bw2QrQDuE4KCxQmaqTnOYFbB0RZ1Tn+/VpzcGuSw3fVbupLgWixACQgiwizXW+zV9fLyByQV277EX8ynWFfOMqfUUbAgIwWEpgLLl3Ez13T1zTQgh15WTEEJMkmRWZWUdFusU2VVzLoQQQsgFcC4nSgghhNxkbl/2BdwMFOzM5cs8Sy7wTX/4Og9/LddlXgghpBu+iRJCCCEzOV9gESEPKbdxgi/fe4Afun3nsi+FEHKFoRO9AYh2ZZSxg5b63wOC04c5ciIabkZbQ9dylOsc4REAf/HeA/yXF1/Bzz/5LH7now8voFdCyHVl0InWb2JOS6vMlkcVAoKzUFWx2h4LadikcxACbbc3fKum3jbn1Rsa31h/SrvN+F1tbKJ0eeSkvJaq3bF5kZ5650ZBLz2yJEGSpDAe8CYtzv9egU3FoWu5yOu8BeDPPf4p/OcXXoF9+gV8/vYdfOX77+Hjo/dMCLnODDrR6iaWrloHQUVDy7q8MSdIc4G15ZtCK0lDkqRYeY+VGb8RKuugvEGaJEjSHLAWU3zJ3Hq94xtBtIVV+Wb82fq07E9hsQDWWTn21MArV5yjHJwXBeuWQOU0UgOvpo1h/GJPmdxggFsAFo9/Cv/xhVfwi8+8CLnz6KbsV7/3ncu7sBq3cYJP37qFzz5yG3/wzqP4o48+hidvcRGJkKvAvP8TvUGW5ZvMRcUheum+WSuN5aSEDAoLlcOYsl1vYFaAWoy5gLn15lK+2dUyN/ncoMj9kMNkBvm2AOvcQ047rqU+L3IK8SuYqqLPYYyHWkjxxm8VZO/hCLQLCG4JqSVJGHXM7WVZZRtLqe0ViHZ7C9tcOt42Ey58aXaIEwB/5vH7cC98Fr/0zIv4AzXnCQC/+/FH+J8fvH+u9u+enODZW4/g1dt38IU7d/HFu4/jS4/fx5fvPcBf/9ST+JsPnsLff/IZ/ONPP4dfePoF/MozL+ErzyX49ec/i//+4ufwWy+9iteTz+ONlz+P//eZH8L/eun34T+98Ar+3fMv47deehV/+4mnzzcJhJBzc5gjLmoB5T3MToFAa4XcJBj1oXIK8b7xPX/mIQsBhmrPrTcF0XBuCV8/TlH2d2q3y8Y+zxoPFdv6CloJvGmXTJsXEYHPDIzWsM5CfI6VMVtnO4iHSRMY0XBOYJJscl6i/gvSsEsgT5PioUEUtNaQrHygkCXEpEgyD9EOTiuYcuLyLEGyacbB2bNLWU4+AfCTj93H33nyaXzhzt3e77n3v4cfvv0oHty6hQcnt4p/1/98ctL6++6/75ycHG0cd09O8LcePIVf/u67ePNjLjoTclkcYE1IwVqF3JgOJ7KAkny/dHmi4aa8MR2q3hxkCVlnm2XZXGxtD7N8AyzfuJB3ZHRqz4s/g5cldLWXK0UO4bIQucmKpepsDSwsQnB77uEeEsHmtdgXb97b37148waKB5m+peShsmNxAuBPPXYPv/b8Z/Gvnn1p0IECwF++/wT+24uv4Neefxn/5rnP4JefeRH//Knn8Q8//Sz+7hNP4288eAp/9f6T+Av3HuAnH7uPH7v7OH7kzl187vYdPH3rkaM60Drvx3gh/RBCujmnExVoZyGr7tR/Si+BldnvDcgbpGUAzF7MrTfaZseh/vrSKzyMySGb9dbiDbC+J9p2eLvzkiNLq9zAAcEugPzyg352KJfxt0u6rYeW1opAncYy8EVl5kfhPP/4Y/fw759/Gf/62c/gDz867DyvCz+IEf/kvbfx7U8+uexLIeRGc47lXIF2DipPkXZ5LtHQKodJJno1fwZfKnxUNeRUtmoth643F38Gj9OJ3y32apf1peW+efEGWbpdEBftoLxHEQmsoZeqXM7NkGRHGtsEfG6Q5aa8RgtnNdZpxypEnfYysLII+vjX+uN3H8fPPfEMfvTuY8fvbCYRwHuffIL34ifT/l3++Tc//ABvfPzRZV8+ITeemW+ixRtorwMFIAsFydfdb6GdUmE51nUpNNHQSzRl1g5ab8owe/rzarv0Wu5veu8BpWE3Um6tsuqTnnlRWmO7mmthlx7GeIguI6HTBEmaTdwPnYj38O2AsCFpOdkdX/FQMY1Bybaua5lSNsC7n3yC//3h+/jWJ4ffM/wwRrz1ycf46kcf4jc//AH+6w++j//w/nfxq997D7/03Xfxz957G//g29/Cz73zTfzM22/ir7z1Dfz53/safuLN1/Gj33gNf+jrX8Ur4bfx3Ov/F69+7bfxha9/FV984zV86c3X8VPf/Br+2lvfwM++/Sb+3jvfxD/69rfwC++9g1/57rfxle9/B7/+/vfoQAm5KvSKcgOdwtxWdX8eGoLaKtowIFotOrrQEnUGIiBRW1e256JVHWLZh6zXN77R/lS0blvHWVWKT0tU2ka3ac/VykbmRfS2TWcPJ/g9JHYORLWZt+13RG/nUuumuLbUx+dsVFLrZ0CUW9n+NoeuZUrZmD16chL/7OP347989qX45ss/HN+aYP/jxc/Fn7r3IH7psfvxi3cfj1+4cze+evtOfPbWI/HuycmlCwHTaLSrYcydS24Uzz3yCL587wF++t4T+P2tYy11IoAf+8Zr+D8ffXBxF0cIuXbwxDa5Ufzexx/jX7z3Dn78jdfwJ978Xfzid97FOx3BOScAfvbBpy/+Agkh1wq+iZIbz92TE/zpx+7jp+8/gT/52L3Nk+VHiPgjX/8dvM79R0JID3wTJTeeH8SIf/v97+AvffNr+JGvfxU//+5b8B9+gNs4wc88eOqyL48QcoWhEyWkxhsff4R/+t7b+GNvvIafePN1fBgj7p3wfxNCSDeHSftHyENGBPAbH7yP3zhH/lxCyMPPyCO2aspzVQcZlW1lnSkSnF9gIhpCCCHk0hlwomVKv7yS5+qTGFOwoT/1HyGEEPKw0u9EyyTppspI1Ckxts2d25e5iBBCCHlYGXCi0i0xtkm0flrkzvUZHSghhJAbyfywQ7WEgoeoBbgVSggh5CYy34nmGdI0RZYXeqKEEELITaPfiXYoZ3RJjOVZhlxZRuYSQgi5cQw40TVyr6CrcNwuiTEAQA6z8lDWclmXEELIjWJgOdfDpBm8csU5UaeALENXDJE3GVZ1h0sIIYTcAJiAnhBCCJkJk4ISQgghM6ETJYQQQmZCJ0oIIYTMhE6UEEIImQmd6E1BWQSni3O/ouGqP89CoB1VewghZNCJii6Pt4QA1zq+ItrClWXBWVQqaVB2U6dhk+64Am3drvTakeoNjW+sP6XdZvyuNjZRuikfp2vycUPzIj31riQeJk2o2kMIISGEiEKDuNdEu+i0bD8THa1VUWrlwenN35smUTsXtQz3ASAqG6LTZbuiow3Hrdc7vgnfr49XlC77U1FbHVXVt6ioXYhWjc2LijaEaJXU6u03hlFTdnvNoqPr/b1oNBqNNtlmOdEdU9EGG1VXWf3mPWi7bUxzbnPrzf3+wFj3aXvMqSkbnZYo2kZnVZQ5DlV0dCHEEFy0drc/bV0MIURnm32LtmW9EIOzDWcuuqgTQvvhoHgQCHVrjEk2/YXgot3j96HRaLSraofZE1ULqJZsWoFAa4XcmI6y9ldPR6TXDlxvCqLhQmvvr+zv1NaWgq3q3l8UBa0E/qw9+mnzIiLwxsD4RbHU6yz0XkvcS/gsRZJkWLeTMsoSss6QJCkMltvlY9GwSyBPk0KMPVsDert/6k2KJEmx2rnwHFlS1inLfb7ejE9ZB+UN0iRBkhpAOe6pEkKuPQdwooWKS6dDKIW91/vsnYmGCw57bwnOrTeHjQMqHEYutraHWQTdFHvFGsjT3b3D9rz4M3hZbh2kKGhdeRiP3GSF88nWwMIiBDe+h7vpwxdt7PwIzbLmQ4cA1d99DpNNeAiq19YWy7rOrGholcOYvGjH5zC5h5xe5X1fQggZ55xOVKCdhaw6HAUApZfAymCv+BNvkCZpZ47eo9QbbbMjgMavYPKqIw9j6k6oCLpJyjcur3Yd3u685MjSFVAFOtkFkB8gaqdzdaCnTE6Lt01vkGV5LXBszwcTZeGWHtnOpCnYWkCVW8phVgsIIeQSOYcTFWjnoPJ0+8bRKK7ePiZ6NX82SXrtYPXm4s+mv5X5vOVg0T8v3iDbON8Ma1RjEKjKodkFUC7Bds55m9a8DJbVxuVzgyxNkSYJ0pXH0k48DiMazgpWabb74ORXxdt03RjeSwi55sx0osUbaK8DBSALBcnX3W+hXXuNyLHOi2XM6izjjvTaQetNGWZPf17V9iaL/U3vPaA0rK7vj9bKqk965kVpje1qroVdehjjIVpDy7pwsGlWewMeoZSyWygBIFCL9uCbZZtrlN0xTHtw2O7B7vwn4Q2MXzaO7Yiy0NwTJYRcdwajc5VtRltWEZkdn4dGxKoaPmZSRo3uHv1oRXAqOW69vvGN9qeidds6bnPcR6KqR7YGVysbmRfR2zZbEbGz7UDRuZsjO10RuNX8bPqaEp0bWvNCo9Fo19MohUYIIYTMhGn/CCGEkJnQiRJCCCEzoRMlhBBCZkInSgghhMxkmhPtlc66/pJYyjL9HCGEkJlMSUBfqKQcLmH4vgnij2qzFE1GjtTQaDQa7UbYhDdRhcU+mYeuG36NHAqLPTLQNZOp54C1F5OzlxBCyJVi3In2KLTUBa2bKifF0m9dJHvjYEpharcUyLIqtzV9kZa4tm6my6tyuVprERrLywP1yvSEtiEiXq/rceYFarIXrR4qqmTqBmaFPeoTQgh5WBh1onLanfatXxILDZWTdAUsq/xuefWZh1+lZQ7VbZ7VfrmsYVmvcZktgVJ+K9WVNlVJvN9DOu2Y0muEEEKuFZMCi/ZP5l7JbBUOZqMQMsSQXNaQrNdEma0h7c5dvc8JXKT0GiGEkCvJ7SlfKt6y9nA0QxJcgxRyWQ3yStdyqM2+elu5sqHngFm6lt4gTUzZwP7VCSGEXH9Gnag/84A6hSCf6Rj3wK+Qpl3i3qcb6a7Oa+irNxGRPaTT/Bm8LBrXclTpNUIIIVeW8eXcfI18SJdyJlI6og1DcllDsl7nltkSnIpvSqcNMkF6jRBCyI1gwp5o5TTqLq9YPg3BYSmAsh1RugN4Y5DLsoyW3Ubn5lmKXOw26nexRrH96WGyFcQ6hGCxaKlx9tebgCygkGMfH1j0V0YLOwVk2a6GJiGEkIefKckW5iUkOKIpG4NVB2lLWdehF0qj0Wg02gSb5ESvgImuhKrl4BmUaDQajUabY5Oic68C3hjABQQBfL5CxvVTQgghl8xJCCEmSXLZ10EIIYRcOyiFRgghhMyETpQ0qOdEDp3yd4QQQioGnWj9hupa+e2kkdDdQrWSzO/YpPMvrUTyauotfF69ofGN9ae024zf1cYmSsO6sJsMf2xepKfeBVPkRE6QZFPPCE1HtNtzngfmkxBCrgJTonN39D9FR2vV5siLaBdD7xEYidq5MrJ22Iqo27Jd0dGG49brHd+E79fHK0qX/amorY6q6ltU1C70HKGpz4uKNoStLqmoyXN2NFN24DedZ/vryO4znzQajXYJNsuJ7piKNtiousom34x325h2051bb+73B8a6T9v1eek6h6tsdFqiaBudVVFmOFTRNroQCvFwZ1tOuSUs3r7G3t9tqF6PWLmy5Wd1mz6H838rGo1GO64dZk+0R3MUEGitBhVUtl+dKTF2TGmyMitRUy+16O/U1paCrereOxQFraRDJWbavIgIvDEwflEsaToLPXWJWzTsEsjTUv4tWwN6u8c5Lh/XzVC9RlmSYX1aposckcCbTO98EkLI5XAAJ6pgbY9D2EiY7dHcXImxi5Qmq+mlJkmRcnC7VyfQbhuYgzzFzvZie178Gbwstw5Sity8ZSFykxWOKVsDC4sQpu4tClA9TPgcJit/o4nycbvNDcnVtcrgkZtDiBZMmE9CCLkkzplsQaCdhaxSpB03NqWXwCrd741jrsTYMaTJ6m02Pl/B5FuZNWNyLBeVrouHSRMYoHCG1sEhRVpLDrE7LzmydAVrHYIF4HOs8vx84/AGWQZobeGsQOCxStNajt8x+bg+5srVzWV8Pgkh5LI4x5uoQDsHlffc0DZvJvtIjDXVYiZJjM2tNxd/Nt1R+OLNrLG03Dcv3iCrll7TDGtUYxCoKhLaLoB1hiSZ5kR8bpClKdJyKXVpa0dW/Kpcdq3ZlFe8oXpHUPtp9t0xn4QQcpnMCywqIkuHAjxEu/4k8aKjC7tRlqNRtgeu1z++sf5qQTOQqF2Zy1fpaLWqBePUykbmReltFKooG10ZeDM7sEia19Lut51/WJSNWrXHvhv8M1Sv8TtAomrMRXUNe0T8TphPGo1Gu1QbdKIdUZVWdX/ejLZUw8dMep1aT3Tnser1jW+0PxWt29Zxtu44ahGxwdXKRuZF9LbNnUjaedaOzlW90bmhdZ2FqU15/bcdqjfyOzTmbUp07th80mg02uUac+cSQgghM2HaP0IIIWQmdKKEEELITOhECSGEkJnQiRJCCCEzoRMlhBBCZjLiRFVThqpKS6dsS9qsyGIzSe2MEEIIeUgYcKJlSr+8TBie5oC1HblpFWwoUv8xpykhhJCbRL8TLZOkb9LTeQOzAtSikWBvmzuXuUwJIYTcMAacqIxIjJ0WuXN9RgdKCCHkRjI/sEgtoeAhagFuhRJCCLmJzHeieYY0TZHlhZ4oIYQQctPod6LeT5IYy7MMubKMzCWEEHLjGHCia+ReQVfhuKKhl0C+bu9/5jArD2Utl3UJIYTcKAaWcz1MmsErV5wTdQrIMnTFEHmTYVV3uIQQQsgNgFJohBBCyEyY9o8QQgiZCZ0oIYQQMhM6UUIIIWQmdKKEEELITOhErwvKlmo6+6jlFOo6IQS4Y0ROK4vgdHGWWDRc9edZCLSjEhAh5Hox6ERFu82Nu30TFm3hyrLgLCqVtPrNvmGT7o4Cbd2u9NqR6g2Nb6w/pd1m/K42NlG6KR+na/JxQ/MiPfXq+BXSJGmo5fT2BwDIkSUJ0tV1yG3sYdKESkCEkOtFCCECGDTRLjot289ER2tVlFp5cHrz96ZJ1M5FLcN9AIjKhuh02a7oaMNx6/WOb8L36+MVpcv+VNRWR1X1LSpqF6JVY/Oiog0hWiW1eq0xKNsxx9P623d8k61+TaKj6/1vgEaj0R5Sm+VEd0xFG2xUXWWdN/9pbUy7+c+tN/f7A2Pdp+0xB6Rss97Eeezqr/2ZaBudVVH2eNDYmOjoQoghuGjt7hi0dTGEEJ1tXqtoW9YLMTjbeEAQXdQJof0AUDxchLo15kA2/YXgoj3GgwKNRqMN2GH2RNUCqiWbViDQWiE3pqOs/dXTEem1A9ebgmi49h5k2d+prS0FW9W9FygKWgn8WXv00+Zl7zH09tfEGwPjF8UysLPQey2bL+GzFEmSYd1O9ChLyDpDkqQwWG6XlkXDLoE8TQqB92wN6O3+qTcpkiTF7qpzsRydJMmm3OfrzZwp66C8QZokSFIDKMc9VULIhXIAJ1qouHQ6hFLYe73PPpdouOCwdxzM3Hpz2DiL4uaei63tRRYBMsVesQbydHefrz0v/gxelltnJgpaT/UGE/rbwSM3WeF8sjWwsAjBje8Lb67bF23s/LDNsuZDgADV330Ok014sKrX1hbLunataGiVw5i8aMfnMLmHnDL1JCHk4jinExVoZyGr7hu30ktgZbBXrIg3SJO0M0fvUeqNttkR7OJXMHnVkYcxdYdRBMgk5duRV7vOaXdecmTpCqgCnewCyKfO2nh/B6VzxaGnTE6Lt01vkGV5LRhtz4cdZeGWHtnOD7GNPg4hwC3lMCsQhBAykXM4UYF2DipPt28HjeLqTWGiV/Nnk6TXDlZvLv5s+huUz1sOFv3z4g2yjTPMsMaMMXT114lAVQ7NLoByCbbzd9ypKv3HWNpltbnyuUGWpkjLaOGlnXgcRjScFazSbPdhrIxWTurG8F5CyAUy04kWb6C9DhSALBQkX3e/hXbtNSLHOi+WMatzhzvSawetN2WYPf15VdtHLPY3vfeA0rC6vj9aK6s+6ZkXpTW2q7kWdunHH0Am9Nc9LA0t68Jpp1ntrXqEUh5voQSAQC3aE9os21yH7F7ntIeR7R7szlR4A+OXjSM9oiwmr4ITQsghGIzOVbYZGVlFT3Z8HhoRq2r4mEkZ4bl79KMVbankuPX6xjfan4rWbeu4zXEfiaoehRpcrWxkXkRv22xFr26udSc6d6y/wg56xOVA0bmbYzldEbjVnG/6mhKdGzrHTqPRaEe1KUdcaFfAag6/+9xpl20d1FHOidJoNNoNN+qJEkIIITNh7lxCCCFkJnSihBBCyEzoRAkhhJCZTHOivTJX11++SlmmiiOEEDKTKdG5hUrK4aI7j6YqMsdmqY+MHKmh0Wg02o2wCW+iCot9Mg9dN/waORQWe2SLayY+zwFrLyZnLyGEkCvFuBPtUWipC1o3VU6Kpd+6SPbGwZTC1G4pkGVVbmtaIC1xbd1Ml1flXbXWIjSWlwfqlekJbUNEvF7X48wL1GQvWj1UVInPDcwKe9QnhBDysDDqROW0O0Vbv3wVGion6QpYVrnY8uozD79Ky3yn25yo/dJWwxJc45JYAqX8VlYrbSqIeL+HdNoxpdcIIYRcKyYFFu2fzL2SxCoczEbNY4ghaashCa6JklhD2p1j+pt913th0muEEEKuJLenfKl4y9rD0QzJZQ1SSFs1yCsNyqE2++pt5cqGngNmaVB6gzQxZQP7VyeEEHL9GXWi/swD6hSCfKZj3AO/Qpp2iXufbmS2Oq+hr95ERPaQHfNn8LJoXMtRpdcIIYRcWcaXc/M18iENyZlI6Yg2DElbDUlwnVsSS3AqvimdNsgE6TVCCCE3ggl7opXTqLu8Yvk0BIelAMp2ROkO4I1BLssyWnYbnZtnKXKx26jfxRrF9qeHyVYQ6xCCxaKlxtlfbwKygEKOfXxg0V8ZLewUkGW7epeEEEIefiZJoc1KSHBEUzYGqw7SlrJuD2kxGo1Go9Fqdl30REVXQtVy8AxKNBqNRqPNsUnRuVcBbwzgAoIAPl8h4/opIYSQS4ai3IQQQshMrs2bKLkCxIGykwu7CkIIuTJQT/S6oGx3ruLhSmUUdYBjaiVCCDk4g060nmS+fROWRkJ3C9VKMr9jk+78rUTyauqNf169ofGN9ae024zf1cYmSsO6sJsMf2xepKdeHb9CmiTI6lkP+/oDAOTIylzFhBBCjsCU6Nwd/U/R0Vq1OfIi2sXQewRGonaujKwdtiLqtmxXdLThuPV6xzfh+/XxitJlfypqq6Oq+hYVtQs9R2jq86KiDWGrSypqd86U7Zjjaf0dTL916J8rECVHo9FoF26znOiOqWiDjaqrrPPmP62NaTf/ufXmfn9grPu0XZ+XrnO4yjbrTZzHrv7an4m20VkVZY8HDQB0ojQajdayw+yJ9miOAgKt1aCCyvarMyXGjilNVmYlauqlFv2d2tpSsFXdaRFFQSvpUImZNi97j6G3vybeGBi/KJaBnYWevGxOCCGkzgGcqIK1PQ5hI2G2R3NzJcYuUpqsppeaJEXKwe1epEBXe5ROA3na2MMsvtKaF38GL8utM5MiN+/EixnvbweP3GSF/mq2BhYWITgGHxFCyJ6c04kKtLOQVfeNW+klsDLYx4cWEmPp/rlo59YbbTPZHZtfweRbmTVj8tpbo4dJa+Lfatc57c5LjixdAVWgk10A+dRZG++PEELIcTiHExVo56DyFGmX59qIZe8jMdZUi5kkMTa33lz82XTJNZ+3HCz658UbZBtnmGGNGWPo6q8Tgaqiq+0CWGdIkp7fkRBCSC8znWjxBtrrQAHIQkHydfdbaNde4xSJsYPWmzLMnv68qu0jFvub3ntAaVhd3x+tlVWf9MyL0hrb1VwLu/TjDyAT+useloaWdeG006z2Vk0IIWQvBqNzlY0hhIZZ1f15aESsquFjJqKjC11HPyRq68r23PbIx7Hq9Y1vtD8VrdvWcZvjPhKVttFt2nO1spF5Eb1t09nd73RG5471VxiPuNBoNNqR7LqouNx4qzn86dJtxfnTEA6kekMnSqPRaA1jAnoynThQxty5hJAbCHPnEkIIITOhiguZDt82CSGkAd9ECSGEkJnQiRJCCCEzoRMlhBBCZkInSgghhMyETpQQQgiZCZ0oIYQQMhM6UUIIIWQmdKKEEELITOhECSGEkJnQiRJCCCEzoRMlhBBCZkInSgghhMyETpQQQgiZyf8HVQjdqpcMG4EAAAAASUVORK5CYII=" alt="image-20211205103053722"></p> <p>为什么Redis的端口是6379?</p> <blockquote><p>Redis是单线程的  6.0以上是多线程</p></blockquote> <p>明白Redis是很快的，官方表示，Redis是基于内存操作，CPU不是Redis的性能瓶颈，Redis的瓶颈是根据机器的内存和网络带宽，既然可以使用单线程来实现，就使用单线程。</p> <h5 id="redis为什么单线程还这么快"><a href="#redis为什么单线程还这么快" class="header-anchor">#</a> Redis为什么单线程还这么快？</h5> <p>1.误区1：高性能的服务器一定是多线程的？</p> <p>2.误区2：多线程一定比单线程效率高！</p> <p>核心：Redis是将所有的数据全部放在内存中的，所以说使用单线程去操作效率是最高的</p> <h2 id="五大数据类型"><a href="#五大数据类型" class="header-anchor">#</a> 五大数据类型</h2> <h5 id="redis-key"><a href="#redis-key" class="header-anchor">#</a> Redis-key</h5> <h5 id="string"><a href="#string" class="header-anchor">#</a> String</h5> <h5 id="list"><a href="#list" class="header-anchor">#</a> List</h5> <h5 id="set"><a href="#set" class="header-anchor">#</a> Set</h5> <h5 id="hash"><a href="#hash" class="header-anchor">#</a> Hash</h5> <h5 id="zset"><a href="#zset" class="header-anchor">#</a> Zset</h5> <h2 id="三种特殊数据类型"><a href="#三种特殊数据类型" class="header-anchor">#</a> 三种特殊数据类型</h2> <h5 id="geospatial"><a href="#geospatial" class="header-anchor">#</a> geospatial</h5> <h5 id="hyperloglog"><a href="#hyperloglog" class="header-anchor">#</a> hyperloglog</h5> <h5 id="bitmaps"><a href="#bitmaps" class="header-anchor">#</a> bitmaps</h5> <h2 id="基本操作"><a href="#基本操作" class="header-anchor">#</a> 基本操作</h2> <h4 id="判断该属性是否存在-exists-属性"><a href="#判断该属性是否存在-exists-属性" class="header-anchor">#</a> 判断该属性是否存在   exists + 属性</h4> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfAAAABbCAYAAACMANd/AAASvklEQVR4nO2dPY7juBaFzzzMAiZXfiueJQjokF4Hc3EdUn7XYYYDcB1mNAnDBiYpoDK9QLIt2ZJFyXZ1ufp8jRuU5Ms/N3z5f/Dx8dEOLaXUvr+/t+/v721KqQVA++pmtE0ptSmlVk2un2m19wlOfn0dIK0La8pPo9Fov7f9DxsRF5BSQkoJwcnFO0Xo36WgMMfXRk8+I1OTkyOcHvMMUCPLLnf43arfUn7GhVP9w6BuYhw0pHNZjukutYvM+A2JDcqigPVYzg8A4GGLAmUTV9TtmUTU5bj8OYgLK78fQgj5Jtw7AhcXxiM4ca2qaWXwPgV3+nts0roQWifLPQ2jqQ2uT1dcq+m5frP1y/j8sL5iXJ+faZ261hzzFnNjxDlsl26krEYGfhd1MDrRxnn5ra3fV7NXLz+NRqNttocH8CszrSZtzdS7ycCTl0beD/dWv62fv1HXNWkP20VcGy7byOjYL7Mdp/K7fCZO26CmlRWdnLNJ6zT00/mh1UG6RlOb1Az+PucrLswuAYjTNvTvUtBzx2WwbHC2c9vP+t2yvq2HdRj6GR3kNfp+QhtCn0/vO27n+Xah0Wi0rbZ5Cj0bs4OJEdcTtQLnDHxdT7y7/Ogb5CKNeIgQWZg63eqXgziElDCa/e/ze9PB9LsaTOYmBs4I4uGy9nntsroOs/mNiXWNOu66qfegcNlLFYDRABNrlEWBoqwBE07t422JRrT72yiceNg69nmWKIoSV7P54qAV4MsCRVGgsHvAua49vUXRLwHEpuzeFxZ+yW+xnSrI/pg2ULnzF+xtn15RoPTmvDwiEXVZooGBiRaF9RCzw3nlaL5dCCFkK08O4AaqM8FIdjDisV+z5ikOIQWsXvLc6reFQQAoihJedLD2LHDHNengAF9er/letks8IEp1DqRi4Fzur39GfldE+Np2wcbugZ0ipYx1ZnFwxqOuffddR4/aR8jb0S+itg1Eu7S8zei49XXAsbMSPeqn+3nsfd+xOMSuUzbxqdG7GBERcYj982GncbFdCCFkG08M4AIXFNJMBw3jKqCpsWrPUqxRFiXqtfuutvotpjmx6So2qP0xo4i69oPRcrdRq+hHYtFcB8brdvGwZQMcN9XpDvC5rbac32Mx0MEmvFDJeKYg7uGjQGKd913EGtb6wabIzE7YVj9gHHwvGG3OXDWEXmgXQgjZwJMCuMCFAONLlFO/1KdRSWZEjQdEkdFISN4EMS74b/XbSjxkjvLQjcRGwR3z7RJr2FMgtthjQx2m8ptEYI6BSnfA3qIoZr7Hqzy6nfDF0AY9HHGKKjZoxGVPIUdfw5Ylyn66vNK8qfCtfrNcTcuv6HoutAshhGzhCQG8G3nPBm8AsjMQv58efU+tLcNj77upY+k/4yrA7+OT/HKqOZNfNIN14249O8YIGAd1w/Xwwbvjk5l2Mc7hPIOu0Coud34y8puuloOTfddhKO1gNmGBWKOO1eiomhjFabZfHLSKsLZGbT1EFYtNLtd1mOokiezGwTnTbwuHPj2zy+2BLLQLIYRs5M/NnkYH04gBqeo2+Vg4VCJA1T3r8LDHDUYwcBXQlOtGIN6WeFNFSAogwlubNQ271W+2fgvF9rbGLgQk7f6O3vabtfbYvzlo0j6wxME74Fa7+D2gmqACIHo0pV1eevBL+U0Ta4tyKe25LPu2TqnP0VtYC3Rn8StEW3TljjVsExCCQ1ke4NIgmGtCwrGta9TQcx2ih734AmJdwwdFSBVO/8/ist9qYo3aB2hIACKaxiN3SD/fLoQQsp0/Pj4+2uGDnz9/4q+//gIA/PfffyiK4pcUjKxg0NnI6WT0TtA+cMYmc4qcEELIl4EBnBBCCHlBnn8OnBBCCCEPhwGcEEIIeUH+/Oeff0YP/v77719UFEIIIYTk8r8fP35gaKsRhxCmzth2t4C98pWRRnnlJSGEkK/J3VPopjtYPXHG9vXlIX3tIbl3aPdslyElhBBC8rkzgBvs1tyo9mrEPTwMdivicCfM8ZV0tgkhhHxH7gvgM0pjw1HoWK2rm253J7WuwR3VRs/3RFfH98PbumTkN7zZ6ngrWkoBqoo0mtK/4ddf+arDO65HvhGHKDBrIjghhBDyCdwVwOVt+orKWXlIYF6u8ZY8JG5JMh5v+SpRFBb7iws6l6UcBcZE2GIg+jGsS3yQ/CghhBDyQO5eA18vDJIn1zjiliTjSX4zAojwQ33STCnHW9rbS/rZhBBCyK9g+13oPd3odEWQuyHXeJtOknGEP+o930pzzu8s+XmrD0LdZkIIIV+RuwJ4PETAvEHgH6L0dDuzBmU5MVKWN6CXDJ0sw5xfJiJPlB8lhBBCNnLfFLrfw1/obT+CK3nIW5KMcQ8fDXZGcCXzeLeUo+BN4lh+lBBCCPkC3LkGftTbHobbbso6pYBKAKMTu9FvEOsaXqp+V/h5F7q3JbzoeXf7bo9uuTuitg1EA1JS7C6ENuf9MpAdDDxWxe+J3fS8DIYQQsjD+fj4aIeWUmrf39/b9/f3NqXUArht4toQXCtLn/ssM9omNQ9Jy2ho1XyBOtFoNBqNdmHfQk5UnGK3t6ijwGiAi9S3JoQQ8r25exf6VyDWNRASkgDRN7AM3oQQQr4532IETgghhPxuUA+cEEIIeUEYwL8DRqfvnr/t1J8W+Cqqaa8vP0sIIZ/J5gB+SzZTRuIgCnMhWHJlWb/aF6IkJjfobPPbLgsqMC6c6h8GdRPjoCFdC6sstYvM+A2JDcpiLN86mx8AwMN+KdW015efJYSQT+XeY2TiQhucnJ+Ja1XN6ViZuNCm2WNm0roQWifL2+WNpja4Pl1xrabn+s3WL+Pzw/qKcX1+pnXqWnPMW0zrQpo5pjZsF9NqSq0aGfhd1MHoRBvn5be2fl/NXr38NBqNttkeHsCvzLSatDVT7yYDT14aeT/cW/22fv5GXdekPWyXqXP2Rsd+me04ld/lM3HaBjWtrOjknE1ap6FNKbUphVYH6RpNo/P5Rs/5ijv6THUwtA39uxT03HExevI527ntZ/1u2WVbX7Tr7TTn637skOnI37XS5zf0G6ZpdFC30f+H0IbQl6H3DZf5zZaFRqN9F3v+GviMZjggcM7cVAI7f/QNcpFGPGTIfG71y6HXIB/rnXf5velg+l3N9FWzYuCMTKid5bXL6jrM5jcm1jXquOum3oPCZS9V3JZu9bZEI9r9bRRO/Om436z8rDhoBfiyl3q1e8D1eu235Gdv+W1lIc3NsrVz8roAvO0/WxQovTkvx0hEXZZoYGCiRWE9xOxWlIUQ8h343z///IOhPRYD1ZlgdJIBXZGcOIQUsHrJc6vfFgY/yEXRXeN6XnvuNmp1ewMc4MvrNd/LdokHRKnOgVQMXPZl7hn5XRHha9v9+Ns9sFOklLHOvCjder7yNjiBt7kCMwIcOyvRo36634Y075KtzZPXHb2LERERh9g/H3ZSM8tCCHl9/vzx48fowc+fPx+UtMAFhTQlyomgYVwFNCVW7VmKNcqiPib/fL/cNEfPG9T+LFVa1x7V7qiV1m3UqoEuEGtAwPjWuOt28bBlA9WApACiR+N9Zj2W83ssC9KtcQ8fK1TRIqsIsYa1gHOKoAJBRFOWy75b/e5Kc6Ns7Q0pXHEKrQYzOLHJLOxSWQgh34EnTaELXAgwfiZYnEYJmT8o8YB4oXombxkyn1v9thIP+T+RsRsljabC59ol1rDHqdvSYo8NdZjKbxKBOZ4i0B2wtyiKzKDf74QvhjYY8otTVLFBIy5f3MbXsGWJsp8urzRvKnyr3+Y0F+q+mqsp+xVpPboshJAvyRMCeDfyng3eAGRnIH4/PfqeWls+qZ71oxFxcBXGMp8P9cup5kx+0QzWjbv17BgjYBzUDdfDB++OT2baxTiH8wy6Qqu43PnJyG+6Wg5O9l2HobSD2YQFlqRbxUGrCGtr1NZD9Kw0d6MwV3WY6iRdyc9m+l3X4YAoBrvuP8tYmvZWmnfL1s5zwERZbvHEshBCvhbb70I3Oji/HZCqbtONhUMlAlTdsw4Pe9xgBINulnjdiMDbEm+qCN08MrzNm4bd6jdbv4Vie1tjF/rpbgDR236z1h77NwdN2geBOHgH3GoXvwdUE1TQTaGXdnnpwS/lN02sLcqltOey7Ns6pT5Hb2Et0J3FrxBt0ZU71rBNQAgOZXmAG8jGQhMSjm1do4ae6xA97MUXEOsaPihCqnD6fxaX/WZqgLpxCCGhQkTTDJYqFtKcr/tGYo3aB2hIwGVZlmrx6LIQQr4kvAv9OzDobOR0MnonaB84Y0P1NkIIeTUYwAkhhJAXhHehE0IIIS8IAzghhBDygjCAE0IIIS/I/QFcHEKYOmP7+vKQRnkFJSGEkK/J3QHcdAerJ87Yvr48pK89ZPUd2ltlTwkhhJB87gzgBrs1N6q9GnEPj+PFHnmMhSQ8oPo5d7ATQgj5rbgvgM8ojYk7q3GN1bq66fbhCPUU3Ix26l2VQKrj++FtXRcj22FU7G9FSylAVZFGU/o3/PorX/V4dWgv+nH+RMQhCkx2BD92aPz5hq4GK/wJIYSQPO4K4PI2fUXlrDwkMC+feEseErckEo+3fJUoCov9xQWdm2Uej3WJK+RHnylfSgghhAy4ew18vTBInnziiFsSiSf5zU7tyw/1Se+SecS5jGv5TPlSQgghvyXb70Lv6UaXK4LcDfnE28xJJC6luVHmsWeTjvIz5EsJIYSQAXcF8HiIgHmDwD9faTg2KMuJkbK8Ab1k6GQZ5vwyEVkh3RkPiL0y1tHjqfKlhBBCflvum0L3e/gLve1HcCUPeUsiMe7ho8HOCK5kF++WVhS8SRzLj94kQ76UEEIIeQB3roEfA9Yw3HZT1ikFVAIYndiNfoNY1/BS9bvCz7vQvS3hRc+723d7dMvdEbVtIBqQkmJ3IbQ575eB7GDgsSb+dvn1u+KDAXLlSwkhhJA1fHx8tENLKbXv7+/t+/t7m1JqAdw2cW0IrpWlz32WGW2TmoekZTS0ar5AnWg0Go1Gu7A/vPctBvz9998vJycqTrHbW9RRYDTARepbE0II+d78+ePHj9GDnz9//qKibCfWNRASkgDRN7AM3oQQQr45f3x8fIxG4D9//ny5ETghhBDyu3H3OXBCAHQrMnP88WmlIISQ3wbqgX8HjE7fPX/bqT8tkL6M+hshhJB8NgfwoWDJZQCQkTiI4qSoOQg0I8uKOltlOrf53arfUn7GhVP9w6BuYhw0pGthlaV2kRm/IbFBWYzlW2fzAwB42P7ueUIIIS/IvcfIxIU2ODk/E9eqmtOxMnGhTbPHzKR1IbROlrfLG01tcH264lpNz/WbrV/G54f1FeP6/Ezr1LXmmLeY1oU0c0xt2C6m1ZRaNTLwu6iD0Yk2zstvbf1m7da/L3Dcgkaj0b6dPTyAX5lpNWlrpt5NBp68NPICz1a/rZ+/Udc1aQ/bZeqcvdGxX2Y7TuV3+UyctkFNKys6OQAYwGk0Gu2T7flr4DOa4YDAOXNTCez80Y0ync+U9+xvWxvrnXf5velg+l3N9FWzYuCMTKid5bXL6jrM5jcm1jXquOum3oPCZS9VEEII+UyeHMANVGeC0UkGdEVyW2U6P1Pec6B3XhTdNa7ntWeBO65JBwf4crRm3X3kol3iAVGqcyCV7q71zMIs53dFhK9tp59u98BOkVLgRjdCCPliPDGAC1xQSDMdNIyrgKbGmvjdyXSW6+8W3+q3mGZxXbfYoPZnqdK69oPRckRdFl1wL2tEcx0Yr9vFw5YNcNxUpzvA57bacn6EEEJekycFcIELAcbPXGkqDs541LkRNR4QL1TPsmQ6t/ptJR7yZUujvwjumG+XWMOeArHFHhvqMJXfJAJzPEWgO2BvURS8mpYQQr4aTwjg3ch7NngDkJ2B+P306HtqbTlHpvOhfjnVnMkvmsG6cbeeHWMEjIO64Xr44N3xyUy7GOdwnkFXaBWXOz8Z+U1Xy8HJvuswlHYwm0AIIeQrsf0mNqOD89sBqQK8LWDhUIkAVfesw8MWtg9MBq4CmnLV5Dm8LfGmipAUQITPlOnc6jdbv4Vie1tjFwKSdn9Hb/u72ffYvzlo0j6oxsE74Fa7+D2gmqACIHo0pV1eevBL+U0Ta4tyKW1CCCG/HN6F/h0YdDZyOhm9E7TXW4/NA6bI2xvveJUqIYQ8HAZw8hgYwAkh5FPhXeiEEELIC0I1MvIYOMomhJBPhSNwQggh5AVhACeEEEJeEAZwQggh5AVhACeEEEJeEAZwQggh5AVhACeEEEJeEAZwQggh5AVhACeEEEJeEAZwQggh5AVhACeEEEJeEAZwQggh5AVhACeEEEJeEAZwQggh5AVhACeEEEJeEAZwQggh5AX5499//21/dSEIIYQQsg6OwAkhhJAX5P+MBUZDhAyglAAAAABJRU5ErkJggg==" alt="image-20211205111317758"></p> <h4 id="移动数据-move-属性-几号数据库"><a href="#移动数据-move-属性-几号数据库" class="header-anchor">#</a> 移动数据    move +属性 + 几号数据库</h4> <p><img src="/docs/assets/img/image-20211205111507914.c4718c96.png" alt="image-20211205111507914"></p> <h4 id="设置key的过期时间-expire-属性-时间"><a href="#设置key的过期时间-expire-属性-时间" class="header-anchor">#</a> 设置key的过期时间   expire + 属性 + 时间</h4> <p><img src="/docs/assets/img/image-20211205111619940.46feec46.png" alt="image-20211205111619940"></p> <h4 id="查看key的剩余时间-ttl-属性"><a href="#查看key的剩余时间-ttl-属性" class="header-anchor">#</a> 查看key的剩余时间   ：  ttl + 属性</h4> <p><img src="/docs/assets/img/image-20211205111727732.03e40324.png" alt="image-20211205111727732"></p> <h4 id="查看当前key的类型-type-key"><a href="#查看当前key的类型-type-key" class="header-anchor">#</a> 查看当前key的类型   type + key</h4> <p><img src="data:image/png;base64,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" alt="image-20211205112614753"></p> <h4 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> flushall   <span class="token comment">#删除全部数据</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> dbsize  <span class="token comment">#查看当前数据库中存在多少数据</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token keyword">select</span> <span class="token number">3</span>   <span class="token comment">#选择三号数据库</span>
OK
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> dbsize
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> 
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> name shensifan   <span class="token comment">#设置 name 数据</span>
OK
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> get name   <span class="token comment">#获取数据</span>
<span class="token string">&quot;shensifan&quot;</span> 
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> exists name    <span class="token comment">#是否存在当前数据</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> exists username
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> keys *   <span class="token comment">#查看当前数据库的所有数据</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;name&quot;</span> 
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> age <span class="token number">18</span>
OK
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> keys *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;name&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;age&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> move name <span class="token number">1</span>  <span class="token comment">#将 name 属性移动到一号数据库</span>
 <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> keys *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;age&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token number">1</span>
OK
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> keys *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;name&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> expire name <span class="token number">10</span>  <span class="token comment">#设置一号过期时间</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> keys *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;name&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> ttl name   <span class="token comment">#查看当前key的剩余时间</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">4</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> ttl
<span class="token punctuation">(</span>error<span class="token punctuation">)</span> ERR wrong number of arguments <span class="token keyword">for</span> <span class="token string">'ttl'</span> <span class="token builtin class-name">command</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> keys *
<span class="token punctuation">(</span>empty array<span class="token punctuation">)</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> name shensifan
OK
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> get name
<span class="token string">&quot;shensifan&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> expire <span class="token number">15</span>
<span class="token punctuation">(</span>error<span class="token punctuation">)</span> ERR wrong number of arguments <span class="token keyword">for</span> <span class="token string">'expire'</span> <span class="token builtin class-name">command</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> expire name <span class="token number">15</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> ttl name
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">11</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> ttl name
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">9</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> ttl name
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">7</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> ttl name
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">6</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> ttl name
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> ttl name
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> -2
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> get name
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> get name
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> 


<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> name shensifan
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> age <span class="token number">22</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> keys *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;name&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;age&quot;</span>  
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">type</span> name   <span class="token comment">#查看当前key的类型</span>
string
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">type</span> age
string
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> 


</code></pre></div><h2 id="string类型"><a href="#string类型" class="header-anchor">#</a> String类型</h2> <h5 id="append-key"><a href="#append-key" class="header-anchor">#</a> append key  “ ”</h5> <p>在字符串末尾拼接字符串</p> <h5 id="strlen-key"><a href="#strlen-key" class="header-anchor">#</a> strlen key</h5> <p>获取key的长度</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> key1 v1
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get key1
<span class="token string">&quot;v1&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> exists keys1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> exists key1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> append key1 <span class="token string">&quot;hello&quot;</span>  <span class="token comment">#在字符串末尾拼接字符串</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">7</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get key1
<span class="token string">&quot;v1hello&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> append key1 shensifan
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">16</span>



<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> append name <span class="token string">&quot;zhangsan&quot;</span>  <span class="token comment">#如果append后跟的字符串不存在数据库当中，那么会自动添加一个</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">8</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get name
<span class="token string">&quot;zhangsan&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> keys *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;name&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;key1&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> strlen key1   <span class="token comment">#获取字符串的长度</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">16</span>
</code></pre></div><h5 id="i-操作-incr-key"><a href="#i-操作-incr-key" class="header-anchor">#</a> i++操作: incr key</h5> <h5 id="i-操作-decr-key"><a href="#i-操作-decr-key" class="header-anchor">#</a> i--操作：decr key</h5> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> views <span class="token number">0</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get views
<span class="token string">&quot;0&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">type</span> views
string
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> incr views  <span class="token comment">#自增</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get views
<span class="token string">&quot;1&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> incr view
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> incr views
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get views
<span class="token string">&quot;2&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> 



<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get views
<span class="token string">&quot;2&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> decr views  <span class="token comment">#自减</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get views
<span class="token string">&quot;1&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> 


</code></pre></div><h5 id="步长-incrby-key-步长-decrby-key-步长"><a href="#步长-incrby-key-步长-decrby-key-步长" class="header-anchor">#</a> 步长：  incrby key + 步长    decrby key  + 步长</h5> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> incrby views <span class="token number">10</span>    <span class="token comment">#自增 自定义步长</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">11</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> incrby views <span class="token number">5</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">16</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> incrby views <span class="token number">3</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">19</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> decrby views <span class="token number">3</span>    <span class="token comment">#自减  自定义步长</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">16</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> decrby views <span class="token number">5</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">11</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> decrby views <span class="token number">10</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> 

</code></pre></div><h5 id="截取字符串-getrange-相当于java当中的substring"><a href="#截取字符串-getrange-相当于java当中的substring" class="header-anchor">#</a> 截取字符串 GetRange   相当于java当中的substring</h5> <p>getrange key start end</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> key1 <span class="token string">&quot;hello,shensifan&quot;</span>
OK
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> get key1
<span class="token string">&quot;hello,shensifan&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> getrange key1 <span class="token number">0</span> <span class="token number">10</span>   <span class="token comment">#截取字符串 从第0个到第10个    [0,10]</span>
<span class="token string">&quot;hello,shens&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>   
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> getrange key1 <span class="token number">0</span> -1   <span class="token comment">#截取全部的字符串</span>
<span class="token string">&quot;hello,shensifan&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> 

</code></pre></div><h5 id="替换字符串-setrange-相当于java当中的replace"><a href="#替换字符串-setrange-相当于java当中的replace" class="header-anchor">#</a> 替换字符串  setrange  相当于java当中的replace</h5> <p>setrange key offset value</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> key2 abcdefg
OK
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> get key2
<span class="token string">&quot;abcdefg&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> setrange key2 <span class="token number">1</span> xx   <span class="token comment">#将key2中第一个位置的字符串  替换成xx</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">7</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> get key2
<span class="token string">&quot;axxdefg&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> 

</code></pre></div><h5 id="setex-set-with-expire-设置过期时间"><a href="#setex-set-with-expire-设置过期时间" class="header-anchor">#</a> setex（set with expire）  设置过期时间</h5> <h5 id="setnx-set-if-not-exist-不存在再设置"><a href="#setnx-set-if-not-exist-不存在再设置" class="header-anchor">#</a> setnx(set if not exist)    不存在再设置</h5> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> setex key3 <span class="token number">10</span> <span class="token string">&quot;hello&quot;</span>   <span class="token comment">#设置key3的值为hello 30秒后过期</span>
OK
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> keys *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;key1&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;key2&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;key3&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> get key3
<span class="token string">&quot;hello&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> keys *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;key1&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;key2&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> setnx mykey <span class="token string">&quot;redis&quot;</span>  <span class="token comment">#如果mykey不存在 创建mykey</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> keys *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;key1&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;key2&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;mykey&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> get mykey
<span class="token string">&quot;redis&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> setnx mykey <span class="token string">&quot;mongodb&quot;</span>    <span class="token comment">#存在mykey  创建失败</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> keys *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;key1&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;key2&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;mykey&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> get mykey
<span class="token string">&quot;redis&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> 

</code></pre></div><h5 id="mset-批量设置"><a href="#mset-批量设置" class="header-anchor">#</a> mset 批量设置</h5> <h5 id="mget-批量获取"><a href="#mget-批量获取" class="header-anchor">#</a> mget 批量获取</h5> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> mset k1 v1 k2 v2 k3 v3    <span class="token comment">#同时设置多个值</span>
OK
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> keys *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;k2&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;k3&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;key1&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;k1&quot;</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;key2&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> mget k1 k2 k3   <span class="token comment">#同时获取多个值</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;v1&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;v2&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;v3&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> 
</code></pre></div><h5 id="msetnx-原子性-要么都成功-要么都失败"><a href="#msetnx-原子性-要么都成功-要么都失败" class="header-anchor">#</a> msetnx   原子性:要么都成功，要么都失败</h5> <p>在这里k1 v1设置会失败  k4 v4设置会成功，由于原子性，该操作会失败</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> msetnx k1 vv1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> get k1
<span class="token string">&quot;v1&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> msetnx k1 v1 k4 v4
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> keys *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;k2&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;k3&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;key1&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;k1&quot;</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;key2&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> 

</code></pre></div><h5 id="设置对象"><a href="#设置对象" class="header-anchor">#</a> 设置对象</h5> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> user:2 <span class="token punctuation">{</span>name:lisi,age:3<span class="token punctuation">}</span>  <span class="token comment">#直接设置一个json字符串</span>
OK
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> keys *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;k2&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;k3&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;user:2&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;user:1:age&quot;</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;key1&quot;</span>
<span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">&quot;k1&quot;</span>
<span class="token number">7</span><span class="token punctuation">)</span> <span class="token string">&quot;user:1:name&quot;</span>
<span class="token number">8</span><span class="token punctuation">)</span> <span class="token string">&quot;key2&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> get user:2
<span class="token string">&quot;{name:lisi,age:3}&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> 

</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> mset user:1:name zhangsan user:1:age <span class="token number">2</span>   <span class="token comment">#设置user1的name是zhangsan  user1的age是2</span>
OK
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> get user1
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> keys *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;k2&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;k3&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;user:1:age&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;key1&quot;</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;k1&quot;</span>
<span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">&quot;user:1:name&quot;</span>
<span class="token number">7</span><span class="token punctuation">)</span> <span class="token string">&quot;key2&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> mget user:1:name user:1:age  <span class="token comment">#获取user1的name和age</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;zhangsan&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;2&quot;</span>

</code></pre></div><h5 id="getset命令"><a href="#getset命令" class="header-anchor">#</a> getset命令</h5> <p>先get 再set</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> getset db redis  <span class="token comment">#先get 再set</span>
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span>  <span class="token comment">#先get的时候不存在db 所以为null</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> keys *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;k3&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;k1&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;user:1:age&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;user:1:name&quot;</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;k2&quot;</span>
<span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">&quot;db&quot;</span>  <span class="token comment">#后set  将db set进数据库</span>
<span class="token number">7</span><span class="token punctuation">)</span> <span class="token string">&quot;key1&quot;</span>
<span class="token number">8</span><span class="token punctuation">)</span> <span class="token string">&quot;user:2&quot;</span>
<span class="token number">9</span><span class="token punctuation">)</span> <span class="token string">&quot;key2&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> get db  <span class="token comment">#再获取db  得到redis</span>
<span class="token string">&quot;redis&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> getset <span class="token function">dd</span> hello
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> keys *
 <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;k3&quot;</span>
 <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;k1&quot;</span>
 <span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;user:1:age&quot;</span>
 <span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;dd&quot;</span>
 <span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;user:1:name&quot;</span>
 <span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">&quot;k2&quot;</span>
 <span class="token number">7</span><span class="token punctuation">)</span> <span class="token string">&quot;db&quot;</span>
 <span class="token number">8</span><span class="token punctuation">)</span> <span class="token string">&quot;key1&quot;</span>
 <span class="token number">9</span><span class="token punctuation">)</span> <span class="token string">&quot;user:2&quot;</span>
<span class="token number">10</span><span class="token punctuation">)</span> <span class="token string">&quot;key2&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> get <span class="token function">dd</span>
<span class="token string">&quot;hello&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> getset <span class="token function">dd</span> rediso
<span class="token string">&quot;hello&quot;</span>  <span class="token comment">#先get  获取之前的值</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> get <span class="token function">dd</span>
<span class="token string">&quot;rediso&quot;</span>  <span class="token comment">#set后再获取 就获取到修改过后的值</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> 

</code></pre></div><h2 id="list-2"><a href="#list-2" class="header-anchor">#</a> List</h2> <p>基本数据类型，列表</p> <h5 id="在redis里-我们可以把list完成-栈、队列"><a href="#在redis里-我们可以把list完成-栈、队列" class="header-anchor">#</a> 在redis里，我们可以把list完成 栈、队列</h5> <p><strong>所有的list命令都是l开头的</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lpush list one   <span class="token comment">#将一个值或者多个值放入列表的头部</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> keys *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;list&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lpush list two
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> keys *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;list&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lrange list <span class="token number">0</span> -1
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lrange list <span class="token number">0</span> <span class="token number">1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lpush list three
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lrange list <span class="token number">0</span> <span class="token number">1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> 

<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> rpush list right  <span class="token comment">#往右边插值</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">4</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lrange list <span class="token number">0</span> -1
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;right&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> 


</code></pre></div><h5 id="lpush-相当于是把list当做栈来使用-后进先出"><a href="#lpush-相当于是把list当做栈来使用-后进先出" class="header-anchor">#</a> lpush，相当于是把list当做栈来使用，后进先出</h5> <h5 id="rpush-相当于是把list当做队列来使用-先进先出"><a href="#rpush-相当于是把list当做队列来使用-先进先出" class="header-anchor">#</a> rpush，相当于是把list当做队列来使用，先进先出</h5> <h5 id="lrange-获取list当中的-值"><a href="#lrange-获取list当中的-值" class="header-anchor">#</a> lrange,获取list当中的 值</h5> <h5 id="lpop-移除队头的元素"><a href="#lpop-移除队头的元素" class="header-anchor">#</a> lpop,移除队头的元素</h5> <p><strong>rpop，移除队尾的元素</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lpush left <span class="token number">1</span>  <span class="token comment">#插到队头</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lpush left <span class="token number">2</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lpush left <span class="token number">3</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> rpush right <span class="token number">1</span>  <span class="token comment">#插到队尾</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> rpush right <span class="token number">2</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> rpush right <span class="token number">3</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lrange left <span class="token number">0</span> -1  
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;3&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;2&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;1&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lrange right <span class="token number">0</span> -1
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;1&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;2&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;3&quot;</span>

<span class="token comment">##############################################################</span>

<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lpop left <span class="token number">1</span>   <span class="token comment">#移除队头的前一个值</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;3&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lrange left <span class="token number">0</span> -1
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;2&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;1&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lpop left <span class="token number">2</span>   <span class="token comment">#移除队头的前二个值</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;2&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;1&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lrange left <span class="token number">0</span> -1
<span class="token punctuation">(</span>empty array<span class="token punctuation">)</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> rpop right <span class="token number">1</span>		<span class="token comment">#移除队尾的前一个值</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;3&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lrange right <span class="token number">0</span> -1    
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;1&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;2&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> rpop right <span class="token number">2</span>		<span class="token comment">#移除队尾的前两个值</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;2&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;1&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lrange right <span class="token number">0</span> -1
<span class="token punctuation">(</span>empty array<span class="token punctuation">)</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> 


</code></pre></div><h5 id="lindex-通过下标获取list当中的某个值"><a href="#lindex-通过下标获取list当中的某个值" class="header-anchor">#</a> lindex,通过下标获取list当中的某个值</h5> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lpush left <span class="token number">0</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lpush left <span class="token number">1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lrange left <span class="token number">0</span> -1
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;1&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;0&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lindex left <span class="token number">0</span>    <span class="token comment">#取出队头的第一个值</span>
<span class="token string">&quot;1&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lindex left <span class="token number">1</span>	<span class="token comment">#取出队头的第二个值</span>
<span class="token string">&quot;0&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> rpush right <span class="token number">0</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> rpush right <span class="token number">1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span> 
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lindex right <span class="token number">0</span>  <span class="token comment">#取出队尾的第一个值</span>
<span class="token string">&quot;0&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lindex right <span class="token number">1</span>  <span class="token comment">#取出队尾的第二个值</span>
<span class="token string">&quot;1&quot;</span>
</code></pre></div><h5 id="llen-获取列表的长度"><a href="#llen-获取列表的长度" class="header-anchor">#</a> llen，获取列表的长度</h5> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lpush list one
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lpush list tow
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lpush list thress
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> llen list
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
</code></pre></div><h5 id="lrem-移除list中的某个值"><a href="#lrem-移除list中的某个值" class="header-anchor">#</a> lrem,移除list中的某个值</h5> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lrange list <span class="token number">0</span> -1
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;thress&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;thress&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;tow&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lrem list <span class="token number">1</span> one  <span class="token comment">#移除list集合中指定个数的value，精确匹配</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lrange list <span class="token number">0</span> -1
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;thress&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;thress&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;tow&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lrem list <span class="token number">2</span> thress
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lrange list <span class="token number">0</span> -1
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;tow&quot;</span>
</code></pre></div><h5 id="ltrim-截取list中的一段"><a href="#ltrim-截取list中的一段" class="header-anchor">#</a> ltrim，截取list中的一段</h5> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> rpush mylist <span class="token string">&quot;hello&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> rpush mylist <span class="token string">&quot;hello1&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> rpush mylist <span class="token string">&quot;hello2&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> rpush mylist <span class="token string">&quot;hello3&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">4</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> ltrim mylist <span class="token number">1</span> <span class="token number">2</span>  <span class="token comment">#通过下标截取指定的长度！这个list已经被改变了，截断了只剩下截取的元素！</span>
OK
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lrange mylist <span class="token number">0</span> -1
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;hello1&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;hello2&quot;</span>
</code></pre></div><h5 id="rpoplpush-移除列表的最后一个元素-将一个新的元素放到列表的第一位"><a href="#rpoplpush-移除列表的最后一个元素-将一个新的元素放到列表的第一位" class="header-anchor">#</a> rpoplpush,移除列表的最后一个元素，将一个新的元素放到列表的第一位</h5> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> rpush mylist <span class="token string">&quot;hello&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> rpush mylist <span class="token string">&quot;hello1&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> rpush mylist <span class="token string">&quot;hello2&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lrange mylist <span class="token number">0</span> -1
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;hello&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;hello1&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;hello2&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> rpoplpush mylist otherlist  <span class="token comment">#将mylist的最后一个元素移动otherlist的队头</span>
<span class="token string">&quot;hello2&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lrange mylist <span class="token number">0</span> -1
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;hello&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;hello1&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> keys *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;mylist&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;otherlist&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lrange otherlist <span class="token number">0</span> -1  <span class="token comment">#查看目标列表中确实存在该值</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;hello2&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> 
</code></pre></div><h5 id="exists-是否存在某个元素"><a href="#exists-是否存在某个元素" class="header-anchor">#</a> exists,是否存在某个元素</h5> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> exists list
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lset list <span class="token number">0</span> item
<span class="token punctuation">(</span>error<span class="token punctuation">)</span> ERR no such key
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lpush list item
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> exists list
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> 
</code></pre></div><h5 id="lset-将列表中指定下标的值替换为另外一个目标值-相当是更新操作"><a href="#lset-将列表中指定下标的值替换为另外一个目标值-相当是更新操作" class="header-anchor">#</a> lset,将列表中指定下标的值替换为另外一个目标值，相当是更新操作</h5> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> exists list  <span class="token comment">#是否存在该列表</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lset list <span class="token number">0</span> item  <span class="token comment">#如果不存在，执行lset则会报错</span>
<span class="token punctuation">(</span>error<span class="token punctuation">)</span> ERR no such key
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lpush list item  
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> exists list
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lset list <span class="token number">0</span> items  <span class="token comment">#修改成功</span>
OK
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lrange list <span class="token number">0</span> <span class="token number">0</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;items&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> 

</code></pre></div><h5 id="linsert-将指定值插入到列表中某个元素的前面或后面"><a href="#linsert-将指定值插入到列表中某个元素的前面或后面" class="header-anchor">#</a> linsert,将指定值插入到列表中某个元素的前面或后面</h5> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> rpush mylist <span class="token string">&quot;hello&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> rpush mylist <span class="token string">&quot;world&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> linsert mylist before <span class="token string">&quot;world&quot;</span> <span class="token string">&quot;xxx&quot;</span>   <span class="token comment">#在world前面插入xxx</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lrange mylist <span class="token number">0</span> -1
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;hello&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;xxx&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;world&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> linsert mylist after <span class="token string">&quot;world&quot;</span> <span class="token string">&quot;ooo&quot;</span>  <span class="token comment">#在world后面插入ooo</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">4</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> lrange mylist <span class="token number">0</span> -1
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;hello&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;xxx&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;world&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;ooo&quot;</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> 

</code></pre></div><blockquote><p>小结</p></blockquote> <ul><li>它实际上是一个链表，left，right都可以插入值</li> <li>如果key不存在，创建新的链表</li> <li>如果key存在，新增内容</li> <li>如果移出了所有值，空链表</li> <li>在两边插入或者改动值效率最高！</li></ul> <h2 id="set-集合-无序不重复集合"><a href="#set-集合-无序不重复集合" class="header-anchor">#</a> set(集合)  无序不重复集合</h2> <p>set中的值是不能重复的！</p> <p>set的命令都是s开头的</p> <h5 id="sadd-存值"><a href="#sadd-存值" class="header-anchor">#</a> sadd  存值</h5> <h5 id="smembers-取值"><a href="#smembers-取值" class="header-anchor">#</a> smembers 取值</h5> <h5 id="sismember-查看某个值是否在集合中"><a href="#sismember-查看某个值是否在集合中" class="header-anchor">#</a> sismember 查看某个值是否在集合中</h5> <h5 id="scard-获取set集合中元素的个数"><a href="#scard-获取set集合中元素的个数" class="header-anchor">#</a> scard  获取set集合中元素的个数</h5> <h5 id="srem-移除某个元素"><a href="#srem-移除某个元素" class="header-anchor">#</a> srem  移除某个元素</h5> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd myset <span class="token string">&quot;hello&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> keys *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;myset&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd myset <span class="token string">&quot;shensifan&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> smembers myset  <span class="token comment">#查看指定set的所有值</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;hello&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;shensifan&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd myset <span class="token string">&quot;shensifan&quot;</span>  <span class="token comment">#如果set中已经存在该值  则会添加失败</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sismember myset hello  
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>  <span class="token comment">#如果存在 返回1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sismember myset world
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>  <span class="token comment">#如果不存在 返回0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> scard myset   <span class="token comment">#获取set集合中元素的个数</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> smembers myset
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;hahaha&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;hello&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;shensifan&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> srem myset hello   <span class="token comment">#移除set集合中的指定元素</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> smembers myset
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;hahaha&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;shensifan&quot;</span>

</code></pre></div><h5 id="srandmember-随机抽出元素"><a href="#srandmember-随机抽出元素" class="header-anchor">#</a> srandmember：随机抽出元素</h5> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> srandmember myset
<span class="token string">&quot;shensifan&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> srandmember myset
<span class="token string">&quot;hahaha&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> srandmember myset
<span class="token string">&quot;shensifan&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> 

<span class="token comment"># srandmember set count    随机获取集合中的count个元素</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> srandmember myset <span class="token number">2</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;hahaha&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;love&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> srandmember myset <span class="token number">2</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;shensifan&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;love&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> srandmember myset <span class="token number">2</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;hahaha&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;love&quot;</span>

</code></pre></div><h5 id="随机删除key"><a href="#随机删除key" class="header-anchor">#</a> 随机删除key</h5> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> spop myset  <span class="token comment">#随机删除myset当中的某个元素</span>
<span class="token string">&quot;love&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> smembers myset
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;hahaha&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;shensifan&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> spop myset
<span class="token string">&quot;hahaha&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> smembers myset
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;shensifan&quot;</span>
</code></pre></div><h5 id="将一个指定的值移动到另外一个set集合中"><a href="#将一个指定的值移动到另外一个set集合中" class="header-anchor">#</a> 将一个指定的值移动到另外一个set集合中</h5> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd myset <span class="token string">&quot;hello&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd myset <span class="token string">&quot;world&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd myset <span class="token string">&quot;shensifan&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd myset2 <span class="token string">&quot;set2&quot;</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> keys *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;myset2&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;myset&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> smove myset myset2 shensifan
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> smembers myset
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;hello&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;world&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> smembers myset2
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;shensifan&quot;</span>

</code></pre></div><h5 id="数字积累类"><a href="#数字积累类" class="header-anchor">#</a> 数字积累类</h5> <div class="language-bash extra-class"><pre class="language-bash"><code>-差集
-交集
-并集

<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd key1 a
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd key1 b
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd key1 c
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd key2 c
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd key2 d
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd key2 e
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token function">sdiff</span> key1 key2  <span class="token comment">#取差集</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;a&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;b&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sinter key1 key2 <span class="token comment">#取交集</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;c&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sunion key1 key2 <span class="token comment">#取并集</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;b&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;c&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;a&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;e&quot;</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;d&quot;</span>

</code></pre></div><p>微博：A用户将所有关注的人放在一个set集合中！将它的粉丝也放在一个集合中！</p> <p>共同关注：并集</p> <h2 id="hash-哈希"><a href="#hash-哈希" class="header-anchor">#</a> Hash（哈希）</h2> <p>Map集合，key-map！  这时这个值是map集合!hash本质和string类型没有太大区别，还是一个简单的key-value！</p> <p>set myhash field kuangshen value</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hset myhash name shensifan  <span class="token comment">#set一个属性</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span> 
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> keys *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;myhash&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hget myhash name    <span class="token comment">#获取一个字段值</span>
<span class="token string">&quot;shensifan&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hmset myhash age <span class="token number">22</span> school zwu   <span class="token comment">#设置多个属性</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hmget myhash name age school   <span class="token comment">#获取多个字段值</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;shensifan&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;22&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;zwu&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hgetall myhash  <span class="token comment">#获取全部的值   key 和 value全都被删除</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;name&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;shensifan&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;age&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;22&quot;</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;school&quot;</span>
<span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">&quot;zwu&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hdel myhash school   <span class="token comment">#删除hash指定的key字段！对应的value也消失了</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hgetall myhash
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;name&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;shensifan&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;age&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;22&quot;</span>

<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hlen myhash  <span class="token comment">#获取哈希表的字段数量</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>

<span class="token comment">##################</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hexists myhash name   <span class="token comment">#获取指定的值是否存在</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hexists myhash school
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hgetall myhash
 <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;name&quot;</span>
 <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;shensifan&quot;</span>
 <span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;age&quot;</span>
 <span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;22&quot;</span>
 <span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;f1&quot;</span>
 <span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">&quot;v1&quot;</span>
 <span class="token number">7</span><span class="token punctuation">)</span> <span class="token string">&quot;f2&quot;</span>
 <span class="token number">8</span><span class="token punctuation">)</span> <span class="token string">&quot;v2&quot;</span>
 <span class="token number">9</span><span class="token punctuation">)</span> <span class="token string">&quot;f3&quot;</span>
<span class="token number">10</span><span class="token punctuation">)</span> <span class="token string">&quot;v3&quot;</span>

<span class="token comment">########</span>
<span class="token comment">#只获得所有的key</span>
<span class="token comment">#只获得所有的value</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hkeys myhash
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;name&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;age&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;f1&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;f2&quot;</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;f3&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hvals myhash
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;shensifan&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;22&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;v1&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;v2&quot;</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;v3&quot;</span>

<span class="token comment">#########</span>
<span class="token comment">#自增</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hset myhash age <span class="token number">5</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hincrby myhash age <span class="token number">3</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">8</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hget myhash age
<span class="token string">&quot;8&quot;</span>


<span class="token comment">##########</span>
hsetnx 如果不存在，创建

<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hsetnx myhash field <span class="token number">10</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>   <span class="token comment">#如果不存在 创建成功</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hsetnx myhash field <span class="token number">10</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>  <span class="token comment">#若存在  创建失败</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hgetall myhash
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;age&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;8&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;field&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;10&quot;</span>

</code></pre></div><p>hash变更的数据</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hset user:1 name shensifan
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hget user:1 name
<span class="token string">&quot;shensifan&quot;</span>
</code></pre></div><h2 id="zset-有序集合"><a href="#zset-有序集合" class="header-anchor">#</a> Zset(有序集合)</h2> <p>在set的基础上，增加了一个值，set k1 v1   zset k1 score v1</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zadd zset <span class="token number">1</span> one    <span class="token comment">#增加一个</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zadd zset <span class="token number">2</span> two <span class="token number">3</span> three  <span class="token comment">#增加多个</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrange zset <span class="token number">0</span> -1   <span class="token comment">#输出全部</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;two&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> flushdb
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zadd zset <span class="token number">2</span> one <span class="token number">1</span> thress <span class="token number">3</span> one
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrange zset <span class="token number">0</span> -1
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;thress&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrange zset <span class="token number">0</span> -1
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;thress&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> flushdb
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zadd zet <span class="token number">1</span> one <span class="token number">3</span> three <span class="token number">2</span> tow
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrange zset <span class="token number">0</span> -1
<span class="token punctuation">(</span>empty array<span class="token punctuation">)</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrange zet <span class="token number">0</span> -1
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;one&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;tow&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;three&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> flushdb
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zadd salary <span class="token number">2500</span> xiaohong <span class="token number">5000</span> zhangsan <span class="token number">500</span> shensifan
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrange salary <span class="token number">0</span> -1
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;shensifan&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;xiaohong&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;zhangsan&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrangebyscore salary -inf inf    <span class="token comment">#升序排列</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;shensifan&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;xiaohong&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;zhangsan&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrevrangebyscore salary inf -inf   <span class="token comment">#降序排列</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;zhangsan&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;xiaohong&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;shensifan&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrangebyscore salary -inf inf withscores    <span class="token comment">#升序排序并且附带成绩</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;shensifan&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;500&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;xiaohong&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;2500&quot;</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;zhangsan&quot;</span>
<span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">&quot;5000&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrevrangebyscore salary inf -inf withscores   <span class="token comment">#降序排序并且附带成绩   工资在-inf - inf之间</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;zhangsan&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;5000&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;xiaohong&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;2500&quot;</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;shensifan&quot;</span>
<span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">&quot;500&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrangebyscore salary -inf <span class="token number">2500</span> withscores  <span class="token comment">#显示工资小于2500的信息</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;shensifan&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;500&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;xiaohong&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;2500&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrevrangebyscore salary inf <span class="token number">2400</span> withscores  <span class="token comment">#显示工资在2400以上的信息</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;zhangsan&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;5000&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;xiaohong&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;2500&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrange salary <span class="token number">0</span> -1
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;shensifan&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;xiaohong&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;zhangsan&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrem salary zhangsan   <span class="token comment">#移除一个元素</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrange salary <span class="token number">0</span> -1
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;shensifan&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;xiaohong&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrem salary xiaohong shensifan  <span class="token comment">#移除多个元素</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrange salary <span class="token number">0</span> -1
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zadd salary <span class="token number">1</span> one <span class="token number">2</span> two
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zcard salary   <span class="token comment">#获取有序集合中的个数</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>

</code></pre></div><p>其余的api从官网上找</p> <h2 id="geospatial地理位置"><a href="#geospatial地理位置" class="header-anchor">#</a> geospatial地理位置</h2> <p><img src="/docs/assets/img/image-20211208203957886.02cd7722.png" alt="image-20211208203957886"></p> <blockquote><p>geoadd  添加</p> <p>geopos  显示经纬度</p> <p>geodist 两个城市之间的距离</p> <p>georadius  以给定的经纬度为中心， 返回键包含的位置元素当中， 与中心的距离不超过给定最大距离的所有位置元素。</p> <p>georadiusbymember  这个命令和 <a href="http://redis.cn/commands/georadius.html" target="_blank" rel="noopener noreferrer">GEORADIUS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 命令一样， 都可以找出位于指定范围内的元素， 但是 <code>GEORADIUSBYMEMBER</code> 的中心点是由给定的位置元素决定的， 而不是像 <a href="http://redis.cn/commands/georadius.html" target="_blank" rel="noopener noreferrer">GEORADIUS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 那样， 使用输入的经度和纬度来决定中心点</p> <p>指定成员的位置被用作查询的中心。</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">#geoadd 添加地理位置    将指定的地理空间位置（纬度、经度、名称）添加到指定的key中</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> geoadd city <span class="token number">116.40</span> <span class="token number">39.90</span> beijing  <span class="token comment">#增加一个地点及其经纬度</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> geoadd city <span class="token number">121.47</span> <span class="token number">31.23</span> shanghai
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> geoadd city <span class="token number">106.50</span> <span class="token number">29.53</span> chongqin <span class="token number">114.05</span> <span class="token number">22.52</span> shengzhen   <span class="token comment">#增加多个地点及其经纬度</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> geoadd city <span class="token number">120.16</span> <span class="token number">30.24</span> hangzhou <span class="token number">108.96</span> <span class="token number">34.26</span> xian
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> geodist city hangzhou shanghai  <span class="token comment">#杭州到上海距离，单位m  默认单位 m</span>
<span class="token string">&quot;166761.2770&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> geodist city hangzhou shanghai km  <span class="token comment">#杭州到上海距离，单位km</span>
<span class="token string">&quot;166.7613&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> geodist city beijing hangzhou km
<span class="token string">&quot;1127.3378&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> geopos city beijing   <span class="token comment">#获取一个城市的经纬度</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;116.39999896287918091&quot;</span>
   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;39.90000009167092543&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> geopos city shanghai
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;121.47000163793563843&quot;</span>
   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;31.22999903975783553&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> georadius city <span class="token number">110</span> <span class="token number">30</span> <span class="token number">500</span> km
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;chongqin&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;xian&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> georadius city <span class="token number">110</span> <span class="token number">30</span> <span class="token number">1000</span> km withcoord withdist  <span class="token comment">#获取某个中心点 1000km为半径的所有城市</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;chongqin&quot;</span>
   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;341.9374&quot;</span>
   <span class="token number">3</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;106.49999767541885376&quot;</span>
      <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;29.52999957900659211&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;xian&quot;</span>
   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;483.8340&quot;</span>
   <span class="token number">3</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;108.96000176668167114&quot;</span>
      <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;34.25999964418929977&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;shengzhen&quot;</span>
   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;924.6408&quot;</span>
   <span class="token number">3</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;114.04999762773513794&quot;</span>
      <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;22.5200000879503861&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;hangzhou&quot;</span>
   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;977.5143&quot;</span>
   <span class="token number">3</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;120.1600000262260437&quot;</span>
      <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;30.2400003229490224&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> georadius city <span class="token number">110</span> <span class="token number">30</span> <span class="token number">1000</span> km withcoord withdist count <span class="token number">1</span>   <span class="token comment">#获取某个中心点 1000km为半径的一个城市</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;chongqin&quot;</span>
   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;341.9374&quot;</span>
   <span class="token number">3</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;106.49999767541885376&quot;</span>
      <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;29.52999957900659211&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> georadius city <span class="token number">110</span> <span class="token number">30</span> <span class="token number">1000</span> km withcoord withdist count <span class="token number">2</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;chongqin&quot;</span>
   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;341.9374&quot;</span>
   <span class="token number">3</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;106.49999767541885376&quot;</span>
      <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;29.52999957900659211&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;xian&quot;</span>
   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;483.8340&quot;</span>
   <span class="token number">3</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;108.96000176668167114&quot;</span>
      <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;34.25999964418929977&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> georadius city <span class="token number">110</span> <span class="token number">30</span> <span class="token number">1000</span> km withcoord withdist count <span class="token number">3</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;chongqin&quot;</span>
   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;341.9374&quot;</span>
   <span class="token number">3</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;106.49999767541885376&quot;</span>
      <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;29.52999957900659211&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;xian&quot;</span>
   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;483.8340&quot;</span>
   <span class="token number">3</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;108.96000176668167114&quot;</span>
      <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;34.25999964418929977&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;shengzhen&quot;</span>
   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;924.6408&quot;</span>
   <span class="token number">3</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;114.04999762773513794&quot;</span>
      <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;22.5200000879503861&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> georadiusbymember city shanghai <span class="token number">200</span> km   <span class="token comment">#以上海为中心 在半径为200km的圆内的城市</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;hangzhou&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;shanghai&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> georadiusbymember city beijing <span class="token number">500</span> km
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;beijing&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> georadiusbymember city beijing <span class="token number">1000</span> km
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;beijing&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;xian&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> geohash city beijing  <span class="token comment">#将经纬度转化成11位字符</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;wx4fbxxfke0&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> geohash city shanghai hangzhou		<span class="token comment">#两个编码越相似，距离越近</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;wtw3sj5zbj0&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;wtmkn31bfb0&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrange city <span class="token number">0</span> -1  <span class="token comment">#可以用zset来操作geo</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;chongqin&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;xian&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;shengzhen&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;hangzhou&quot;</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;shanghai&quot;</span>
<span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">&quot;beijing&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrem city shanghai
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrange city <span class="token number">0</span> -1
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;chongqin&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;xian&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;shengzhen&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;hangzhou&quot;</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">&quot;beijing&quot;</span>

</code></pre></div><h2 id="hyperloglog-2"><a href="#hyperloglog-2" class="header-anchor">#</a> hyperloglog</h2> <blockquote><p>什么是基数？</p></blockquote> <p>A:{1,3,5,7,8,1}</p> <p>B:{1,3,5,7,8}</p> <p>基数（不重复的元素）  = 5</p> <p>Redis Hyperloglog  基数统计的算法！</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> pfadd mykey a b c d e f g h i j  
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> pfcount mykey  <span class="token comment">#查看数量</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">10</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> pfadd mykey2 a b d c h j k
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> pfmerge mykey3 mykey mykey2  <span class="token comment">#合并</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> pfcount mykey3  <span class="token comment">#查看结果</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">11</span>

</code></pre></div><h2 id="bitmaps-2"><a href="#bitmaps-2" class="header-anchor">#</a> bitmaps</h2> <blockquote><p>位存储  统计位图</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">#模拟打卡</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setbit sign <span class="token number">1</span> <span class="token number">0</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setbit sign <span class="token number">2</span> <span class="token number">0</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setbit sign <span class="token number">3</span> <span class="token number">1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setbit sign <span class="token number">4</span> <span class="token number">1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setbit sign <span class="token number">5</span> <span class="token number">0</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setbit sign <span class="token number">6</span> <span class="token number">1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setbit sign <span class="token number">7</span> <span class="token number">0</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> getbit sign <span class="token number">3</span>  <span class="token comment">#获取周三是否打卡  1为是  0为否</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> bitcount sign <span class="token number">0</span> -1  <span class="token comment">#获取sign中value为1的数量，这里为一周打卡次数</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>

</code></pre></div><h2 id="事务"><a href="#事务" class="header-anchor">#</a> 事务</h2> <p>原子性：要么都成功，要么都失败！</p> <p><strong>Redis事务没有隔离级别的概念！</strong></p> <p>所有的命令在事务中，并没有直接被执行！它们都会入队，只有在发起执行命令的时候才会执行！</p> <p><strong>Redis单条命令是原子性的，但事务不保证原子性</strong></p> <p>redis的事务：</p> <ul><li>开启事务（multi）</li> <li>命令入队（）</li> <li>执行事务（exec）</li></ul> <p>锁：Redis可以实现乐观锁</p> <blockquote><p>正常执行事务！</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> multi  <span class="token comment">#开启事务</span>
OK
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> k1 v1  <span class="token comment">#入队</span>
QUEUED
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> k2 v2
QUEUED
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> get k2  <span class="token comment">#入队</span>
QUEUED
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> k3 v3
QUEUED
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token builtin class-name">exec</span>  <span class="token comment">#执行事务</span>
<span class="token number">1</span><span class="token punctuation">)</span> OK
<span class="token number">2</span><span class="token punctuation">)</span> OK
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;v2&quot;</span>
<span class="token number">4</span><span class="token punctuation">)</span> OK
</code></pre></div><p><strong>每执行完一个事务，这个事务就已经不存在了，下次需要重新开启一个新的事务</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> multi  <span class="token comment">#开启事务</span>
OK
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> k1 v1
QUEUED
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> k2 v2
QUEUED
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> k3 v3
QUEUED
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token builtin class-name">exec</span>  <span class="token comment">#执行事务</span>
<span class="token number">1</span><span class="token punctuation">)</span> OK
<span class="token number">2</span><span class="token punctuation">)</span> OK
<span class="token number">3</span><span class="token punctuation">)</span> OK

</code></pre></div><blockquote><p>放弃事务</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> multi
OK
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> k1 v1
QUEUED
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> k2 v2
QUEUED
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> k4 v4
QUEUED
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> get k4
QUEUED
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> discard  <span class="token comment">#放弃事务</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get k4 <span class="token comment">#放弃以后获取不到k4</span>
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get k3
<span class="token string">&quot;v3&quot;</span>
</code></pre></div><blockquote><p>编译型异常（代码有问题！命令有错！），事务中所有的命令都不会被执行、</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> multi
OK
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> k1 v1
QUEUED
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> k2 v2
QUEUED
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> k3 v3
QUEUED
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> getset k3   <span class="token comment">#错误的命令</span>
<span class="token punctuation">(</span>error<span class="token punctuation">)</span> ERR wrong number of arguments <span class="token keyword">for</span> <span class="token string">'getset'</span> <span class="token builtin class-name">command</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> k4 v4
QUEUED
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token builtin class-name">exec</span>  <span class="token comment">#执行事务报错</span>
<span class="token punctuation">(</span>error<span class="token punctuation">)</span> EXECABORT Transaction discarded because of previous errors.
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get k4   <span class="token comment">#所有的命令都不会被执行</span>
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get k3
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span>

</code></pre></div><blockquote><p>运行时异常（1/0），事务队列中存在语法错误，那么执行命令的时候，其他命令是可以正常运行的</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> k1 <span class="token string">&quot;v1&quot;</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> multi
OK
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> incr k1
QUEUED
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> k2 v2
QUEUED
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> k3 v3
QUEUED
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> get k3
QUEUED
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token builtin class-name">exec</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> ERR value is not an integer or out of range   <span class="token comment">#虽然第一条命令报错了，但是依旧正常执行成功了</span>
<span class="token number">2</span><span class="token punctuation">)</span> OK
<span class="token number">3</span><span class="token punctuation">)</span> OK
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">&quot;v3&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> 
</code></pre></div><h2 id="锁"><a href="#锁" class="header-anchor">#</a> 锁</h2> <blockquote><p>监控！ Watch(面试常问)</p></blockquote> <p><strong>悲观锁</strong>：</p> <ul><li>很悲观，认为什么时候都会出问题，无论做什么都会加锁！</li></ul> <p><strong>乐观锁</strong>：</p> <ul><li>很乐观，认为什么时候都不会出现问题，所以不会上锁！更新数据的时候去判断一下，在此期间是否有人修改过这个数据</li> <li>获取version</li> <li>更新的时候比较version</li></ul> <blockquote><p>redis的监视测试</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> money <span class="token number">100</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> out <span class="token number">0</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token function">watch</span> money  <span class="token comment">#监视money对象</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> multi  <span class="token comment">#事务正常结束，数据期间没有发生变动，这个时候就正常执行成功！</span>
OK
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> decrby money <span class="token number">20</span>
QUEUED
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> incrby out <span class="token number">20</span>
QUEUED
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token builtin class-name">exec</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">80</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">20</span>
</code></pre></div><p>测试多线程修改值，监视失败，使用watch可以当做redis的乐观锁操作！</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">#### 线程一</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token function">watch</span> money  <span class="token comment">#监视</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> multi
OK
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> decrby money <span class="token number">10</span>
QUEUED
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> incrby out <span class="token number">10</span>
QUEUED
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token builtin class-name">exec</span>   <span class="token comment">#执行之前 线程二修改了money，这个时候就会导致事务执行失败</span>
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span>



<span class="token comment">#线程二</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get money
<span class="token string">&quot;80&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> money <span class="token number">1000</span>
OK

</code></pre></div><p>解决办法：解锁上一个，对改变后的值上一个新的锁</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> unwatch   <span class="token comment">#如果发现事务执行失败，就先对原来的锁进行解锁</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token function">watch</span> money   <span class="token comment">#获取最新的值，再次监视</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> multi
OK
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> decrby money <span class="token number">20</span>
QUEUED
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> incrby out <span class="token number">20</span>
QUEUED
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">(</span>TX<span class="token punctuation">)</span><span class="token operator">&gt;</span> <span class="token builtin class-name">exec</span>  <span class="token comment">#比对监视的值是否发生了变化，如果没有发生变化，那么执行成功</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">980</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">20</span>

</code></pre></div><h2 id="jeris"><a href="#jeris" class="header-anchor">#</a> JeRis</h2> <blockquote><p>什么是Jedis，是Redis是官方推荐的Java连接开发工具！使用Java操作Redis中间件</p></blockquote> <ul><li>连接</li> <li>测试</li> <li>断开连接</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>public class TestPing <span class="token punctuation">{</span>

    public static void main<span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Jedis jedis <span class="token operator">=</span> new Jedis<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System.out.println<span class="token punctuation">(</span>jedis.ping<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/docs/assets/img/image-20211209173624912.580b6a69.png" alt="image-20211209173624912"></p> <p>PONG说明ping通</p> <h4 id="常用的api"><a href="#常用的api" class="header-anchor">#</a> 常用的API</h4> <h5 id="list-3"><a href="#list-3" class="header-anchor">#</a> LIST</h5> <h5 id="set-2"><a href="#set-2" class="header-anchor">#</a> Set</h5> <h5 id="string-2"><a href="#string-2" class="header-anchor">#</a> String</h5> <h5 id="zset-2"><a href="#zset-2" class="header-anchor">#</a> Zset</h5> <h5 id="hash-2"><a href="#hash-2" class="header-anchor">#</a> Hash</h5> <blockquote><p>事务</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code>public class TestTX <span class="token punctuation">{</span>

    public static void main<span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        Jedis jedis <span class="token operator">=</span> new Jedis<span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span>, <span class="token number">6379</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        jedis.flushDB<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        JSONObject jsonObject <span class="token operator">=</span> new JSONObject<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        jsonObject.put<span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span>,<span class="token string">&quot;fannnnn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        jsonObject.put<span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span>,<span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Transaction multi <span class="token operator">=</span> jedis.multi<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        String s <span class="token operator">=</span> jsonObject.toJSONString<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        try <span class="token punctuation">{</span>
            multi.set<span class="token punctuation">(</span><span class="token string">&quot;user1&quot;</span>,s<span class="token punctuation">)</span><span class="token punctuation">;</span>
            multi.set<span class="token punctuation">(</span><span class="token string">&quot;user2&quot;</span>,s<span class="token punctuation">)</span><span class="token punctuation">;</span>
            multi.exec<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> catch <span class="token punctuation">(</span>Exception e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            multi.discard<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            e.printStackTrace<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>finally <span class="token punctuation">{</span>
            System.out.println<span class="token punctuation">(</span>jedis.get<span class="token punctuation">(</span><span class="token string">&quot;user1&quot;</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
            System.out.println<span class="token punctuation">(</span>jedis.get<span class="token punctuation">(</span><span class="token string">&quot;user2&quot;</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
            jedis.close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">#输出</span>
<span class="token punctuation">{</span><span class="token string">&quot;password&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;123456&quot;</span>,<span class="token string">&quot;username&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;fannnnn&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;password&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;123456&quot;</span>,<span class="token string">&quot;username&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;fannnnn&quot;</span><span class="token punctuation">}</span>
</code></pre></div><p>运行时异常</p> <div class="language-bash extra-class"><pre class="language-bash"><code>public class TestTX <span class="token punctuation">{</span>

    public static void main<span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Jedis jedis <span class="token operator">=</span> new Jedis<span class="token punctuation">(</span><span class="token string">&quot;127.0.0.1&quot;</span>, <span class="token number">6379</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        jedis.flushDB<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        JSONObject jsonObject <span class="token operator">=</span> new JSONObject<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        jsonObject.put<span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span>,<span class="token string">&quot;fannnnn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        jsonObject.put<span class="token punctuation">(</span><span class="token string">&quot;password&quot;</span>,<span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Transaction multi <span class="token operator">=</span> jedis.multi<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        String s <span class="token operator">=</span> jsonObject.toJSONString<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        try <span class="token punctuation">{</span>
            multi.set<span class="token punctuation">(</span><span class="token string">&quot;user1&quot;</span>,s<span class="token punctuation">)</span><span class="token punctuation">;</span>
            multi.set<span class="token punctuation">(</span><span class="token string">&quot;user2&quot;</span>,s<span class="token punctuation">)</span><span class="token punctuation">;</span>
            int i <span class="token operator">=</span> <span class="token number">1</span>/0<span class="token punctuation">;</span>  <span class="token comment">#代码抛出异常事务  执行失败！</span>
            multi.exec<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> catch <span class="token punctuation">(</span>Exception e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            multi.discard<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            e.printStackTrace<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>finally <span class="token punctuation">{</span>
            System.out.println<span class="token punctuation">(</span>jedis.get<span class="token punctuation">(</span><span class="token string">&quot;user1&quot;</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
            System.out.println<span class="token punctuation">(</span>jedis.get<span class="token punctuation">(</span><span class="token string">&quot;user2&quot;</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
            jedis.close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">#####输出</span>
<span class="token comment"># null</span>
<span class="token comment"># null</span>
</code></pre></div><h2 id="springboot整合"><a href="#springboot整合" class="header-anchor">#</a> Springboot整合</h2> <p>SpringBoot数据操作：spring-data  jpa  jdbc  mongodb  redis!</p> <p>在SpringBoot2.x之后，原来使用的jedis被替换为了lettuce</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.lettuce<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lettuce-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>6.1.5.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>compile<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>jedis: 底层采用的是直连的server，多个线程操作，是不安全的。如果想要避免不安全，使用jedis pool连接池！</p> <p>lettuce:底层采用netty，实例可以在多个线程中进行共享</p> <p>源码分析：</p> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token annotation punctuation">@Bean</span>
	<span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;redisTemplate&quot;</span><span class="token punctuation">)</span>
	<span class="token annotation punctuation">@ConditionalOnSingleCandidate</span><span class="token punctuation">(</span><span class="token class-name">RedisConnectionFactory</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">redisTemplate</span><span class="token punctuation">(</span><span class="token class-name">RedisConnectionFactory</span> redisConnectionFactory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> template <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		template<span class="token punctuation">.</span><span class="token function">setConnectionFactory</span><span class="token punctuation">(</span>redisConnectionFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> template<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token annotation punctuation">@Bean</span>
	<span class="token annotation punctuation">@ConditionalOnMissingBean</span>
	<span class="token annotation punctuation">@ConditionalOnSingleCandidate</span><span class="token punctuation">(</span><span class="token class-name">RedisConnectionFactory</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token class-name">StringRedisTemplate</span> <span class="token function">stringRedisTemplate</span><span class="token punctuation">(</span><span class="token class-name">RedisConnectionFactory</span> redisConnectionFactory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">StringRedisTemplate</span><span class="token punctuation">(</span>redisConnectionFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

</code></pre></div><p>测试</p> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">contextLoads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        redisTemplate<span class="token punctuation">.</span><span class="token function">opsForList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//操作列表</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//操作字符串</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">opsForSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        redisTemplate<span class="token punctuation">.</span><span class="token function">opsForHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">opsForZSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">opsForGeo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">opsForHyperLogLog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;沈思帆&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment">//除了基本的操作，我们常用的方法都可以直接通过redisTemplate操作</span>
        
    <span class="token punctuation">}</span>
</code></pre></div><p>所有的对象都需要序列化，否则会报错</p> <p><img src="/docs/assets/img/image-20211214114609564.701ecb28.png" alt="image-20211214114609564"></p> <p>序列化之后</p> <p><img src="/docs/assets/img/image-20211214114620965.5e618459.png" alt="image-20211214114620965"></p> <p>对象读入成功<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAW4AAAAnCAYAAAAvgqKfAAALjUlEQVR4nO3de1hUdRrA8e9wnWFAEPHCHVEjIS/5KN4S76VZQSimKbZlm6utrWtm21a22q5221rrKburtWKWdKU0WC01pQcURU0DAUVMBLkJM1waYPYP7ohzBgfF0ffzPPzBnDnn976/c+adc5nzO6qQkBAj7ebOpGUruMun1cv5Cby4+ltyATT+jJseydgQLzSGArKS4vj0218oMZozfw+mPPl3pni2bvcIHy39gJRapfiU5jcjfouWf/EcQx78D5NzX+TF7cpLV16+me1rBzPvyWiCC+N4de0P5Jto8aL41L6ERc1gQogX6qoC0hO/4LPt6ZQ1n8nU8pXmN2f5moFE/20eIYVxvPr6jx0av6pLf+6cFcHIft2w0/1GasKnbN33GwYTbbTHwLmv8NBQuxavnfziH6zdVULd+l2Oe9wyYn4B3MJY8lwkXsnvsTzmF6ALY/+yipDkZ3hrn67tBtS+3DZjOhNDvNEYCshI/JJPt6VRam6AZvS/y+iFrByfwyv/jONs6/lNfr5B5dafqdPvIrRfDzSGYk4diif26/3kd1QHXw1BUbww18i7z24lq7NjaUV1eYVbCCGuc0FRvLBwFPbVNRj1iax7LpbMzo6pnhRuIYRoi70L3btqUAHUVlBcUNZhR2SWslN+ixBC3IAMZZzPL1N+Xyew6ewAhBBCtI8UbiGEsDJSuIUQwspI4RZCCCsjhVsIIayMFG4hhLAyUriFEMLKXBeF27HXEO5+6HEigjs7EmFdHPG6dTwThvmiucot9xw/n0dnhhGgVV3llsX14DJvwKkbK8MzYSnr6wfGCAhfwSJtbP1YC1ePpm84ix8eSMHOb9h2zQwoYE/oIy9zf6svkoMblrDxUOdEdG2pGyvG/4cn+OBAZ96LZoeLeze62efjCFS0nqxyZ+j984kY7IWzvQp+T+Kd5TEc74CWCw/tJvX2e1jwRF+2vr6eA0VyA7Mwn3XfOekQRHj0cApjX2J9cgnXzqZfTWrMKjIcABzxHDGde4PPc+BUZ8clWtKTtmMraZea7DaIsGFGEt9YTWJxDRh/p6Puo6suPsFPW94kN3IpC2aPIvPNvZR00LLF9e/KFW7XECLmRjAswAONsYyzR7YT88k+zjbsYNn3IjQyiimDfHEyFJC+93O2xGegr58cGLmS+Zrd7HAZxe2BGnQnE/ls0zekNRv+TH3LaIb+vo9X97dRtDW9mXBfJGE390JjKCIz6Su2xB3jQsMb1QFMir6f8X20FCR+xHbuY67DFp7+LM2s+EwzUqUrosq+B6FRsxhVu4d313bkyGh1e6y9j2ymctDdDHCv4eyhr/nvlgMUNORnKn+PSSxf3Iu0E/0Y6XeYTd8aiZg9mMJt61i3K7euLy3KH+X1D9h4DCF6+SXiN9m+GfkrtN9i9L7MWJ55Yw+N4/AFhLNyyXhc6//1W/w0k6HlHrfJ7cuM+ACoJDN+JydXhjGs+14SzpvbueJGd8UKd7/Jsxle+yPvv3KQMgdfxsyYQfjIX1m3uwhQ4XP7g9zbI5WP3/qUYnVfps6ZT1T+KjYcajpgdQi+BdfYj1gb58LQGdHMCz/Fyo+P8Hv99J4+PpCzn9yLqrYtwRHzmeC4i83rYiiy9WPynAeYeW4V7yXrARW+k+cwrWc2m9/eSa6bHwMGQ1NVUorPn/BnFjPGrVWzR2N4YkNK05dIr+FMCfVBXXAbk0LPEbv3DFUd2Mf+wd7EbX2THY4DmT5vFpFZv/Jukt6M/AGnbpQnbmBX90VM6/Mx6+O68diEULx3fcWZDsjf9PpXit+87ePS8yu3f/zL1az6DpyHPcDSm1rlcSae11btwabraBYs9mPf6s0cqabZHrcZ/asQXyPdaXKKPfH2VsH5a+eYUVzbrlDhVuHs7ETF2Qyy8goxUkjsa81P7roRFOTBsYRtHDtjBPKIPzCWRTf5waGmA1e7rJ+IS8nGAMTtOEpYZCC9OMLp+umOagcqysvbOEVSw/FPVvAstRiNALnsOTqVhwN8IDkNcKVv3+5k/LiWpFM6IJ/ut0a1I76z7Hj7JRJbX9qtKm0Zy7mdvLXmAK4+o5g+az7Tzv2LzzOrL69L23A+ZSc/Z5UAuSSkjiPa3wuSTpiRP1CTx+nMkxiyy/E9k8aZrB4UTPPAqUPyV1r/SvGbt31cen7l9g26IoqA6vI21kd1BSVFFWBTQQ0GdMVFFLU4WjKjf03G11w5er0Kb7UjUHlxLEK04QoVbiPpKfuxfeBPPB2Qyamc02QcTiY5o4gaAJxwcrJlyB9eZlDDwOs2ttiktry2X6UvbxxG0XhyNzFxNi3OA6qMl74i73zTHcyOGEGghxY7Fahs7ahJbkjXCa3WyIXShoPjakou6MCWxumm4zOgK8jnEkPcNzHoKcjTU5D3OduCQ4kI9uLzzNNKc5lNp2vae6usqMBe69D4v+n8L0FF3RCWFuevtP6V4jdv+7j0/Oa1bwlz+tfU+mlNhfy6RJjvip0q0R/ezJo1SQT374N/QBBTFo4jePNqPtzfcHnHQOpnL/Nd81+CVJl4focum4MHWr5UC6hs2vhFo00Q0+aNxW7Xet5ILcZgBO+JjzK78bNhzsfEVHwKpwpU9qi1ttToKzEY6yItK9Xh7OKs2GqHUMzfHBbkjznr35L2lVnevgkd0r+NC8PGBmqNcppEmO8yC3cVVVWgdmz6EZWjo5rKyoZDPRW29vZUF2aQsieDlD3xHCx9lj/f3Bv2HwbKKS+3o3t1Mfn1V+wcXT1xV7Vv49XrdGh93LCHlgOcu3rhpc1m7+40fqusi6drrX2zPeoKKipVeGrU1B2eqtBqnZodqSrFp3CqwG4Q0c/fTs5Lq6l7kpYNLl2cKS8tb1d+l00xfyUW5q+4/i1tX4ml7SuwuH9bLAw3VwN6XUde/RDXu8u8AaeUrKwC+o6ZxmC/XngFTWLiYBuyshqeTOfEiIfX8NTcUfTx9MDDqz8DAl0oLi6un15Celo+/cfdzSDfnvTqHcrMx5YS0d+xXVGcy8xE33cAA1rfPVGax/nKAIZPCsa7pyd9hkYyIaj5h76YnOwy+o0ch5/GFrXnGMaE2DebrhRf3amC/PxWfxfqK78hnaPpXRl9z0SCvDzxvzWCqQPLOXwkp1WgXQgKm8KUEQGo25W5AsX8lViYv+L6t7R9JUrt2+Pc1R13d3fcnOzAzgk3d3fc3V1Rm1N8Le7fJjYBAwnRZpGRLXvcwnyXucdtJDt+I1+6ziB84eM4VReSuW8jXzRe8deTGBuD7+xp/HFZFA7VZeSdiGfzzpzG+XPi17PVZSbhC5fhbCwiI3EDm382/1AYoPbETnacXc49s0LJ3phEYcNDcmuO8c3H+5gTGc2SsGrOH0tg12E9vZ2a4k/7Xyypi+awdPUdVBfvZ8+xC3g3y8+y+Er5edOHuM+KIPqvU+seRvvFe8RltTrDqr6Z8fdOwfX7VLa3K3MFivkrsTR/pfXf2e335Z6nFhDaeMrZn2UrpgK5fLf6ReJNPZUYOqB/62n7ETFzNDU/vUOK4gUTIZpY/zMnNYFMfeRhxrnm8O3769h90eOoTVDZo3V1oqb0Aj6Rz/MAG3l2a8YVC/Wi5m+exZoF3nz//L/5oUj5/eL60WVAFAtnD8Pm8CbWbUltfDq6EOaw7jsnASqy2Pb6KlL6D6VHuzZ+O5xcXXC0ATz60d9fQ37S1b0DwjMwEIfM3eyXon3jqcom4Z3vSc0u7bBfuogbh/UXbgBjJXnHfiKvXTP5cefjj3GbCxgNOs4d/5pNP1+4QgG2RUtgb3eOJ6V02G3UwnqUpieR0tlBCKtl/adKhBDiBnNdDOsqhBA3EincQghhZaRwCyGElZHCLYQQVkYKtxBCWBkp3EIIYWWkcAshhJWRwi2EEFZGCrcQQlgZKdxCCGFlpHALIYSVkcIthBBWRgq3EEJYmf8D+EepnVXGDZoAAAAASUVORK5CYII=" alt="image-20211214114637063"></p> <p>配置自己的redisTemplate</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedisConfig</span> <span class="token punctuation">{</span>
    
    <span class="token comment">//编写我们自己的RedisConfig</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">redisTemplate</span><span class="token punctuation">(</span><span class="token class-name">RedisConnectionFactory</span> factory<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//我们为了自己开发方便 一般直接使用&lt;String, Object&gt;</span>
        <span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> template <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RedisTemplate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        template<span class="token punctuation">.</span><span class="token function">setConnectionFactory</span><span class="token punctuation">(</span>factory<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//Json序列化配置</span>
        <span class="token class-name">Jackson2JsonRedisSerializer</span> jackson2JsonRedisSerializer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Jackson2JsonRedisSerializer</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ObjectMapper</span> mapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mapper<span class="token punctuation">.</span><span class="token function">setVisibility</span><span class="token punctuation">(</span><span class="token class-name">PropertyAccessor</span><span class="token punctuation">.</span>ALL<span class="token punctuation">,</span> <span class="token class-name">JsonAutoDetect<span class="token punctuation">.</span>Visibility</span><span class="token punctuation">.</span>ANY<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mapper<span class="token punctuation">.</span><span class="token function">enableDefaultTyping</span><span class="token punctuation">(</span><span class="token class-name">ObjectMapper<span class="token punctuation">.</span>DefaultTyping</span><span class="token punctuation">.</span>NON_FINAL<span class="token punctuation">)</span><span class="token punctuation">;</span>
        jackson2JsonRedisSerializer<span class="token punctuation">.</span><span class="token function">setObjectMapper</span><span class="token punctuation">(</span>mapper<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//String的序列化</span>
        <span class="token class-name">StringRedisSerializer</span> stringRedisSerializer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringRedisSerializer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//key采用string的序列化方式</span>
        template<span class="token punctuation">.</span><span class="token function">setKeySerializer</span><span class="token punctuation">(</span>stringRedisSerializer<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//hash也采用string的序列化方式</span>
        template<span class="token punctuation">.</span><span class="token function">setHashKeySerializer</span><span class="token punctuation">(</span>stringRedisSerializer<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//value的序列化方式采用jackson</span>
        template<span class="token punctuation">.</span><span class="token function">setValueSerializer</span><span class="token punctuation">(</span>jackson2JsonRedisSerializer<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//hash的value序列化方式采用jackson</span>
        template<span class="token punctuation">.</span><span class="token function">setHashValueSerializer</span><span class="token punctuation">(</span>jackson2JsonRedisSerializer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        template<span class="token punctuation">.</span><span class="token function">afterPropertiesSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> template<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p><strong>实际开发过程中，我们会使用自己写的redis工具类</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RedisUtil</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">&quot;redisTemplate&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">RedisTemplate</span> redisTemplate<span class="token punctuation">;</span>


    <span class="token comment">/**
     * 指定缓存失效实践
     * */</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">expire</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span><span class="token keyword">long</span> second<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>second<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                redisTemplate<span class="token punctuation">.</span><span class="token function">expire</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>second<span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>


    <span class="token comment">/**
     * 获取缓存剩余实践
     * */</span>
    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">getExpire</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> redisTemplate<span class="token punctuation">.</span><span class="token function">getExpire</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>



    <span class="token comment">/**
     * 查看是否存在指定key
     * */</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasKey</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> redisTemplate<span class="token punctuation">.</span><span class="token function">hasKey</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">/**
     * 删除指定key
     * */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">del</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> key<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>key<span class="token operator">!=</span><span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> key<span class="token punctuation">.</span>length<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span>length<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                redisTemplate<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
<span class="token comment">//                redisTemplate.delete(CollectionUtils.arrayToList(key));</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> key<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    redisTemplate<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>key<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 获得指定key值
     * */</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> key<span class="token operator">==</span><span class="token keyword">null</span><span class="token operator">?</span><span class="token keyword">null</span><span class="token operator">:</span>redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


   <span class="token comment">/**
    * 普通缓存放入
    * */</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span><span class="token class-name">Object</span> value<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>


    <span class="token comment">/**
     * 普通缓存放入并设置时间
     * */</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span><span class="token class-name">Object</span> value<span class="token punctuation">,</span><span class="token keyword">long</span> time<span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>time<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>value<span class="token punctuation">,</span>time<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                <span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>



    <span class="token comment">/**
     * 递增
     * */</span>
    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">incr</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span><span class="token keyword">long</span> step<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>step<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;递增因子必须大于0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>step<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">/**
     * 递减
     * */</span>
    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">decr</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span><span class="token keyword">long</span> step<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>step<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;递减因子必须大于0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">decrement</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>step<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>



    <span class="token comment">/**
     *Hashget
     */</span>

    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">hget</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span><span class="token class-name">String</span> item<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * hset  往一张HASH表中放入数据
     * */</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hset</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span><span class="token class-name">String</span> item<span class="token punctuation">,</span><span class="token class-name">Object</span> value<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            redisTemplate<span class="token punctuation">.</span><span class="token function">opsForHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>item<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * hmget  获取hashkey对应的所有键值
     * */</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">hmget</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">/**
     * hmset 批量set key
     * */</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hmset</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span>map<span class="token punctuation">,</span><span class="token keyword">long</span> time<span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            redisTemplate<span class="token punctuation">.</span><span class="token function">opsForHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">putAll</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>time<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token function">expire</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>time<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 删除Hash表中的值
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">hdel</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> item<span class="token punctuation">)</span><span class="token punctuation">{</span>
        redisTemplate<span class="token punctuation">.</span><span class="token function">opsForHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 判断Hash表中是否存在该项的值
     * */</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hHasKey</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span><span class="token class-name">String</span> item<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hasKey</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 自增
     * */</span>
    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">hincr</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span><span class="token class-name">String</span> item<span class="token punctuation">,</span><span class="token keyword">double</span> by<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>item<span class="token punctuation">,</span>by<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">hdecr</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span><span class="token class-name">String</span> item<span class="token punctuation">,</span><span class="token keyword">double</span> by<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForHash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>item<span class="token punctuation">,</span><span class="token operator">-</span>by<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>



    <span class="token comment">/**
     * 根据value从一个set中查询,是否存在
     * @param key 键
     * @param value 值
     * @return true 存在 false不存在
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">sHasKey</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Object</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isMember</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 将数据放入set缓存
     * @param key 键
     * @param values 值 可以是多个
     * @return 成功个数
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">sSet</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> values<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> values<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 将set数据放入缓存
     * @param key 键
     * @param time 时间(秒)
     * @param values 值 可以是多个
     * @return 成功个数
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">sSetAndTime</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">long</span> time<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> values<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Long</span> count <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> values<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>time <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
                <span class="token function">expire</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> count<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 获取set缓存的长度
     * @param key 键
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">sGetSetSize</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 移除值为value的
     * @param key 键
     * @param values 值 可以是多个
     * @return 移除的个数
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">setRemove</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> values<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Long</span> count <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> values<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> count<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// ===============================list=================================</span>

    <span class="token comment">/**
     * 获取list缓存的内容
     * @param key 键
     * @param start 开始
     * @param end 结束 0 到 -1代表所有值
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">lGet</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">long</span> start<span class="token punctuation">,</span> <span class="token keyword">long</span> end<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> start<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 获取list缓存的长度
     * @param key 键
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">lGetListSize</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 通过索引 获取list中的值
     * @param key 键
     * @param index 索引 index&gt;=0时， 0 表头，1 第二个元素，依次类推；index&lt;0时，-1，表尾，-2倒数第二个元素，依次类推
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">lGetIndex</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">long</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 将list放入缓存
     * @param key 键
     * @param value 值
     * @param
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">lSet</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Object</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            redisTemplate<span class="token punctuation">.</span><span class="token function">opsForList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rightPush</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 将list放入缓存
     * @param key 键
     * @param value 值
     * @param time 时间(秒)
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">lSet</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">Object</span> value<span class="token punctuation">,</span> <span class="token keyword">long</span> time<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            redisTemplate<span class="token punctuation">.</span><span class="token function">opsForList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rightPush</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>time <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
                <span class="token function">expire</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 将list放入缓存
     * @param key 键
     * @param value 值
     * @param
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">lSet</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            redisTemplate<span class="token punctuation">.</span><span class="token function">opsForList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rightPushAll</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 将list放入缓存
     *
     * @param key 键
     * @param value 值
     * @param time 时间(秒)
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">lSet</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> value<span class="token punctuation">,</span> <span class="token keyword">long</span> time<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            redisTemplate<span class="token punctuation">.</span><span class="token function">opsForList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">rightPushAll</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>time <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
                <span class="token function">expire</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 根据索引修改list中的某条数据
     * @param key 键
     * @param index 索引
     * @param value 值
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">lUpdateIndex</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">long</span> index<span class="token punctuation">,</span> <span class="token class-name">Object</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            redisTemplate<span class="token punctuation">.</span><span class="token function">opsForList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> index<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 移除N个值为value
     * @param key 键
     * @param count 移除多少个
     * @param value 值
     * @return 移除的个数
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">long</span> <span class="token function">lRemove</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token keyword">long</span> count<span class="token punctuation">,</span> <span class="token class-name">Object</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Long</span> remove <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> count<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> remove<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="redis-conf详解"><a href="#redis-conf详解" class="header-anchor">#</a> Redis.conf详解</h3> <p>启动的时候就是通过配置文件来启动的</p> <h3 id="redisrdb持久化"><a href="#redisrdb持久化" class="header-anchor">#</a> RedisRDB持久化</h3> <p>Redis是内存数据库，如果不能将内存中的数据库状态保存到磁盘，那么一旦服务器进程退出，服务器中的数据库状态也会消失。所以Redis提供了持久化功能！</p> <h4 id="rbd-redis-database"><a href="#rbd-redis-database" class="header-anchor">#</a> RBD(Redis DataBase)</h4> <p><img src="/docs/assets/img/image-20211214192840374.134c374f.png" alt="image-20211214192840374"></p> <blockquote><p>触发机制：一旦触发 会自动生成rdb文件</p></blockquote> <p>1.save的规则满足的情况下，会自动触发rdb规则</p> <p>2.执行flushall命令，也会触发rdb规则</p> <p>3.退出redis，也会产生rdb文件！</p> <p>备份就会自动生成dump.rdb文件</p> <blockquote><p>如何恢复rdb文件</p></blockquote> <p>1.只需要将rdb文件放在redis启动目录下，redis启动的时候会自动检查dump.rdb文件，恢复其中的数据</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> config get <span class="token function">dir</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;dir&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;/usr/local/bin&quot;</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span>   <span class="token comment">#如果这个目录下存在dump.rdb文件，启动就会自动恢复其中的数据</span>
</code></pre></div><h3 id="aof持久化-append-only-file"><a href="#aof持久化-append-only-file" class="header-anchor">#</a> AOF持久化(Append Only File)</h3> <p>将我们所有命令都记录下来，history，恢复的时候把所有的命令都执行一遍</p> <p><img src="/docs/assets/img/image-20211214194233241.c0b31a2d.png" alt="image-20211214194233241"></p> <p>将appendonly no  改为 appendonly yes即可开启aof</p> <p>重启即可生效</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABo4AAAAZCAYAAAAPK9ywAAAZnElEQVR4nO2dv4/bSJbHvzpscIk5A2x2onEOBmVDVGosFPVpHCihAAdDOToMMInyZn6S/gB2zmQAhxY3mIWYdDDmOWrcORWFMbGBFy1eNsCujF50xgtISpREFn+IpNjt9wEe0OpSVb16VXxVLKoecX9/78WJ67re3d2dd3d357mu6wFIFln3XEv12FEa81TLjUnz/6/LzAOYJ+uuZ6ksQ5ovTLWO/gemeparezL3f2HZGdvBVM9yE3ThpXF1DWzihmIFZcS3favPXn1+ua4uR9ro57VUtmsHLy2tPiBok7z9rhz+naTLXj629zlq89j+4/VjpnHm5zks+7Du6OdkPVP6IapDkk6Juia1OW0sxYzdlH5ItLesR8bf/lhUWQZ949oW9Ns2P5M9Vc/YfhISEhISEhISEhISEhISEhISEhISksbIv6AGTE2DE/0HG0JmJhamA8CBuTDBGEtP48EYmLmACYCpOizXhaVmyLdFhq4zXI0PdAVPlwJ6woHWb6PdDqSvAboFXUZs2/cJ0wDnkwOw52AA4Dhw4OCTE/zfcXZt4KXx6mMqVNmEppnB9x2Y2785ugC+LeRh8FnGUDZx1JQSYaoO2dQQV4W5MCEP5eDTvi6Jeqb2QxpJY4lHkbEUzXfcD8lZxmi3+7hyTIzbbfSvHDhXfbTbfWjZFY6BAaHejgktV/sJgiAIgiAIgiAIgiAIgiCIJlDDgyMHTtzucfQBBrC/4c1LS4A9Z3AcB4AM9ZLB7LfR15zMG9eyroNdjY83zkvW8wjHxHgcebhxWCZPlzIoWh8vzVzAZDKGDGCqCjl4oFcNMlTZgZb0xMNcwJSHkAFAHu7rwtPzBFsnjiUeRcdSUT3ZEDIcOGAYyoC5OHFkORrGY3P70NZ1LeR6bksQBEEQBEEQBEEQBEEQBEE0glpOHMXC2P7GuPMpchKGk1YFsg6dXWEct9Nft56HZVYNr77CupjQrgB5KGMoswIndnIgDyEzGbrrwnVdWJcM7NKCa6mB7iYWpq+HPJQPdOHoWbTtvLHEo7YxH9jKugRjl7BcC5eM4dLKe0LvGMfUMO730Q9OMV3qar1jmSAIgiAIgiAIgiAIgiAIgjiZ8zw4chYwHX+zHvA39J3wWBIvLQJjw71NaeeTE4T3MqFdOZCDjfD0jWsZui4fh9OLpCfrkq7ncXEqdFXe6cWC+hdmbNsrhVefo0EzZahbXRnkqN6pRZvApY5LFh+m7rD/shXqwDl8wGKOd2H/omHX+rv+9MPVqbEh82L15NrlE5zglNJxH6WNJR4FxlIh/PB0Y9OBOW6jPTa3NuxnfdgV1w/sYFyDVf/AlyAIgiAIgiAIgiAIgiAIgiidM504cqCNrwDV8kNaIXpCg5cWfEPTYLLLICSW7ochMxcwZRUqAxxt7J96GI/Rb49hhqcsXAuXDJB1/3SKLsM/sYLd/7aih6HjruAM9XhdeGmyvn8CJqzPXGABdXtCxrVUYNzH2Ny1nekWXFfHsMIAb0EDuPWZ4z5Mpm7tPPyUIyyas4DpwO+Xw6S4/stUpgbNZIHtcuQzFzBlOT5kXqyePLv4p5QuLV+H504kLW0scduWNJY4Y7cwMoayg4Xph3jMfSIsrh8cDRqGu5NfsoOxVvX4JQiCIAiCIAiCIAiCIAiCIErn/v7eixPXdb27uzvv7u7Oc13XA5Assu65ruu5ruvpMud7FQtTLc91dU9mNdTHVM+yVI9VWYese64u12dDWffc0trEPNU673goTc+6+6E0kT09uC4tlTVAHxISEhISEhISEhISEhISEhISEhISkqZLOSeOIuHCxmc8ZOBoffTHgLo98ZHjVEpDYKoONRIGrbqQZRXDhpATwtQ1igQ9H0c/+GHpcoWhIwiCIAiCIAiCIAiCIAiCIL5qWvf39170H3ffdc+lC9FQ/rj+a67vy7oLXXZgbkPwNRO+ngyq5YeHc8wrjMdF3ltEEARBEARBEARBEARBEARBEA8LenBEpJL3wRFBEARBEARBEARBEARBEARBEA+TPyQl3P/PB3z77bcAgL///e9ot9u1KUU0g9/F786tAkEQBEEQBEEQBEEQBEEQBEEQNVLOO46aiKzDtVSwE4pgqhW8K8k9uawy2ellBe/hKR9hOtj+rXg9iFVUovSgeAoGUyFjBhE9T4GylJCYI3eZ+RCmAyieEsgDskup+cqD7PkAKcG31kJUT6bCqkxnCS9+9vD6vS+vfpQqqeV0eHoqePnew+ufp3hSiy4CpGWF13wSsb6Ad92Geiox+XhpRTmTXSom9PM9pZLSH4jNHsP80GxbVzvOHifZ1mCPYexmIPf8kI+6x+djry8XyhyK52Ew3V/39DwPynJa6bgWpksonleqXaooMxsSpKUHxfNi7HkmqG/zE7HZ+cZSBir2yTwe7NwYe4/OoFou9Afw4vc69jhzcUb/Ui3ltSH0Ib7Mm3V/cEYf8hh5vA+OSsDR+mi322g36kU9MtRLB+N2G+12H1pFL97ZTK+rKfiBs5lew2hdY2WfW5NqEecKFG8AqeJ7ArIn8eC5mODFM+DL2y5++b6FX982dDA/FD2bhCKhIwGb2TWMloHr6SZb2iOH/Fl9kK2JKvla1mAEQZSAMgnWPV0YrRaup+Q4iMfJ45obHWj9dqPfO+5Tzx7n14I496B4yxr28rowWt1Hcq0QPBJD1RENhT1v/i/9K2ONm5ZxbiUaSFG7kD3jIXsSXxsGPn7fwsfa6tvA7hpoxhqzSddtk+zyUHgoNmvSOCvKQ7E1US6PYewW5Wtu+2PHwE2rdW4liEqgvn28NMknN0mXR8CD2eN8DP7lMbShKHTdFuXkE0ey7saHcwtCA6m6f+TQ0jOm+V/YprmuBT08q3iQ7+gYI1NhhXmGB4oyFbrlpuqS/WikDP3wuxlDOCXajKdncMzUtS7BIEMv6xinJKK3DbczyH5UWZJi8+2HKjg+CihMexiEeSbZDwj6v7oN5OBoYdEy+e172HYJ6xvMd+VKSnq+8Einr6eATtCWk4+wkz2Rx57b9m3rOzhme2SXSFp4LHe5y6ssT/y5SZJvPQwBF/pApsKyLFiWC9fSd74+wZcfzwFcZaBaFnRVD3Ry90PSJc0BAIaF6ksiCO828TvzyY/LSAi4/bBwr997eHX4vckcr957eP1+iRcXkWKfKXi5zbvEy720aWwav0yenkB7EtHzMFTdRVieh1c/L0sJxccL/yDOI2nL3v6vpFJ8QdK1yfMFyfNK4FPmvnbCZBC5BnlpD8MufP+yH4LPLyPQJs2fpfh5QYn0RQlhUZpjs+QyfV0KzCuptq53Dqj7uuWXWXCcxdrMH++D5WBbV/gdf9xzrocTbZnUdt5Yiu9bX+cq2pC2ttmXyLioe42SUKaQokux+SFlfGbQNc+6Ln285L0eThzzPFtHdYr7fxHCUEHLOQZhOJwwvI40RW8bOm2JnrLrCGEafn+J3qSzV6T/S+yDsrZpkbA7y3n2vpWUA132kwUlos9e/yW3Ia3M7XcyhxzaDzWneB4G80ihR7qECUEdwXeFiW+jk0PVUd+W2Lfg2pNnszBvmKeUEIQPxScX3J/g6VIczv1t0t4owL33jb524zBUHdurR8+xp3igi7yvS/791or2OB+If+HmS9AzDA83mO903d0/+O32x7KETpA/HNtJbeCWmWKzSnggPiTfPVD6WljYu//Dcbi9utfXEU5+cGSO2344t3YbfVOGFfVK7BJsMfaPG+LywMklp8m6BdnR0G+30e5rgGztnN02Xxv9K+BS3SZA1S/hjPtot8dYIOod/TRo/RRdDsvkthwLk0EeRvQeyjA1DWknK5NtxtPTP2ba7l/BgVnSMU4RvWUPorTGTdeA0brBrZRl8hPRW3YgYoXrloEbQ4A4zxBKRZLQm4gQ7BWuW9e4XWWfZtcjX791iWUm8wjsEiDgFtfdFTYQ0Jns2pCYz7iB0TJwYwDABquuEflcFLJnUXuKnQ1ugu8Lk3Ay2rfL9QwQ58cTnCAB664Bo3WNmz9nqy8enm/lZXOg9fu4ggzZGaM9NsHkYWQRyZkfMugky+Fxdn+ecNL0PKm+OPxTOr/M/M7cDwFn47efWvjl+0BmBp5czPceAj2BgV9/muELJLz4MXxgo+Dlz3O0nxn4+FMLv3z/Bv/3LJo2QRsz/Pp9Cx8/SGhPlnjxLK1Mnp6AO2vhl+9HcI/ap+DlRMGTz359v/2tnIVHYvgHpYeeImxDvxlvboHtNZbuC2KvzRRfkHy9+79GMkZ+yn44Ol7aA7FLQLx/8U+VGK1ARmsISs9fwHL9Wbqfj+oiTk6/0W6OzfhlFppXUm1d5xxQs61Tyywyzvg2EyRgNVphI4nAzG+noDyFyLseTiR+nGVb98T1bRVtSFvb+HKYXv/4TC6To0vR+YE7PtMpuq5LHi/F/O6p4yW5/wKdsMZN10ZZQVz9+lowWt2gPgW95QQiZrhutQKbvQv6doreRIFgz3Dd6uJ2tT/41qMWjNYopm/n6CnSNhSb8cYAJlk27RX0lnOIkoGbbgtG6w1upelBPxi47s6wgQRxWyanDRnK3H4HBm660wy2tmF3W37bWi0YIwOCMg/6dl+XG0OCOA/DHPm/TjdG/jqy7FB11Ldl9C3Hnik2AwCxs8JNqxX4pXfp99q5dGmqTy66P5G+ritO3P0tb2+Uf+/rBHuKV4f7hUyFfgmY/aCe8QJQs/2ock+X9hiL5yzycKvIfmsVe5w7Gu1fuPl4PiRoW8T3dMJ8xghGcC0DNlaBzw/3nhLbwCszgy5V0WgfkuMeKPNa2LjFGoCoBD9QlQQAG6yNTfEyS6LUdxw5n5yDY4YmFqYDwIG5MMFY1B0lpDEVqmxC00z/AYxjQjMdsOfsIN9BfWwIme2XuSUmLV6XuDYkYy6iG6EyhrKJRc74oWlt2NezZJSnEAFsZjbWNgBssJ5mWOSH+f58iw2AtbEGIEBUUi6vjgDhKF+03P1fMGb6BXdamUV4DHYJWBtrwP5HaTduhSB7JpOiS2zbD+yysTeIs8tmZsOO2LswPN/Kw3HgwMEnJ/BzjnPwUP00X3f0kD5Vzxp9awLCs93M7v63AXw+uA4uFLQBfHk7g/sZAGy4b6f4Ek37YOBLmB8S2hcpZRYltr7qEX54ClESAHsNexS0JYMviL02q5gfzkSpdgnI41v9hSuHDH6+7vmoNpsVnasy1BdL3XNABqqwNbfMvOMsi81Wh3oI+Cbhpjj1eshAFj2TxtJh327LqLkN/umUHkRssOoGN+NnHJ9HduHpcuL8EDs+gcrWddzxUtTvnjBeksagOD8YDyWxmc2C+mysp1NsFCWwmRHYbAVAgqhIQKcT9K0R2Drf+kX4QYEoSYBtwB5FNu2DX3IrhyczQl1ms6AfAh0jZa4NA7AP1me8NmQoU5zPIcLGqnuwCZikZ1J7JelIF99mgS4VQ31bbt8e2TODzarq90b75KL7ExVzfH/L2Rsteo/uFwyE98KOCW2c/uP3I13gwAz/rmi/9VQa7V94+Xh6BsT6nhPJ7c8qptE+hJev4Fp4gzVuDQCdbyBAwNMf/HJv7eJllsXJ7zhiqg79Ut5d+M7VLvFwo5A9B0Po9DhpwTHFPczQsR1uPkbIk8bTJSvmAqauYsg0LIYqZFPDOEO2wjYrmfAmwB90zc33UMpskl2aBNmzOHFtCNsnTAZQJjUpUtRH5ikzl69z4MR9segcUDoS2pN3eHmRb0H15Jl/JH7z+XiS56VVQd31wbCxMgR0lA56yw6ADdaja//Xj1+zL6jALiHx+QSI897+0fcMNMrWNdus7rafZQ5IogpbV+gL8tus2PVQlGrGUlVtECAtB+hIG6y618FNarPGJ0+XKsZnFspc1zV3vPgbGXaFPlGQ/DWKMFnG9G2wfrFzrl+MGVZGBx1lgt5yAsDGetRN7dui9ZXTBn/zzs5UtwRx/i42xFBhm1UA9W1Inr5N14VXX1393iSf3Kh165aE+9uie6OJ1WgYjwFV1WHpDAwOrvoZT/nUvd9aMk3yL7x8PD3rplm6NMeHZLlfKbIW3qw2gCLiqfQPCBKwmfkPis69vj7twVHkmKPmn6OEq0bT/aOLWyfhfNr9zUtzrtDvxzz1Zs9T9Dkok5cWra8wJrQrFfpQBmQGU8vwlP8Um5VM+JRSkATAyH6BVZbPuIGR8z1tRXU5rcwN/uE/aC9Flyrs0iTInhxSdIlrQ9i+9ejUEII54PnWssosw9fVPgckcDHBywsJX96O8OtbA7iYb98xxOPLZ/9CEJ5JwAc7c1oV1F0fsIE9uoYN+O9kmIt+WB3Drn2uahbl2yUkNp8iBcfub3A9Xfu/ssrwPpRm2bpem9Xd9rPMAcnaVGDr6nzBsc0ESD9wMha8HopSyVhKbUP8GiwNcT5ARwLWo91DI6BZ45Ori1LB+ARKX9cJU44mZxkvfNYjA7eKgt5EgjitIpSTT/iL5/WoFdO3wfpFkgAjz/rFhj3qBn07x2Cu+KHHjOAX4MYotm9DXfLWd2ob1qMWbhUPvckE4jRyMiVBTyiTICzSCNdTw/8VfPDeoqJtqALq2wJ9m0EXXn119XuTfHLR/YmzwNsbLXiP7pgaxqbmF6PqsHQVi7g6jupsyL12QZrkX7j5OHry1gVVwLUZAMCu7Vppkg/Jcr9SZC28MdbYTDoQlG/8E1TBg7Bzr69LCVX3CQDAIA8P330hYyizbZqz9wg9Ic3RoDn7MTGZrCP1tUPOAqazXyYvzYl/nJ9QtgOHsdjjlM7CBC51XLKYMHXBy+oOX0YHJNjsVD3zEsRQFCYSRAkABIjTuHiOIp4qMfl+eAoBYQxGP/ZiOLAFSQCkb/bLWm38p6V7+U6kijIfg12aBNmzMHFt38Y+jcaqV3r7LzAsE65v/QSHyfBf9RY3B/BI8XUc/5lbzyz1VYK/imr/R8bO+WDABfDkxwnaz+DnDd9VFKZdKHgCBGXacKt6qPO3Fb4c1VchwWYV4P/SZm+zieMLuDwGX1CFXQL4+cLj7xltltnP10DdNjuxzNzUPQfwqMLWWcrMO85OtlnO66EolY6ltDYcrME4CFP/JeKbWcwvMps0Pnm6FJ0feOMzA6Wu6yr1u8XH/Hq2wgYiehU+ZIVhBDaLvNxbmQd9uwr6VglsnXHwKdPtaZzNapW9bwNdhMkk6AcJ4jTD+y14bchY5no2wwYKevM8F1gYZiiSJ6xvz2Y21ud4iER9C6Bo38aQwWa19XuTfHLR/Ym64e2Npt77JsBU6Gok+hHY8UOeuPtwR4NmylC3eRnk8O+69zGL0iT/wsvH07NuMuuiVH+tNMmHZLhfKbQWtm+xtgFx0oEQhq47tcwSOO3BkaNBMxl0y4Xr6njuHDw5ca7gDHW4rgUVVxhHzz9y0sxxHybT4bouXNeFPlxkeHeQA218BaZbcF0dQ5hHaVCteF2yttP127nnkp0FTAd+2Lo8ZcXa7EQ9c7PGTfcGa1tEb6lA8Xp4GhMnc20D4jwa03GNm+4Ka3Qw8BT0lM3uF4eG7b9gdTKA8u7gYrVt3MzW2EgdDLwBnnYy3ghLEgaer58IAFJn97lomVzS7bIe3TTaLk8L5gs1W89WWNsCOku/fae9CJrsWdSe65WAXvD9zewm+FXvvl0UbwBJut1NKqXD860mtCvgMmkO4BbLmR9K17OK+jh8mOG3Dzae/LjE6/fv8G//nvUGzMDHn0ZwPyt4+bPn5/0cvOMIBj7+NIOLCV699/DywoY76+K3zyfo+WyKV+89vH4/RxsAnk12nz9P8b8zA1+C/73I3IaCGLe4Da+lZQeivcbqTegnOL6AB88XZLhuG0EVdgmI9S+GjZWx8X2r14v1n/H+LNt6ohbqthmvzKLzSlhfoq3rnAM4VGHr1DKLjLOCNstwPZTLaeMzlizXdNwaLMPY9csM476HvrNB45OnS9H5gTs+M2hU6rquAr9bxpi3bdgGAEWq8OXZBm66M6wxwcDzoHhLSJIR9O0UNzMDG2mCgbfE007kApKmwffnQd9Odp8NA7fh5+UEom1g9WaawZ4GbrojrG0FvaUHxXuHp3bWfAltyFqmPQ1sPUm3tTHDyrD9cEPeu327HOjSU/yQSeeJXEd9CyBf3/Lg2Sxgveqg53mBX3pTYb83yScX3J/g6FIVyXujvHtfOdi7tHDJAFkP8srw9yMxDNJdWLKDcZbISVtd/IdKrqtj+CkMQVf3PmZRGuRfuPl4PiSd9WyGtS2hs/Tfq9RT+G3g35Ok67IejYJrJdu79YrTIB+S4x4o31o4OO0Y1LF7IHXm9fX9/b0Xld/F77zfxe8813W9u7s77+7uznNd1wOQT5jqWZbqsbxpD06Yp1qup8vn1qN8CcfCufUgIfnaRJgOPMVTvJ5yfl0qkUc1B3wlcjH3Xr/3vFc/SiWUJ3jSUvEUr+eJ525Xo6Qeuzwu/0I2e2y2JiEhISEhISEhISEhIWmGlBKq7quGDSHHhakjCIIgiAeLhBeT6S5kXhCqbvO5jJ8hChCaEDO8cZBd8kM2qw+yNUEQBEEQBEEQxNfEH5IS/vVPF7gP/wbwu/hdvpL/+RfgP4GbuHy8tIfGP/8C/Al4+xjaQhAEQRAAABu/vVXw8r88vHzmf3bfvsHHDycUKUkYLDtBXN6NHwKiDFUfOmSX/JDN6oNsTRAEQRAEQRAE8VXSur+/96L/uPuuey5diIbyx/Vfz60CQRAEQRAEQRAEQRAEQRAEQRA18P+VJLaKLldmtwAAAABJRU5ErkJggg==" alt="image-20211214194435793"></p> <p>如果aof文件有错误，这时候redis启动不起来，我们需要修复这个aof文件</p> <p>redis给我们提供了这样一个工具  <strong>redis-check-aof</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>root@iZbp15ghmmqchytfl4vyguZ bin<span class="token punctuation">]</span><span class="token comment"># redis-check-aof --fix appendonly.aof</span>
0x              a4: Expected <span class="token punctuation">\</span>r<span class="token punctuation">\</span>n, got: <span class="token number">6473</span>
AOF analyzed: <span class="token assign-left variable">size</span><span class="token operator">=</span><span class="token number">174</span>, <span class="token assign-left variable">ok_up_to</span><span class="token operator">=</span><span class="token number">139</span>, <span class="token assign-left variable">ok_up_to_line</span><span class="token operator">=</span><span class="token number">40</span>, <span class="token assign-left variable">diff</span><span class="token operator">=</span><span class="token number">35</span>
This will shrink the AOF from <span class="token number">174</span> bytes, with <span class="token number">35</span> bytes, to <span class="token number">139</span> bytes
Continue? <span class="token punctuation">[</span>y/N<span class="token punctuation">]</span>: y
Successfully truncated AOF
<span class="token punctuation">[</span>root@iZbp15ghmmqchytfl4vyguZ bin<span class="token punctuation">]</span><span class="token comment"># </span>

</code></pre></div><p>如果文件正常，重启就可以正常恢复了！</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token punctuation">[</span>root@iZbp15ghmmqchytfl4vyguZ bin<span class="token punctuation">]</span><span class="token comment"># ps -ef|grep redis</span>
root       <span class="token number">49536</span>   <span class="token number">49334</span>  <span class="token number">0</span> <span class="token number">19</span>:52 pts/0    00:00:00 <span class="token function">grep</span> --color<span class="token operator">=</span>auto redis
<span class="token punctuation">[</span>root@iZbp15ghmmqchytfl4vyguZ bin<span class="token punctuation">]</span><span class="token comment"># redis-server fanconfig/redis.conf</span>
<span class="token punctuation">[</span>root@iZbp15ghmmqchytfl4vyguZ bin<span class="token punctuation">]</span><span class="token comment"># redis-cli -p 6379</span>
</code></pre></div><blockquote><p>优点和缺点</p></blockquote> <p>优点：</p> <p>1.每一次修改都同步，文件的完整性会更加好</p> <p>2.每秒同步一次，可能会丢失一秒的数据</p> <p>3.从不同步，效率最高</p> <p>缺点：</p> <ol><li>相对于数据文件来说，aof内存远远大于rdb，修复的速度也比rdb慢</li></ol> <h3 id="redis发布订阅"><a href="#redis发布订阅" class="header-anchor">#</a> Redis发布订阅</h3> <p>Redis发布订阅是一种消息通信模式：发送者发送消息，订阅者接收消息。</p> <p><img src="/docs/assets/img/image-20211215164941260.0021d8cd.png" alt="image-20211215164941260"></p> <p><img src="/docs/assets/img/image-20211215165155295.2a911feb.png" alt="image-20211215165155295"></p> <p><img src="/docs/assets/img/image-20211215165214376.0f6b695f.png" alt="image-20211215165214376"></p> <blockquote><p>测试</p></blockquote> <p>发送端：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> PUBLISH fangeshuoJava <span class="token string">&quot;Hello Fange&quot;</span>    <span class="token comment">#发布者发布消息到频道！</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> publish fangeshuoJava good
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
</code></pre></div><p>订阅端：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> subscribe fangeshuoJava      <span class="token comment">#订阅一个频道  fangeshuoJava</span>
Reading messages<span class="token punctuation">..</span>. <span class="token punctuation">(</span>press Ctrl-C to quit<span class="token punctuation">)</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;subscribe&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;fangeshuoJava&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;message&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;fangeshuoJava&quot;</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;Hello Fange&quot;</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">&quot;message&quot;</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">&quot;fangeshuoJava&quot;</span>   <span class="token comment">#发布者发布过来的消息</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">&quot;good&quot;</span>

</code></pre></div><h4 id="subscribe"><a href="#subscribe" class="header-anchor">#</a> subscribe</h4> <p>通过subscribe命令订阅某频道，redis-server里维护了一个字典，字典的键就是一个个频道！而字典的值则是一个链表，链表中保存了所有订阅这个channel的客户端。subscribe的命令就是将客户端添加到给定channel的订阅链表中</p> <h4 id="publish"><a href="#publish" class="header-anchor">#</a> publish</h4> <p>通过publish命令向订阅者发送消息</p> <h4 id="使用场景"><a href="#使用场景" class="header-anchor">#</a> 使用场景：</h4> <ol><li>实时消息系统</li> <li>实时聊天！（把频道当做聊天室，将信息回显给所有人即可）</li> <li>订阅、关注系统都是可以的！</li></ol> <p>稍微复杂的场景我们就会使用消息中间件MQ</p> <h3 id="redis主从复制"><a href="#redis主从复制" class="header-anchor">#</a> Redis主从复制</h3> <p>主从复制，读写分离！ 80%的情况下都是在进行读操作！将读操作分配给从机，将写操作分配给主机，可以减缓服务器的压力！一主二从！</p> <h4 id="环境配置"><a href="#环境配置" class="header-anchor">#</a> 环境配置</h4> <p><strong>只配置从库，不配置主库！</strong></p> <h5 id="查看当前库的信息"><a href="#查看当前库的信息" class="header-anchor">#</a> 查看当前库的信息</h5> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> info replication
<span class="token comment"># Replication</span>
role:master   <span class="token comment">#角色 ：master</span>
connected_slaves:0   <span class="token comment">#没有从机</span>
master_failover_state:no-failover
master_replid:8052ba58f7d30c8a1fdbba85bb37fe4f8280e9bf
master_replid2:0000000000000000000000000000000000000000
master_repl_offset:0
second_repl_offset:-1
repl_backlog_active:0
repl_backlog_size:1048576
repl_backlog_first_byte_offset:0
repl_backlog_histlen:0

</code></pre></div><p>复制三个配置文件并且修改对应的信息</p> <ol><li>端口号</li> <li>pid名字</li> <li>log文件名字</li> <li>dump.rdb名字</li></ol> <h4 id="一主二从"><a href="#一主二从" class="header-anchor">#</a> 一主二从</h4> <p>默认情况下，每台Redis服务器都是主节点，我们一般情况下只用配置从机就好了！</p> <p>认老大！</p> <h5 id="slaveof"><a href="#slaveof" class="header-anchor">#</a> <strong>slaveof</strong></h5> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span> slaveof <span class="token number">127.0</span>.0.1 <span class="token number">6379</span>   <span class="token comment">#认主机为127.0.0.1  端口号为6379的服务器认为主机</span>
OK
<span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span> info replication  <span class="token comment">#查看信息</span>
<span class="token comment"># Replication</span>
role:slave   <span class="token comment">#角色变为从机</span>
master_host:127.0.0.1
master_port:6379
master_link_status:up
master_last_io_seconds_ago:1
master_sync_in_progress:0
slave_read_repl_offset:14
slave_repl_offset:14
slave_priority:100
slave_read_only:1
replica_announced:1
connected_slaves:0
master_failover_state:no-failover
master_replid:3d8bc7412658da971d67f93101e0eeb2b3f481e2
master_replid2:0000000000000000000000000000000000000000
master_repl_offset:14
second_repl_offset:-1
repl_backlog_active:1
repl_backlog_size:1048576
repl_backlog_first_byte_offset:1
repl_backlog_histlen:14

</code></pre></div><p>如果两个都配置完了,则有两个从机</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> info replication
<span class="token comment"># Replication</span>
role:master
connected_slaves:2  <span class="token comment">#两个从机</span>
slave0:ip<span class="token operator">=</span><span class="token number">127.0</span>.0.1,port<span class="token operator">=</span><span class="token number">6380</span>,state<span class="token operator">=</span>online,offset<span class="token operator">=</span><span class="token number">224</span>,lag<span class="token operator">=</span><span class="token number">1</span>
slave1:ip<span class="token operator">=</span><span class="token number">127.0</span>.0.1,port<span class="token operator">=</span><span class="token number">6381</span>,state<span class="token operator">=</span>online,offset<span class="token operator">=</span><span class="token number">224</span>,lag<span class="token operator">=</span><span class="token number">1</span>
master_failover_state:no-failover
master_replid:3d8bc7412658da971d67f93101e0eeb2b3f481e2
master_replid2:0000000000000000000000000000000000000000
master_repl_offset:224
second_repl_offset:-1
repl_backlog_active:1
repl_backlog_size:1048576
repl_backlog_first_byte_offset:1
repl_backlog_histlen:224

</code></pre></div><p><img src="/docs/assets/img/image-20211215193510187.0d7e3f8f.png" alt="image-20211215193510187"></p> <p>真实的主从配置应该在配置文件中配置</p> <blockquote><p>细节</p></blockquote> <p><strong>主机可以设置值，从机不能写只能读！</strong> 主机中的所有信息和数据都会被从机保存</p> <p>主机</p> <p><img src="data:image/png;base64,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" alt="image-20211215194022194"></p> <p>从机</p> <p><img src="data:image/png;base64,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" alt="image-20211215194038536"></p> <p>如果主机断电了，从机依旧是从机。</p> <p>如果使用命令行的形式设定主从关系，一旦从机断电，重启启动后从机的角色又会变回主机，需要重新设定角色</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span> <span class="token function">shutdown</span>
not connected<span class="token operator">&gt;</span> <span class="token builtin class-name">exit</span>   <span class="token comment">#关机</span>
<span class="token punctuation">[</span>root@iZbp15ghmmqchytfl4vyguZ bin<span class="token punctuation">]</span><span class="token comment"># redis-server fanconfig/redis80.conf</span>
<span class="token punctuation">[</span>root@iZbp15ghmmqchytfl4vyguZ bin<span class="token punctuation">]</span><span class="token comment"># redis-cli -p 6380</span>
<span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span> get k3
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span>
<span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span> info replication
<span class="token comment"># Replication</span>
role:master
connected_slaves:0
master_failover_state:no-failover
master_replid:7c5438b4dd713e89d488afc8178acc86db598216
master_replid2:0000000000000000000000000000000000000000
master_repl_offset:0
second_repl_offset:-1
repl_backlog_active:0
repl_backlog_size:1048576
repl_backlog_first_byte_offset:0
repl_backlog_histlen:0
<span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span> slaveof <span class="token number">127.0</span>.0.1 <span class="token number">6379</span>
OK
<span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span> get k3
<span class="token string">&quot;v3&quot;</span>
</code></pre></div><p>宕机后自动配置主机</p> <blockquote><p>层层链路</p></blockquote> <p><img src="/docs/assets/img/image-20211215195500881.f0a2ff00.png" alt="image-20211215195500881"></p> <p>这时候也可以完成主从配置</p> <blockquote><p>断开79，如果没有老大了，这时候怎么选择一个老大出来？</p></blockquote> <p>如果主机断开了连接，我们可以使用slaveof no one 让自己变成主机！其他节点就可以手动连接到最新的这个主节点</p> <h5 id="slaveof-no-one"><a href="#slaveof-no-one" class="header-anchor">#</a> slaveof no one</h5> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> slaveof no one
OK
<span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> info replication
<span class="token comment"># Replication</span>
role:master
connected_slaves:0
master_failover_state:no-failover
master_replid:93d2fd3fe93754dffa057eaf7f399abb4b1eeaac
master_replid2:ec9c8953051b0bfeefe093b08444994b567f35f8
master_repl_offset:840
second_repl_offset:841
repl_backlog_active:1
repl_backlog_size:1048576
repl_backlog_first_byte_offset:1
repl_backlog_histlen:840
<span class="token number">127.0</span>.0.1:638<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span> 
</code></pre></div><h4 id="哨兵模式"><a href="#哨兵模式" class="header-anchor">#</a> 哨兵模式</h4> <blockquote><p>自动选举老大的模式</p></blockquote> <p>能够监控后台主机是否故障，如果故障根据投票数自动将从库转换为主库</p> <p>哨兵模式是一种特殊的模式，是一个独立的进程，原理是哨兵通过发送命令，<strong>等待redis服务器响应，从而监控运行的多个Redis实例</strong></p> <p><img src="/docs/assets/img/image-20211216143735385.1548b23c.png" alt="image-20211216143735385"></p> <p><img src="/docs/assets/img/image-20211216143906870.f87d06e0.png" alt="image-20211216143906870"></p> <p><img src="/docs/assets/img/image-20211216144003586.a27062dc.png" alt="image-20211216144003586"></p> <blockquote><p>测试</p></blockquote> <ol><li>配置哨兵配置文件sentinel.conf</li></ol> <p><img src="/docs/assets/img/image-20211216145529853.28005e53.png" alt="image-20211216145529853"></p> <p>2.启动哨兵</p> <p><img src="/docs/assets/img/image-20211216145615285.fcd952c1.png" alt="image-20211216145615285"></p> <p>如果主机 127.0.0.1 6379宕机，这个时候就会从从机中随机选择一个服务器！ 这里6380变为主机</p> <p><img src="/docs/assets/img/image-20211216150237597.87571f03.png" alt="image-20211216150237597"></p> <p>6379回来以后也只能作为6380的从机</p> <p><img src="/docs/assets/img/image-20211216150455444.8e840c96.png" alt="image-20211216150455444"></p> <blockquote><p>哨兵模式</p></blockquote> <p>优点：</p> <ol><li>哨兵集群一般基于主从复制模式，所有的主从配置优点，它全有</li> <li>主从可以切换，故障可以转移</li> <li>哨兵模式就是主从模式的升级，手动到自动，更加健壮！</li></ol> <p>缺点：</p> <ol><li>Redis不好在线扩容，集群容量一旦到达上限，在线扩容十分麻烦！</li> <li>实现哨兵模式的配置其实是很麻烦的，里面有很多选择！</li></ol> <blockquote><p>哨兵模式的全部和配置</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Example sentinel.conf</span>
 
<span class="token comment"># 哨兵sentinel实例运行的端口 默认26379</span>
port <span class="token number">26379</span>
 
<span class="token comment"># 哨兵sentinel的工作目录</span>
<span class="token function">dir</span> /tmp
 
<span class="token comment"># 哨兵sentinel监控的redis主节点的 ip port </span>
<span class="token comment"># master-name  可以自己命名的主节点名字 只能由字母A-z、数字0-9 、这三个字符&quot;.-_&quot;组成。</span>
<span class="token comment"># quorum 当这些quorum个数sentinel哨兵认为master主节点失联 那么这时 客观上认为主节点失联了</span>
<span class="token comment"># sentinel monitor &lt;master-name&gt; &lt;ip&gt; &lt;redis-port&gt; &lt;quorum&gt;</span>
sentinel monitor mymaster <span class="token number">127.0</span>.0.1 <span class="token number">6379</span> <span class="token number">1</span>
 
<span class="token comment"># 当在Redis实例中开启了requirepass foobared 授权密码 这样所有连接Redis实例的客户端都要提供密码</span>
<span class="token comment"># 设置哨兵sentinel 连接主从的密码 注意必须为主从设置一样的验证密码</span>
<span class="token comment"># sentinel auth-pass &lt;master-name&gt; &lt;password&gt;</span>
sentinel auth-pass mymaster MySUPER--secret-0123passw0rd
 
 
<span class="token comment"># 指定多少毫秒之后 主节点没有应答哨兵sentinel 此时 哨兵主观上认为主节点下线 默认30秒</span>
<span class="token comment"># sentinel down-after-milliseconds &lt;master-name&gt; &lt;milliseconds&gt;</span>
sentinel down-after-milliseconds mymaster <span class="token number">30000</span>
 
<span class="token comment"># 这个配置项指定了在发生failover主备切换时最多可以有多少个slave同时对新的master进行 同步，</span>
这个数字越小，完成failover所需的时间就越长，
但是如果这个数字越大，就意味着越 多的slave因为replication而不可用。
可以通过将这个值设为 <span class="token number">1</span> 来保证每次只有一个slave 处于不能处理命令请求的状态。
<span class="token comment"># sentinel parallel-syncs &lt;master-name&gt; &lt;numslaves&gt;</span>
sentinel parallel-syncs mymaster <span class="token number">1</span>
 
 
 
<span class="token comment"># 故障转移的超时时间 failover-timeout 可以用在以下这些方面： </span>
<span class="token comment">#1. 同一个sentinel对同一个master两次failover之间的间隔时间。</span>
<span class="token comment">#2. 当一个slave从一个错误的master那里同步数据开始计算时间。直到slave被纠正为向正确的master那里同步数据时。</span>
<span class="token comment">#3.当想要取消一个正在进行的failover所需要的时间。  </span>
<span class="token comment">#4.当进行failover时，配置所有slaves指向新的master所需的最大时间。不过，即使过了这个超时，slaves依然会被正确配置为指向master，但是就不按parallel-syncs所配置的规则来了</span>
<span class="token comment"># 默认三分钟</span>
<span class="token comment"># sentinel failover-timeout &lt;master-name&gt; &lt;milliseconds&gt;</span>
sentinel failover-timeout mymaster <span class="token number">180000</span>
 
<span class="token comment"># SCRIPTS EXECUTION</span>
 
<span class="token comment">#配置当某一事件发生时所需要执行的脚本，可以通过脚本来通知管理员，例如当系统运行不正常时发邮件通知相关人员。</span>
<span class="token comment">#对于脚本的运行结果有以下规则：</span>
<span class="token comment">#若脚本执行后返回1，那么该脚本稍后将会被再次执行，重复次数目前默认为10</span>
<span class="token comment">#若脚本执行后返回2，或者比2更高的一个返回值，脚本将不会重复执行。</span>
<span class="token comment">#如果脚本在执行过程中由于收到系统中断信号被终止了，则同返回值为1时的行为相同。</span>
<span class="token comment">#一个脚本的最大执行时间为60s，如果超过这个时间，脚本将会被一个SIGKILL信号终止，之后重新执行。</span>
 
<span class="token comment">#通知型脚本:当sentinel有任何警告级别的事件发生时（比如说redis实例的主观失效和客观失效等等），将会去调用这个脚本，</span>
<span class="token comment">#这时这个脚本应该通过邮件，SMS等方式去通知系统管理员关于系统不正常运行的信息。调用该脚本时，将传给脚本两个参数，</span>
<span class="token comment">#一个是事件的类型，</span>
<span class="token comment">#一个是事件的描述。</span>
<span class="token comment">#如果sentinel.conf配置文件中配置了这个脚本路径，那么必须保证这个脚本存在于这个路径，并且是可执行的，否则sentinel无法正常启动成功。</span>
<span class="token comment">#通知脚本</span>
<span class="token comment"># sentinel notification-script &lt;master-name&gt; &lt;script-path&gt;</span>
  sentinel notification-script mymaster /var/redis/notify.sh
 
<span class="token comment"># 客户端重新配置主节点参数脚本</span>
<span class="token comment"># 当一个master由于failover而发生改变时，这个脚本将会被调用，通知相关的客户端关于master地址已经发生改变的信息。</span>
<span class="token comment"># 以下参数将会在调用脚本时传给脚本:</span>
<span class="token comment"># &lt;master-name&gt; &lt;role&gt; &lt;state&gt; &lt;from-ip&gt; &lt;from-port&gt; &lt;to-ip&gt; &lt;to-port&gt;</span>
<span class="token comment"># 目前&lt;state&gt;总是“failover”,</span>
<span class="token comment"># &lt;role&gt;是“leader”或者“observer”中的一个。 </span>
<span class="token comment"># 参数 from-ip, from-port, to-ip, to-port是用来和旧的master和新的master(即旧的slave)通信的</span>
<span class="token comment"># 这个脚本应该是通用的，能被多次调用，不是针对性的。</span>
<span class="token comment"># sentinel client-reconfig-script &lt;master-name&gt; &lt;script-path&gt;</span>
sentinel client-reconfig-script mymaster /var/redis/reconfig.sh
</code></pre></div><h3 id="redis缓存穿透和雪崩"><a href="#redis缓存穿透和雪崩" class="header-anchor">#</a> Redis缓存穿透和雪崩</h3> <h4 id="缓存穿透-查不到"><a href="#缓存穿透-查不到" class="header-anchor">#</a> 缓存穿透（查不到）</h4> <blockquote><p>概念</p></blockquote> <p>在默认情况下，用户请求数据时，会先在缓存(Redis)中查找，若没找到即缓存未命中，再在数据库中进行查找，数量少可能问题不大，可是一旦大量的请求数据（例如秒杀场景）缓存都没有命中的话，就会全部转移到数据库上，造成数据库极大的压力，就有可能导致数据库崩溃。网络安全中也有人恶意使用这种手段进行攻击被称为洪水攻击。</p> <blockquote><p>解决方案</p></blockquote> <p><strong>布隆过滤器</strong></p> <p>对所有可能查询的参数以Hash的形式存储，以便快速确定是否存在这个值，在控制层先进行拦截校验，校验不通过直接打回，减轻了存储系统的压力。</p> <p><img src="/docs/assets/img/image-20211216152028248.9c59f9a6.png" alt="image-20211216152028248"></p> <h4 id="缓存击穿-量太大-缓存过期"><a href="#缓存击穿-量太大-缓存过期" class="header-anchor">#</a> 缓存击穿（量太大，缓存过期）</h4> <blockquote><p>概念</p></blockquote> <p>相较于缓存穿透，缓存击穿的目的性更强，一个存在的key，在缓存过期的一刻，同时有大量的请求，这些请求都会击穿到DB，造成瞬时DB请求量大、压力骤增。这就是缓存被击穿，只是针对其中某个key的缓存不可用而导致击穿，但是其他的key依然可以使用缓存响应。</p> <p>比如热搜排行上，一个热点新闻被同时大量访问就可能导致缓存击穿。</p> <blockquote><p>解决方案</p></blockquote> <p>设置热点数据永不过期</p> <p>这样就不会出现热点数据过期的情况，但是当Redis内存空间满的时候也会清理部分数据，而且此种方案会占用空间，一旦热点数据多了起来，就会占用部分空间。</p> <p>加互斥锁(分布式锁)</p> <p>在访问key之前，采用SETNX（set if not exists）来设置另一个短期key来锁住当前key的访问，访问结束再删除该短期key。保证同时刻只有一个线程访问。这样对锁的要求就十分高。</p> <p><img src="/docs/assets/img/image-20211216152606010.61fe9207.png" alt="image-20211216152606010"></p> <h4 id="缓存雪崩"><a href="#缓存雪崩" class="header-anchor">#</a> 缓存雪崩</h4> <blockquote><p>概念</p></blockquote> <p>大量的key设置了相同的过期时间，导致在缓存在同一时刻全部失效，造成瞬时DB请求量大、压力骤增，引起雪崩。</p> <p><img src="/docs/assets/img/20200513215850428.c32511a9.jpeg" alt="在这里插入图片描述"></p> <blockquote><p>解决方案</p></blockquote> <h4 id="redis高可用"><a href="#redis高可用" class="header-anchor">#</a> redis高可用</h4> <p>这个思想的含义是，既然redis有可能挂掉，那我多增设几台redis，这样一台挂掉之后其他的还可以继续工作，其实就是搭建的集群</p> <h4 id="限流降级"><a href="#限流降级" class="header-anchor">#</a> 限流降级</h4> <p>这个解决方案的思想是，在缓存失效后，通过加锁或者队列来控制读数据库写缓存的线程数量。比如对某个key只允许一个线程查询数据和写缓存，其他线程等待。</p> <h4 id="数据预热"><a href="#数据预热" class="header-anchor">#</a> 数据预热</h4> <p>数据加热的含义就是在正式部署之前，我先把可能的数据先预先访问一遍，这样部分可能大量访问的数据就会加载到缓存中。在即将发生大并发访问前手动触发加载缓存不同的key，设置不同的过期时间，让缓存失效的时间点尽量均匀。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">2/10/2022, 10:07:26 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.cf5f4e08.js" defer></script><script src="/docs/assets/js/2.5d1e2b3f.js" defer></script><script src="/docs/assets/js/3.c42f2619.js" defer></script>
  </body>
</html>
