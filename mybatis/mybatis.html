<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Mybatis（简化JDBC的操作） | 记录美好生活</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/docs/favicon.ico">
    <meta name="description" content="面向学习">
    <meta name="author" content="沉溺的鱼">
    <meta name="keywords" content="记录自己的学习过程">
    
    <link rel="preload" href="/docs/assets/css/0.styles.4fbbd53d.css" as="style"><link rel="preload" href="/docs/assets/js/app.cf5f4e08.js" as="script"><link rel="preload" href="/docs/assets/js/2.5d1e2b3f.js" as="script"><link rel="preload" href="/docs/assets/js/4.27d27964.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.279998ef.js"><link rel="prefetch" href="/docs/assets/js/11.fdb914f3.js"><link rel="prefetch" href="/docs/assets/js/12.240da4c1.js"><link rel="prefetch" href="/docs/assets/js/13.27adc495.js"><link rel="prefetch" href="/docs/assets/js/14.33b94b6c.js"><link rel="prefetch" href="/docs/assets/js/15.2d5d2839.js"><link rel="prefetch" href="/docs/assets/js/16.1ff5ea8a.js"><link rel="prefetch" href="/docs/assets/js/17.4b738493.js"><link rel="prefetch" href="/docs/assets/js/18.da36ac29.js"><link rel="prefetch" href="/docs/assets/js/19.28e99716.js"><link rel="prefetch" href="/docs/assets/js/3.c42f2619.js"><link rel="prefetch" href="/docs/assets/js/5.a5f1d2d8.js"><link rel="prefetch" href="/docs/assets/js/6.5834fd47.js"><link rel="prefetch" href="/docs/assets/js/7.1aa795cf.js"><link rel="prefetch" href="/docs/assets/js/8.621cf6b8.js"><link rel="prefetch" href="/docs/assets/js/9.2f397d83.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.4fbbd53d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><img src="/docs/favicon.ico" alt="记录美好生活" class="logo"> <span class="site-name can-hide">记录美好生活</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">Java系列</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">Java系列</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/javaweb/javaweb.html" class="nav-link">
  JavaWeb
</a></li><li class="dropdown-item"><!----> <a href="/docs/mybatis/mybatis.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Mybatis
</a></li><li class="dropdown-item"><!----> <a href="/docs/springmvc/springmvc.html" class="nav-link">
  SpringMVC
</a></li><li class="dropdown-item"><!----> <a href="/docs/spring/spring.html" class="nav-link">
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/docs/springboot/springboot.html" class="nav-link">
  Springboot
</a></li><li class="dropdown-item"><!----> <a href="/docs/redis/redis.html" class="nav-link">
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/docs/mysql/mysql.html" class="nav-link">
  Mysql
</a></li><li class="dropdown-item"><!----> <a href="/docs/stream/stream.html" class="nav-link">
  函数式编程
</a></li></ul></div></div><div class="nav-item"><a href="/docs/question/question.html" class="nav-link">
  提问
</a></div><div class="nav-item"><a href="/docs/others/others.html" class="nav-link">
  技术分享
</a></div><div class="nav-item"><a href="/docs/knowledge/knowledge.html" class="nav-link">
  心得体会
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">Java系列</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">Java系列</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/javaweb/javaweb.html" class="nav-link">
  JavaWeb
</a></li><li class="dropdown-item"><!----> <a href="/docs/mybatis/mybatis.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Mybatis
</a></li><li class="dropdown-item"><!----> <a href="/docs/springmvc/springmvc.html" class="nav-link">
  SpringMVC
</a></li><li class="dropdown-item"><!----> <a href="/docs/spring/spring.html" class="nav-link">
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/docs/springboot/springboot.html" class="nav-link">
  Springboot
</a></li><li class="dropdown-item"><!----> <a href="/docs/redis/redis.html" class="nav-link">
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/docs/mysql/mysql.html" class="nav-link">
  Mysql
</a></li><li class="dropdown-item"><!----> <a href="/docs/stream/stream.html" class="nav-link">
  函数式编程
</a></li></ul></div></div><div class="nav-item"><a href="/docs/question/question.html" class="nav-link">
  提问
</a></div><div class="nav-item"><a href="/docs/others/others.html" class="nav-link">
  技术分享
</a></div><div class="nav-item"><a href="/docs/knowledge/knowledge.html" class="nav-link">
  心得体会
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Mybatis（简化JDBC的操作）</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/mybatis/mybatis.html#_1-简介" class="sidebar-link">1.简介</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/mybatis/mybatis.html#_1-1、什么是mybatis" class="sidebar-link">1.1、什么是mybatis</a></li><li class="sidebar-sub-header"><a href="/docs/mybatis/mybatis.html#_1-2、持久化" class="sidebar-link">1.2、持久化</a></li><li class="sidebar-sub-header"><a href="/docs/mybatis/mybatis.html#_1-3、持久层" class="sidebar-link">1.3、持久层</a></li><li class="sidebar-sub-header"><a href="/docs/mybatis/mybatis.html#_1-4、为什么需要mybatis" class="sidebar-link">1.4、为什么需要Mybatis？</a></li></ul></li><li><a href="/docs/mybatis/mybatis.html#_2-第一个mybatis程序" class="sidebar-link">2.第一个Mybatis程序</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/mybatis/mybatis.html#_2-1、搭建环境" class="sidebar-link">2.1、搭建环境</a></li><li class="sidebar-sub-header"><a href="/docs/mybatis/mybatis.html#_2-2、创建一个模块" class="sidebar-link">2.2、创建一个模块</a></li><li class="sidebar-sub-header"><a href="/docs/mybatis/mybatis.html#_2-3、编写代码" class="sidebar-link">2.3、编写代码</a></li></ul></li><li><a href="/docs/mybatis/mybatis.html#_3-crud" class="sidebar-link">3.CRUD</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/mybatis/mybatis.html#_3-1、select" class="sidebar-link">3.1、select</a></li><li class="sidebar-sub-header"><a href="/docs/mybatis/mybatis.html#_3-2、insert" class="sidebar-link">3.2、Insert</a></li><li class="sidebar-sub-header"><a href="/docs/mybatis/mybatis.html#_3-3、update" class="sidebar-link">3.3、update</a></li><li class="sidebar-sub-header"><a href="/docs/mybatis/mybatis.html#_3-4、delete" class="sidebar-link">3.4、delete</a></li><li class="sidebar-sub-header"><a href="/docs/mybatis/mybatis.html#_4-万能map" class="sidebar-link">4.万能Map</a></li></ul></li><li><a href="/docs/mybatis/mybatis.html#_5-模糊查询怎么写" class="sidebar-link">5.模糊查询怎么写</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/mybatis/mybatis.html#_6、配置解析" class="sidebar-link">6、配置解析</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/mybatis/mybatis.html#_6-1、核心配置文件" class="sidebar-link">6.1、核心配置文件</a></li><li class="sidebar-sub-header"><a href="/docs/mybatis/mybatis.html#_6-2、环境配置-environment" class="sidebar-link">6.2、环境配置(environment)</a></li><li class="sidebar-sub-header"><a href="/docs/mybatis/mybatis.html#_6-3、属性-properties" class="sidebar-link">6.3、属性（properties）</a></li><li class="sidebar-sub-header"><a href="/docs/mybatis/mybatis.html#_6-4、typealiases-类型别名" class="sidebar-link">6.4、typeAliases(类型别名)</a></li></ul></li><li><a href="/docs/mybatis/mybatis.html#_7-生命周期和作用域" class="sidebar-link">7.生命周期和作用域</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/mybatis/mybatis.html#_8-解决属性名和字段名不一致的问题" class="sidebar-link">8.解决属性名和字段名不一致的问题</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/mybatis/mybatis.html#_9-日志" class="sidebar-link">9.日志</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/mybatis/mybatis.html#_9-1、日志工厂" class="sidebar-link">9.1、日志工厂</a></li><li class="sidebar-sub-header"><a href="/docs/mybatis/mybatis.html#_9-2、log4j" class="sidebar-link">9.2、Log4J</a></li></ul></li><li><a href="/docs/mybatis/mybatis.html#_10、分页" class="sidebar-link">10、分页</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/mybatis/mybatis.html#_10-1、使用limit分页" class="sidebar-link">10.1、使用limit分页</a></li><li class="sidebar-sub-header"><a href="/docs/mybatis/mybatis.html#_10-1、rowbounds分页-项目中不建议使用-了解即可" class="sidebar-link">10.1、RowBounds分页（项目中不建议使用，了解即可）</a></li></ul></li><li><a href="/docs/mybatis/mybatis.html#_11、使用注解开发" class="sidebar-link">11、使用注解开发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/mybatis/mybatis.html#_11-1、面向接口编程" class="sidebar-link">11.1、面向接口编程</a></li><li class="sidebar-sub-header"><a href="/docs/mybatis/mybatis.html#_11-2、使用注解开发" class="sidebar-link">11.2、使用注解开发</a></li><li class="sidebar-sub-header"><a href="/docs/mybatis/mybatis.html#_11-3、crud" class="sidebar-link">11.3、CRUD</a></li></ul></li><li><a href="/docs/mybatis/mybatis.html#_12、lombok" class="sidebar-link">12、Lombok</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/mybatis/mybatis.html#_13-多对一处理" class="sidebar-link">13.多对一处理</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/mybatis/mybatis.html#_14、一对多处理" class="sidebar-link">14、一对多处理</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/mybatis/mybatis.html#_15、动态sql" class="sidebar-link">15、动态SQL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/mybatis/mybatis.html#动态sql-if" class="sidebar-link">动态SQL-IF</a></li><li class="sidebar-sub-header"><a href="/docs/mybatis/mybatis.html#动态sql-choose-when-otherwise" class="sidebar-link">动态SQL-choose(When,otherwise)</a></li><li class="sidebar-sub-header"><a href="/docs/mybatis/mybatis.html#动态sql-trim-where-set" class="sidebar-link">动态SQL-trim(where,set)</a></li><li class="sidebar-sub-header"><a href="/docs/mybatis/mybatis.html#sql片段" class="sidebar-link">SQL片段</a></li><li class="sidebar-sub-header"><a href="/docs/mybatis/mybatis.html#foreach" class="sidebar-link">Foreach</a></li></ul></li><li><a href="/docs/mybatis/mybatis.html#_16、缓存" class="sidebar-link">16、缓存</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/mybatis/mybatis.html#一级缓存" class="sidebar-link">一级缓存：</a></li><li class="sidebar-sub-header"><a href="/docs/mybatis/mybatis.html#二级缓存" class="sidebar-link">二级缓存</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="mybatis-简化jdbc的操作"><a href="#mybatis-简化jdbc的操作" class="header-anchor">#</a> Mybatis（简化JDBC的操作）</h1> <p>环境：</p> <ul><li>JDK1.8</li> <li>Mysql 5.7</li> <li>Maven 3.6.1</li></ul> <p>回顾：</p> <ul><li>JDBC</li> <li>Mysql</li> <li>Java基础</li> <li>maven</li> <li>Junit</li></ul> <p>之后学习所有的框架最好的方式，看官网文档</p> <h2 id="_1-简介"><a href="#_1-简介" class="header-anchor">#</a> 1.简介</h2> <h3 id="_1-1、什么是mybatis"><a href="#_1-1、什么是mybatis" class="header-anchor">#</a> 1.1、什么是mybatis</h3> <ul><li><p>MyBatis 是一款优秀的持久层框架，它支持自定义 SQL、存储过程以及高级映射。</p></li> <li><p>MyBatis 免除了几乎所有的 JDBC 代码以及设置参数和获取结果集的工作。</p></li> <li><p>MyBatis 可以通过简单的 XML 或注解来配置和映射原始类型、接口和 Java POJO（Plain Old Java Objects，普通老式 Java 对象）为数据库中的记录。</p></li></ul> <p>如何获得Mybatis？</p> <ul><li><p>github:https://hub.fastgit.org/mybatis/mybatis-3</p></li> <li><p>官网:https://mybatis.org/mybatis-3/zh/index.html</p></li> <li><p>maven</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.5.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

</code></pre></div></li></ul> <h3 id="_1-2、持久化"><a href="#_1-2、持久化" class="header-anchor">#</a> 1.2、持久化</h3> <p>数据持久化</p> <ul><li><p>持久化就是将程序的数据在持久状态和瞬时状态转化的过程</p></li> <li><p>内存：断电即失</p></li> <li><p>生活中的持久化：冷藏、罐头</p></li></ul> <p><strong>为什么需要持久化？</strong></p> <ul><li>有一些对象，不能让他丢掉。</li> <li>内存太贵了</li></ul> <h3 id="_1-3、持久层"><a href="#_1-3、持久层" class="header-anchor">#</a> 1.3、持久层</h3> <p>Dao层、Service层、Controller层......</p> <ul><li>完成持久化工作的代码块</li> <li>层是界限十分明显的。</li></ul> <h3 id="_1-4、为什么需要mybatis"><a href="#_1-4、为什么需要mybatis" class="header-anchor">#</a> 1.4、为什么需要Mybatis？</h3> <ul><li><p>帮助程序员将数据存入到数据库中</p></li> <li><p>方便</p></li> <li><p>传统的JDBC代码太复杂了。简化JDBC</p></li> <li><p>不用Mybatis也可以，更容易上手、技术没有高低之分</p></li> <li><p>优点：</p> <ul><li>简单易学</li> <li>灵活</li> <li>sql和代码的分离，提高了可维护性。</li> <li>提供映射标签，支持对象与数据库的orm字段关系映射</li> <li>提供对象关系映射标签，支持对象关系组建维护</li> <li>提供xml标签，支持编写动态sql。</li></ul></li></ul> <p><strong>最重要的一点：使用的人多！</strong></p> <h2 id="_2-第一个mybatis程序"><a href="#_2-第一个mybatis程序" class="header-anchor">#</a> 2.第一个Mybatis程序</h2> <p>思路：搭建环境--&gt;导入Mybatis--&gt;编写代码--&gt;测试！</p> <h3 id="_2-1、搭建环境"><a href="#_2-1、搭建环境" class="header-anchor">#</a> 2.1、搭建环境</h3> <p>搭建数据库</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>user<span class="token punctuation">`</span></span><span class="token punctuation">(</span>
  <span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>pwd<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token keyword">ENGINE</span> <span class="token operator">=</span> <span class="token keyword">INNODB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span> <span class="token operator">=</span> utf8<span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token identifier"><span class="token punctuation">`</span>user<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>pwd<span class="token punctuation">`</span></span><span class="token punctuation">)</span>
<span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token string">'鸣人'</span><span class="token punctuation">,</span><span class="token string">'1011'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'佐助'</span><span class="token punctuation">,</span><span class="token string">'0902'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'水门'</span><span class="token punctuation">,</span><span class="token string">'0101'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>新建项目</p> <p>1.新建一个普通的maven项目</p> <p>2.删除src目录</p> <p>3.导入maven依赖</p> <div class="language-xml extra-class"><pre class="language-xml"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.5.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--        数据库依赖--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.1.47<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--        junit--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_2-2、创建一个模块"><a href="#_2-2、创建一个模块" class="header-anchor">#</a> 2.2、创建一个模块</h3> <ul><li>编写mybatis的核心配置文件</li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">configuration</span>
        <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--    默认环境是development这个环境--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>development<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>development<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>JDBC<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>POOLED<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mysql.jdbc.Driver<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc:mysql://localhost:3306/mybatis?useSSL=false<span class="token entity named-entity" title="&amp;">&amp;amp;</span>useUnicode=true<span class="token entity named-entity" title="&amp;">&amp;amp;</span>characterEncoding=utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Shen9299<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>需要注意的是，如果程序运行出现Error querying database. Cause: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException:
Communicat，将userSSL=true改为useSSL=false</strong></p> <ul><li>编写mybatis工具类</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MybatisUtils</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">SqlSessionFactory</span> sqlSessionFactory<span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>

            <span class="token comment">//获取mybatis第一步，获取sqlSessionFactory对象</span>
            <span class="token class-name">String</span> resource <span class="token operator">=</span> <span class="token string">&quot;mybatis-config.xml&quot;</span><span class="token punctuation">;</span>
            <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
            sqlSessionFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//既然有了 SqlSessionFactory，顾名思义，我们可以从中获得 SqlSession 的实例。</span>
    <span class="token comment">// SqlSession 提供了在数据库执行 SQL 命令所需的所有方法。你可以通过 SqlSession 实例来直接执行已映射的 SQL 语句。例如：</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SqlSession</span> <span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> sqlSessionFactory<span class="token punctuation">.</span><span class="token function">openSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-3、编写代码"><a href="#_2-3、编写代码" class="header-anchor">#</a> 2.3、编写代码</h3> <ul><li>实体类</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> pwd<span class="token punctuation">;</span>
    <span class="token comment">//set get 以及构造方法省略</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>Dao接口</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserMapper</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>接口实现类,以前的web开发中用接口实现类UserMapperImpl，在mybatis使用xml文件</li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>
        <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--命名空间：与dao/mapper接口对应--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.fannnnn.dao.UserMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--    id的值是方法名    resultType的值的返回的结果集类型--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.fannnnn.pojo.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select * from mybatis.user;
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>在mybatis-config.xml当中去注册mapper，注意，我们写的每一个mapper都要注册</li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--   每一个mapper都需要在这里进行注册--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 目录用斜杠分来--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com/fannnnn/dao/UserMapper.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>值得注意的是：resource的文件目录需要用&quot;/&quot;分开，而不是&quot;.&quot;</strong></p> <ul><li>编写测试类</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token comment">//获得sqlSession对象</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token class-name">MybatisUtils</span><span class="token punctuation">.</span><span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//执行sql</span>
    <span class="token class-name">UserMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> userList <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getUserList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">User</span> user <span class="token operator">:</span> userList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//用完以后关闭sqlSession</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>因为我们的xml文件是在java目录下而不是在recource目录下，所以可能会出现资源导出失败的问题，解决这个问题只需要在pom.xml文件当中写入下方资源过滤代码：</li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resources</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">&gt;</span></span>src/main/resources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>includes</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">&gt;</span></span>**/*.properties<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">&gt;</span></span>**/*.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>includes</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- 记得filtering标签内要写false    很重要--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filtering</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filtering</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">&gt;</span></span>src/main/java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>includes</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">&gt;</span></span>**/*.properties<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">&gt;</span></span>**/*.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>includes</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filtering</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filtering</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resources</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="_3-crud"><a href="#_3-crud" class="header-anchor">#</a> 3.CRUD</h2> <ul><li>mapper接口</li></ul> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token comment">//根据id查询用户</span>
    <span class="token class-name">User</span> <span class="token function">getUserById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">int</span> <span class="token function">addUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>编写xml文件</li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.fannnnn.pojo.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select * from mybatis.user where id = #{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.fannnnn.pojo.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        insert into mybatis.user values(#{id},#{name},#{pwd})
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>测试</li></ul> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getUserById</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token class-name">MybatisUtils</span><span class="token punctuation">.</span><span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">UserMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">User</span> user <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getUserById</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//查询语句不需要提交事务</span>
        sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span>
    <span class="token comment">//增删改必须需要提交事务</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addUserTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token class-name">MybatisUtils</span><span class="token punctuation">.</span><span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">UserMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mapper<span class="token punctuation">.</span><span class="token function">addUser</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">&quot;卡卡西&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;333333&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//提交事务（必须要做，否则插入不进数据库）</span>
        sqlSession<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-1、select"><a href="#_3-1、select" class="header-anchor">#</a> 3.1、select</h3> <p>1.编写接口</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">User</span> <span class="token function">getUserById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>2.编写对应的mapper中对应的sql语句</p> <div class="language-xml extra-class"><pre class="language-xml"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserById<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.fannnnn.pojo.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select * from mybatis.user where id = #{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>3.测试</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getUserById</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token class-name">MybatisUtils</span><span class="token punctuation">.</span><span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">UserMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getUserById</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>

    sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-2、insert"><a href="#_3-2、insert" class="header-anchor">#</a> 3.2、Insert</h3> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.fannnnn.pojo.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    insert into mybatis.user values(#{id},#{name},#{pwd})
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_3-3、update"><a href="#_3-3、update" class="header-anchor">#</a> 3.3、update</h3> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.fannnnn.pojo.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    update mybatis.user
    set name = #{name},pwd = #{pwd}
    where id = #{id};
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_3-4、delete"><a href="#_3-4、delete" class="header-anchor">#</a> 3.4、delete</h3> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>delete</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>deleteUser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    delete from mybatis.user where id = #{id}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>delete</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>需要注意，增删改要提交事务</strong></p> <h3 id="_4-万能map"><a href="#_4-万能map" class="header-anchor">#</a> 4.万能Map</h3> <p>假设，我们的实体类或者数据库中的表，字段或者参数过多，我们应当考虑使用Map!</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">int</span> <span class="token function">addUser2</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>addUser2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>map<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    insert into mybatis.user values(#{userid},#{userName},#{passWord})
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addUserTest2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token class-name">MybatisUtils</span><span class="token punctuation">.</span><span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">UserMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;userid&quot;</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;userName&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;鼬&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;passWord&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;12345678&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    mapper<span class="token punctuation">.</span><span class="token function">addUser2</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Map传递参数，直接在sql中取出key即可！【parameterType=&quot;map&quot;】</p> <p>对象传递参数，直接在sql中取对象的属性即可！【parameterType=&quot;User&quot;】</p> <p>只有一个基本类型参数的情况下，可以直接在sql中取到</p> <p>多个参数用Map，或者注解！</p> <h2 id="_5-模糊查询怎么写"><a href="#_5-模糊查询怎么写" class="header-anchor">#</a> 5.模糊查询怎么写</h2> <p>模糊查询怎么写？</p> <p>1.Java代码执行的时候，传递通配符%%</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getUserLike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//获得sqlSession对象</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token class-name">MybatisUtils</span><span class="token punctuation">.</span><span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//执行sql</span>
    <span class="token class-name">UserMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> userList <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getUserLike</span><span class="token punctuation">(</span><span class="token string">&quot;%佐%&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">User</span> user <span class="token operator">:</span> userList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>2.在sql中使用通配符！(sql注入)</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserLike<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.fannnnn.pojo.User<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>String<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from mybatis.user where name like &quot;%&quot;#{value}&quot;%&quot;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="_6、配置解析"><a href="#_6、配置解析" class="header-anchor">#</a> 6、配置解析</h2> <h3 id="_6-1、核心配置文件"><a href="#_6-1、核心配置文件" class="header-anchor">#</a> 6.1、核心配置文件</h3> <ul><li>mybatis-config.xml</li> <li>MyBatis 的配置文件包含了会深深影响 MyBatis 行为的设置和属性信息。 配置文档的顶层结构如下：</li></ul> <div class="language-java extra-class"><pre class="language-java"><code>configuration（配置）
properties（属性）
settings（设置）
typeAliases（类型别名）
typeHandlers（类型处理器）
objectFactory（对象工厂）
plugins（插件）
environments（环境配置）
environment（环境变量）
transactionManager（事务管理器）
dataSource（数据源）
databaseIdProvider（数据库厂商标识）
mappers（映射器）
</code></pre></div><h3 id="_6-2、环境配置-environment"><a href="#_6-2、环境配置-environment" class="header-anchor">#</a> 6.2、环境配置(environment)</h3> <ul><li>MyBatis 可以配置成适应多种环境，这种机制有助于将 SQL 映射应用于多种数据库之中</li> <li><strong>不过要记住：尽管可以配置多个环境，但每个 SqlSessionFactory 实例只能选择一种环境。</strong></li></ul> <p>Mybatis默认的事务管理器就是JDBC，连接池POOLED</p> <h3 id="_6-3、属性-properties"><a href="#_6-3、属性-properties" class="header-anchor">#</a> 6.3、属性（properties）</h3> <p>这些属性可以在外部进行配置，并可以进行动态替换。你既可以在典型的 Java 属性文件中配置这些属性，也可以在 properties 元素的子元素中设置</p> <p>设置好的属性可以在整个配置文件中用来替换需要动态配置的属性值</p> <p>编写个配置文件</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token attr-name">driver</span><span class="token punctuation">=</span><span class="token attr-value">com.mysql.jdbc.Driver</span>
<span class="token attr-name">url</span><span class="token punctuation">=</span><span class="token attr-value">jdbc:mysql://localhost:3306/mybatis?useSSL=false&amp;amp;useUnicode=true&amp;amp;characterEncoding=utf8</span>
<span class="token attr-name">username</span><span class="token punctuation">=</span><span class="token attr-value">root</span>
<span class="token attr-name">password</span><span class="token punctuation">=</span><span class="token attr-value">Shen9299</span>
</code></pre></div><p>xml文件当中引入资源</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>db.properties<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><h3 id="_6-4、typealiases-类型别名"><a href="#_6-4、typealiases-类型别名" class="header-anchor">#</a> 6.4、typeAliases(类型别名)</h3> <h4 id="_6-4-1、类型别名可为-java-类型设置一个缩写名字。-它仅用于-xml-配置-意在降低冗余的全限定类名书写"><a href="#_6-4-1、类型别名可为-java-类型设置一个缩写名字。-它仅用于-xml-配置-意在降低冗余的全限定类名书写" class="header-anchor">#</a> 6.4.1、类型别名可为 Java 类型设置一个缩写名字。 它仅用于 XML 配置，意在降低冗余的全限定类名书写</h4> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--    id的值是方法名    resultType的值的返回的结果集类型--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from mybatis.user;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 起别名--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAlias</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.fannnnn.pojo.User<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alias</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>User<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="_6-4-2、也可以指定一个包名-mybatis-会在包名下面搜索需要的-java-bean"><a href="#_6-4-2、也可以指定一个包名-mybatis-会在包名下面搜索需要的-java-bean" class="header-anchor">#</a> 6.4.2、也可以指定一个包名，MyBatis 会在包名下面搜索需要的 Java Bean</h4> <p>扫描实体类的包，它的默认别名就为这个类的类名，<strong>首字母小写</strong></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--    id的值是方法名    resultType的值的返回的结果集类型--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from mybatis.user;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.fannnnn.pojo<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>typeAliases</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="_6-4-3、通过注解加别名"><a href="#_6-4-3、通过注解加别名" class="header-anchor">#</a> 6.4.3、通过注解加别名</h4> <p><img src="/docs/assets/img/image-20210807164054657.c270a516.png" alt="image-20210807164054657"></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--    id的值是方法名    resultType的值的返回的结果集类型--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>MyUser<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from mybatis.user;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="_7-生命周期和作用域"><a href="#_7-生命周期和作用域" class="header-anchor">#</a> 7.生命周期和作用域</h2> <p>程序运行的生命周期</p> <p><img src="/docs/assets/img/image-20210809215450852.f90035ef.png" alt="image-20210809215450852"></p> <p>生命周期和作用域是至关重要的，因为错误的使用会导致非常严重的<strong>并发问题</strong></p> <p><strong>SqlSessionFactoryBuilder：</strong></p> <ul><li>一旦创建了SqlSessionFactory，就不再需要SqlSessionFactoryBuilder；</li> <li>SqlSessionFactoryBuilder是一个局部变量</li></ul> <p><strong>SqlSessionFactory</strong>：</p> <ul><li>可以把它想象成为数据库连接池</li> <li>SqlSessionFactory一旦就创建就应该在应用的期间一直存在，<strong>没有任何理由丢弃它或重新创建另一个实例</strong></li> <li>最简单的使用就是使用<strong>单例模式</strong>或者静态单例模式</li></ul> <p><strong>SqlSession:</strong></p> <ul><li>连接到连接池的一个请求！</li> <li>需要开启跟关闭，<strong>用完之后需要赶紧关闭</strong>，否则资源被占用！</li></ul> <h2 id="_8-解决属性名和字段名不一致的问题"><a href="#_8-解决属性名和字段名不一致的问题" class="header-anchor">#</a> 8.解决属性名和字段名不一致的问题</h2> <p>数据库中的字段</p> <p><img src="data:image/png;base64,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" alt="image-20210809220621247"></p> <p>查询出来会发现password会null</p> <p><img src="data:image/png;base64,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lwifDXNnHb97+Q80OJfmMDThYajw4PHM/kbNxrue4JGiwPxjufNJ/xHdqTujgK//fX7zUhSP3LmVOx7agq23jrc+usShxytDqlNsQjwRkoaIisN8s2Lmd8PHf8wzr82MO8cW5ZOCTG/N8RV2oCBJdk699GviHr6XXQcPUa52M9RVx9Gj57jz2/tDy3MF5auUYJ1foNOE+Q8cLbczXV45d/Hph2YqHzxEbpwKm7Ge1157a+o6RTByVmrHStNhMDEQtYuc7gH/A04GBxmKjqWk10Tg7o1kqeaF5zUcvu8Wbv1iJRGeUYxt7/GLN96fdb1FGcttx8uNNF7Hvz+v49Chfew9vJlw9yj9jUd4/s3jmOdxdkMfv8zvk7/Mnbd/ma06DSpJmjFuBZtOKS6PB4gkPIyb3olKe249oDhKaR8bweW6OTd/l4Kc90We/YudWD78NS990sOoffymOootyxq2f+uHPFbUwe+f/b/ULOGU8ecVZQ9EmGYx5zg7v2vXaJbiVJdTzv7L/X388jsvcmnNbBMIbnbUYZFExqSx40tPcG/uVX75dy9wyXdz65d47J8S2t/j9x/n8JX9/5Hv3ibdfAdUVBsoyNNiazjOmXFuzuN8a4ilrh5nO8vlcKDACshZKIpgeSl59H/wZEU4PruB07//003vQEE4UUVIko0rR57j2Q8SSU2Oxzd0k63GMwtZH2Wh9tPL8z7WULA4yxl2nS+vZclfyFmwxmk7+jw//nicQcMgY57PxnOgRThXIBAIBIIQmf8MtkAgEAgEgkURTlQgEAgEghARTlQgEAgEghARTlQgEAgEghARTlQgEAgEghARTlQgEAgEghARTlQgEAgEghARTlQgEAgEghARTlQgEAgEghARTlQgEAgEghARTlQgEAgEghARTlQgEAgEghARTlQgEAgEghARTlQgEAgEghARTlQgEAgEghARTlQgEAgEghARTlQgEAgEghARTlQgEAgEghD5/24AicE+GkV2AAAAAElFTkSuQmCC" alt="image-20210809222619911"></p> <p>原因是实体类属性名和数据库字段名不一致的原因</p> <ul><li>最笨的解决办法，在sql中给数据库字段名起别名</li></ul> <p><img src="/docs/assets/img/image-20210809222941451.565df407.png" alt="image-20210809222941451"></p> <ul><li>其它办法：</li></ul> <p><strong>ResultMap</strong>：结果集映射</p> <p><img src="/docs/assets/img/image-20210809223441526.107a6300.png" alt="image-20210809223441526"></p> <ul><li>resultMap元素是Mybatis中最重要最强大的元素</li> <li>resultMap的设计思想是：对于简单的语句根本不需要配置显示的结果映射，而对于复杂一点的语句只需要描述他们的关系就好了</li></ul> <p><strong>可以只映射不一样的字段：</strong></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--    id 是为了让resultMap指向这个结果集映射，type要映射的实体类--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userMap<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--        column属性是数据库中的字段   property是实体类的属性，一一对应--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pwd<span class="token punctuation">&quot;</span></span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="_9-日志"><a href="#_9-日志" class="header-anchor">#</a> 9.日志</h2> <h3 id="_9-1、日志工厂"><a href="#_9-1、日志工厂" class="header-anchor">#</a> 9.1、日志工厂</h3> <p>如果一个数据库操作，出现了异常，我们需要排错，日志就是最好的助手！</p> <p>曾经：sout、debug</p> <p>现在：日志工厂</p> <ul><li><p>SLF4J</p></li> <li><p>LOG4J 【掌握】</p></li> <li><p>LOG4J2</p></li> <li><p>JDK_LOGGING</p></li> <li><p>COMMONS_LOGGING</p></li> <li><p>STDOUT_LOGGING 【掌握】</p></li> <li><p>NO_LOGGING</p></li></ul> <p><strong>STDOUT_LOGGING是mybatis默认的日志工厂</strong></p> <p>在mybatis核心配置文件中配置日志配置</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--        标准的日志工厂--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logImpl<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>STDOUT_LOGGING<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>输出：</p> <p><img src="/docs/assets/img/image-20210810094638069.c82fd0f7.png" alt="image-20210810094638069"></p> <h3 id="_9-2、log4j"><a href="#_9-2、log4j" class="header-anchor">#</a> 9.2、Log4J</h3> <ol><li>导入依赖</li></ol> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.17<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>2.编写配置文件</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token comment">#将等级为DEBUG的日志信息输出到console和file这两个目的地，console和file的定义在下面的代码</span>
<span class="token attr-name">log4j.rootLogger</span><span class="token punctuation">=</span><span class="token attr-value">DEBUG,console,file</span>
 
<span class="token comment">#控制台输出的相关设置</span>
<span class="token attr-name">log4j.appender.console</span> <span class="token punctuation">=</span> <span class="token attr-value">org.apache.log4j.ConsoleAppender</span>
<span class="token attr-name">log4j.appender.console.Target</span> <span class="token punctuation">=</span> <span class="token attr-value">System.out</span>
<span class="token attr-name">log4j.appender.console.Threshold</span><span class="token punctuation">=</span><span class="token attr-value">DEBUG</span>
<span class="token attr-name">log4j.appender.console.layout</span> <span class="token punctuation">=</span> <span class="token attr-value">org.apache.log4j.PatternLayout</span>
<span class="token attr-name">log4j.appender.console.layout.ConversionPattern</span><span class="token punctuation">=</span><span class="token attr-value">[%c]-%m%n</span>
 
<span class="token comment">#文件输出的相关设置</span>
<span class="token attr-name">log4j.appender.file</span> <span class="token punctuation">=</span> <span class="token attr-value">org.apache.log4j.RollingFileAppender</span>
<span class="token attr-name">log4j.appender.file.File</span><span class="token punctuation">=</span><span class="token attr-value">./log/kuang.log</span>
<span class="token attr-name">log4j.appender.file.MaxFileSize</span><span class="token punctuation">=</span><span class="token attr-value">10mb</span>
<span class="token attr-name">log4j.appender.file.Threshold</span><span class="token punctuation">=</span><span class="token attr-value">DEBUG</span>
<span class="token attr-name">log4j.appender.file.layout</span><span class="token punctuation">=</span><span class="token attr-value">org.apache.log4j.PatternLayout</span>
<span class="token attr-name">log4j.appender.file.layout.ConversionPattern</span><span class="token punctuation">=</span><span class="token attr-value">[%p][%d{yy-MM-dd}][%c]%m%n</span>
 
<span class="token comment">#日志输出级别</span>
<span class="token attr-name">log4j.logger.org.mybatis</span><span class="token punctuation">=</span><span class="token attr-value">DEBUG</span>
<span class="token attr-name">log4j.logger.java.sql</span><span class="token punctuation">=</span><span class="token attr-value">DEBUG</span>
<span class="token attr-name">log4j.logger.java.sql.Statement</span><span class="token punctuation">=</span><span class="token attr-value">DEBUG</span>
<span class="token attr-name">log4j.logger.java.sql.ResultSet</span><span class="token punctuation">=</span><span class="token attr-value">DEBUG</span>
<span class="token attr-name">log4j.logger.java.sql.PreparedStatement</span><span class="token punctuation">=</span><span class="token attr-value">DEBUG</span>
</code></pre></div><p><strong>简单使用</strong></p> <p>1.在要使用Log4j的类中，导入包import org apache.log4j.Logger；</p> <p>2.日志对象，参数为当前类的class</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">static</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">Logger</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">UserMapperTest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>3.日志级别</p> <div class="language-java extra-class"><pre class="language-java"><code>logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_10、分页"><a href="#_10、分页" class="header-anchor">#</a> 10、分页</h2> <p><strong>为什么分页</strong>？</p> <ul><li>减少数据的处理量</li></ul> <h3 id="_10-1、使用limit分页"><a href="#_10-1、使用limit分页" class="header-anchor">#</a> <strong>10.1、使用limit分页</strong></h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">limit</span> stattindex<span class="token punctuation">,</span>pageSize

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">//每页显示两个，从第0个开始查</span>

</code></pre></div><p>使用Mybatis实现分页，核心是sql</p> <ol><li>接口</li></ol> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAiEAAAAtCAYAAAB4SrvVAAAb3klEQVR4nO2dd2CUVdbwf89MKmmkkkAmzRAgEBJ6CyGB0ARCk6a4iIrs8lr3dd3dd193XfdVP3Utu7rqWlZBFFFEWgQhSiBAgCAJJY30Qnrvbeb5/pgJqYSZFCJ6f//N5D7nnnvPPWfOc1uksWPHyggEAoFAIBDcZhSDrYBAIBAIBIJfJiIJEQgEAoFAMCiIJEQgEAgEAsGgIJIQgUAgEAgEg4JIQgQCgUAgEAwKIgkRCAQCgUAwKIgkRCAQCAQCwaAgkhCBQCAQCASDgkhCBAKBQCAQDAoiCREIBAKBQDAoiCREIBAIBALBoCCSEIFAIBAIBIOCSEIEAoFAIBAMCiIJEQgEAoFAMCiIJEQgEAgEAsGgIJIQgUAwaMiyAkvPQILvnoWDLA+2OgLBLxLZagJBS4LxtDO67XXfsUmILFvjPnMZwUHjsJZE8BII2iPLxkwL9uCxUDtc+sE/+lsegKxwYvy6Z9n2m/uZ7D4E4cX680uMf7KsxG7sAoLnB+E65JfR5tuHGU6T17Hx6edYPdMN5W18IVA6OTk9d9tq6wHZfglbn/8dXiUHSCiQbv2A03zWPxyG76iRyEkRpFfq8UwP2PstZeY4c0rTC2iUei9LFfYST9yrIvd4LOU6ObLrKh579r8YnhdOUnHf9Pyl4DnJnQcDjMhMqaOmG3tMWDeDiC0WXD5cQnZrP7t5ceRVP8bnZBKhzxgaQHyWT+XE06PYFubJtmXubJ7rwkIfE6qyK0mtMdzBZSc39r4xkVnFGRzJ1aNtzirefsKLBWOHwtUcTlf0sT/0lHcru7Uiy1b43vsHVgRouLLrZT47eJnaVjvKtgQ+/g823bMQp+IIEgo0AHiseoVHN9/DeNOrnL9W0bf29ANmqhAW3fcgy1auIWjObHy9hlKfm0JJnaZL2f6KLzfo5/jXn5ipgll034Pcvfwe5gTNwsfVlPLMNCqb2so43/08T232pjDiR0r17o8xhD76INPH+GNXfYJLWY0Don97+t1uP1Gkplzio06RZzaRwEXzcK26yNXrdbel7ts/99JfFP3AN9urcTPKIiGn7+JsfUOZOfI8176Po6rv4gR9xN1PxYNjCjn+bQn5g61Mb2ks5f2Pr5OEAgtbK5YucOOVJ42o+nMyZ5oGOKAV5PKHd5uYaFzNd5m3T56+djMevYpFE8xJ++pFwuMqoUuAb6CstAWvcf4oYmNQ44nPaGsqSgc/+QCQbYK455ENOJec4uyBw1QpnfCZPZ/Vj1iy67WPSWvo2J5+jy/9HP/6C9k6kNWP3ItLySmiDx6mxtwd/+AV3LtZ4oO3wimR+zLuk4j8+D8UDKsjI7YSGPik4Jf0uyBpKkk5+Dr7bZ5nzdL1+F39J1dqB76P79gkRJLqKLp6giLtp0HRQZaV2Iycg4fmJJfTWwZFB0NxDgjFKuckKaVNty4s6BuaJi5fKCZSkoAiDhYYcfxxJxZ6J3MmYWCrliQ1ybH5JGs//aTkybIxo6dPxrL0FCdiKm4iz5zy7HOY+/rjbRRDstMERtokcz3ejRF9qr03+nb1c6uAGXiapnLko+3E1Gj1v5KtZNsToUwY/SlpceoB1emnEP+6w3rCLLw69Es0iRW2PLVxFuNdwvkhr11hWTZoCU6SNNRknuVCJvxU2vxzi6eSVE/id8cp8F/OhIk2XIka+NTrjktCZL8t/OlXUzBqnbptOMuuP31Iaqc3KVk2wnn6vSwMHo+LnRXGmnqqCpK4cHAnZ9JrtGXsFrPljysZfuPZEDa/FnJDRt6RP/FhRFFXHXRBKXD+Qvw9zUn+LIrLhrZDD/1aMVOFELo0hLuG22PWXE5B8g8cPfA9+fVtbZY91vHkf00j9csvkKevxm/4EJoqMkk8+jnHLuah1rXRYuQS1m9YTF5cBCePft9n55Flibume/PnMCd87ZTUF5XxxYlGwtYP4+zrUfw1qU1Ha4/hPL3GlUBXMyyaGkmOz+GVL69ztU5nSwc3vnrxLnxv2EPFpx+qbjyfsO8Ma8MbDNbPN2gkv1/gyBhHE8zVzRTmlbP7q2Q+vNYxcbyVfgDyXd788HtnTm2/hhzkzWJXI+rLKokIT+GV6Fqaepiyba5poQ4FJsatulnwzAtTub8ujUUvZJHXOqaVDrzxhh9TYy8T/J8SWgyYBpYnjSF2qzMmrc/U5/PoYwm6RKi1Xlte/EcAjqfTUE7xYHT1dX7/eSMPbPVibGMJr74Vz94iSX95BtvNE5WbKU1pyeT38GY8pDiNVM0KRo1UUqryY2j6GS4aj+6ShJh7hhK6aA7ernaYtNRQlhXDqYP7SCxus6/z3c+zJTCHAx8XMHbFXFS2UJd/hTNff86Ped2PqZ783NhICTSgaTeENNcP8clLJ5FqtMsxhsQXff1X3/jX2t6DO0rxWxHECGuZmrxLnN77BbHt2ivLShwmrmfJgom42JrRXJpETHQZ/ssnkf7vp/g21bAfezs7e6i9SlE1N/KExoI8qvBnqAOQ17G86cgw7l2ptUdt3mWi9+7qYA/Zfglb/7Ac5w7jN4Ujf3mZmLqOuukTJwHMVSHMWxKM9wgHTDXa8XL60H4Sipq18g2wW3/GU1n2Jez5J7GO+QZpwt04V0exd18ZM+9fzvCmeL778F0ulba1ZaDGPcVJZFeuYKLHKIiK6baImaMRz01WYNes4eOTzUT3YWb3jktCyDzGnh0XUQD2k+9l7l03KecWxprVM+HqIY5+V0CjqT1uk+Yz76FNVP7tbeIbJKiO4/jn5ZgDw6bfx0znVE7sO0eZTkR9Xsep345ByYzyq5EcePMoCdebuplOvgX66AfINrNZ/cgG7fTmocPUmHngH7yO+63VvPN+ZKd1dyXewfPIifuWw+eMcZm0kCkbHqWl4s9EZGjfzFL3PMtHmYsImns3654JJb+PzqNQufP6Zlccc/J4/3AF5ZY2rA1zRUUzZ9v3na0zrz01Ct+i63yyp5JSMyvCFvrw4VCZsDfyKJIkqCrhrf80MBTwCRzN5hEVvLO7gNbZ5orsZsMV9PTk9Y3DkeMy+PvBWmpNzZk4w40nHxtN/jNXCNcFKL30u4FE4EIVsTEZvBSlxHe6G+s3j6e55Bwvp7Z7t5MkzC2NsUHCwt6GdWtdGFaaz4H41j/X8lV0Fb9aPoywYVm8p8t3TSc4MsusiSPnygxKQABIyeGZfxejANxnjOIJn5sX9VEpeefQdczvUfH8ihw+OJCL6Rp3Hg3NZe/nVfrLM9huNlhaQlVZaY9NGWJxncREmSVjJ1PiMpzs2FSMJktQ2FZGtp/L2ofXYJd3guj96dSZueI/J5RVD5nw6aufka1u338eTJurIPnUV8Qbq/APnsviBxopfnlnh3L6+HnFtWTKFy5gxupAsr8+Q3GDjCQ3UVtW0ladgfFFH//VO/61tneOgqQTX3LZxJ0JIcEseaCZspd3kqVrr8JlCWvWz8Ey7xRRe1OotRjJ5PlzsKWmJ8E3RVJIIGs6znDIGmQkFJ2PQWhUTAlWkBr1FfEmKvxD5rL4gaaO9qi6wNEdBZjpHjEZtZTl07rWq2+clG1ms+qRDYwoP0t0+BEqFcMYHTSfVY9Y0/z3j0gx8Hehv+MpgNMIcyKPncJ46VyWLTzO6e8iUS5bSEjQKC59c03bjgEY920UUVkBRpY2mMkyDd3EIBMzsFWCCRI2RkAf3mXvuCREqs7k2hXtorTK8x64iRMaD3fFVsrl+4MHiS3XdmL8pR+55GxJ674xqTmftFjtynWDz3pm2heTcTGanG46fYhHCMGLF+HvYULJlR/Y91oEiYX1OkGGZ4H66AdgPWEmXibJHP5oOxd005sJ5VY8df9cJjpFcrK4vVRz6uI+Zu+xAgAuxVVg9ewjjA3wIiIjRauqXENezB52XTjM8EkLCQpZdMN5jn97hPRKwzZNegQ44C2V89I/k/isWgIKOd5ozg8brDqUc5niwgzTMl74ZzK7dOWOVJjwwxYVa1zy+FcBSE11RJ3VboYKHu3DZsd6oqMLie3DhjBzNwtUUg1vfpnJV7q3iPALxewbbkRFu6bqo18bRpTHJPD0Qa39vznfgNOrfiyYasXLqe2mL82cefVN5xsf5apSXn0zleiWtvZkROUTt2wUi2Za8N6+OmRZYu5EBywqCjiUqMHQaWepqoaIH7U/IBO8R0IPSUhBYj67TzRjNNmNNWkFfB5Vh3qSO8/amoNuBVwfeYbbTYlSAWp1z0uYZubmpF65gvHK5Uwaks657TI2szuWMbZRUPTjHiIPHSVL9zYWXzaUpzf5M8r1M7Kz2hduJmnve5zUbQ5PqLLlt/eNZ7QKsnX7XPT1c012OPuPerFuwSa2jl1OfsplEmN+4EL8dZp0szuGxBctevivnvFP294Wkve9x4lCCThDYq0dv13nx8gRkJWtLWI3zh9HOi6fpDTa89RKVQ+C+wkzDSn7/k1Uic4elXb8dmNHe0jNhWReacs6za2DAWUXUfrGSesJM/EyTeO7Dz7ifLVuGS1HybZHgxnnY0TKZbVBduvveApQlXqSi9E1KP3nMSkziphzhajHL2SJjf2NMv097juiRt0CGCu66WktldlqnipRY9Giobi5b0tjd1wSoi/NOVmUahYzccUqmi6mUFiQTV5BMfmZJfRmPdFt1mrGW8fx7Rs7uFTQ9/U/ffWzs7WHmquUaSwxH6L7sryQKvyxcwI6JCGNFOXltz3fmE5mSj72snmX+iW5lvwLe/nix8M4T1pF2IqVzMiMJD263qB2DLMxgeoqUqraqi3NraWMjkmIm4M5VJWQozHGxkL3ZXEdBTjg5gx0+JHvP+ozq8mQ7Vm9wYu685Uk51Zz5Xo9V9Mk2vezYfqpSc2ua3u+sYpzSbW4y8YdK28o4R//yuIqCobYWrFgkQe//Y0P2f+XRGTrVHJlIfvivfnrZBfGfJNKgpEDC8cZcf10ATF92sR3a1rUGkBGI0NzixpJkmlW9yqnHhCMTcxQJ54hZpYDqvIoEqpMmWPasUxLegSH00GWjDE1N0UpAXXV1GKBhWUngS15FBZxw2xN+flUEYCVTVsRff1ckhrIiXiVf14ah//UaYz2nUTIpkAmXdnO9u1nqOpVJ+rvv3qhzqOgoJ24ggJqGI1FO9e0sraCuswOyye1+QXUcBuSkJZ8iorb6m3SLdtYWhsuSt84aWdrD7VXKGwXr+Scr/nX77/uU1P6K54CqFvUgBpZ1ibqkqRGrQZJaptK6u9xbyiSJFNXD3X9sDfnZ5uEcP0Quz9TEhI0meANixhipKC5NpukYzsJj0rvce2+O0rT46kaM4UlW51wjwonKiqO8r5kgHrqJykkJJvZbHy+4yugLGsoMe4sVEbTbhZFksq4sOMvXLiJCpK5irFBS5k9MwCbuiTi8wxPriSJrhvMNHTZcKZUALauvPemayeVNWSYGFyt/mRl8fgHEk+EDmPbZg+GGkk0VVcREZ7EXyOqbxwLNVQ/dYd+bmLXu+fZ1bmQ3ExKYgXRkgSUE5GswfVFb7YEZhF5tEH3rJrwM8X8bqsTYXelkmbnyEyzenZHt4uSPzu04+VWLqhQKJE0SRx/P0n3lK/WTu2Q7AIIXbOGCV4OmLX7oyw3ktul2k6jUrdM0F4PQ/28qfgqMeFXOX/ImGHBj/HA0nXM9fuRfVd786JimP/eEk2nZRFtr3ccVZLU1X/lrkeMB4Sb2KPLso0e6BsntctFhm2I1VuHfoinetfVz+O+awXQNYoPDD/bJESS1JRe3suey3uRFWZYO3kxet4GFoQ9TFXW//C9gcfaiqPf5d1LbviFhBE4dxvb5mQTH/UtUScvUtpuU06LRgMKRSdHVwKaTj9c+ukna2Tkqh/59vNIOq6gy9T28uyqZOGBX/ASAqePx6o+mbjv/s7pc9eo6XZ9sGfKa1vAwgRHI0C3bG1sZ0LnJFutASoK+b+Pcsnq9LeSLl5za1rUMkhSx9v2FNrPLe0OJkiSTMaFDJ68kIGsUOI83Jr5i314eu1YCtPO8lrmwOjXLaWVxFdKLHQ2B9o2hdXHFnCs2pkF0+24ZOmIRX4OB7L4+eYg1NPYBBY2ttDDQd72b37dIcuWTFj1MNOGpXN6z26yypvQANjPYsU9E7oT2OmzAqnTD78+fi7LRtioPBnalE92UY1OdDOFkUdJDn0clacrXE3Xox8Gn/raOhhig6U2RAGgtLahl3MvyBpZ16/t6Kaftd93b4/e3JOlb5zU6tcxEZNlBUpjJWia0GgMd7r+jKf6MBDjviO2WFsDpQ0YPo9jOD/bJMRCFYCHdQWZVzOo1TRQXZDA+YgYJgUswc5BCTkdLSBr5K7JQyfkumwuh7/NleO6IBX8a349+zrRn77AD6naX76KijIwG84we0jT7WQyH+6CFeVUtfMOffUrKy8FU4m6jEQydYNaHuKKt6d1rxJVp5mPsnaJHxa1ycQdbu8svXOYtJRKyha7sHWjM3nfllNmZcuWux0woWP/ZpfUgxmUp1QQ3doOSwuCvE3o7sJHtQZQ3HyA5pbVg7klPo5wUrcX0EY1BEcayG+3N9Dew4FpQxs4F1tNqUZNYW45nx4qZM0UD9yGKSBT7pV+vcLGCh8bKCrtuCtd0pTz9fl6Vvp78YC5ksSIgi6nHe4UbmU3LbmUFIGfsxuWcnyPl5r1jAsuw02oSzjC8Zi2M88K4+nd12/kwjAnSNZNzZs4O2NNJWmdTiHq4+eeC/6bMNsjvPP6N5S2LptZ2GFtAs2NXUO3PvFlMCjJSKd23gyC7gmk6vtEai1HMSt0PEa93GlYVlYKFs44WUGWbm+rifNwrCkluaRTYSNnnBy58b22XCVplb2oV884WVZeCkNcOuincF/NtseCyfv0cfZe7ni0+lZ26+94qh8DM+5vYO6Boy2UJ+SiuYlvyrKMn7sRTpKGlFwNOX1IuH5ySYiVxwzGdf6yMpX4tGI0KBjqNREX3ZqXvb0JKIaiGj9Z2xBNKTlXM6iVJNQOM1h6rw+FZ8K5mF5Oi5ENw6fMxkGdxaVsNZ0HSXFRAZqp45g2dzbWFS2AhorUc+RWd+3czkHK2cKY1mmAuktnSVu4icAHHkJxOpFqM08mzB0LOfu52m7/hr76VcVGkxl6HwseWot1bBY1Cls8py5igkMiX74Q33FLiD79aw0p4f3nLE1X0nk+0oq/zfFlZ6AEjbXs+raQwhGOHcrlXyjg3NJR/O7xuxh2vppShRnTZruzyrGMJ/9YxrVOctPya1EHOrBxcTXOFdqEJiexkDjdzZBlFwo4vdyXh7eNQXm8nGJzK1YvdoDMdMLb7d9oHjaMvzxkS0pkJntSGmg0MsFv5nC81NXsz2jb+GmofnqhMGH8ZEdMkDC3smROiIrJzWW8cK7dfhIdsScLSJvnyTi5mje6+XsrTl7DWNb5y7IqDiXXo0GBaqQ9vrppKHdHRTsdgJYGLsZV6z1mZFnSS15Ju0B1K7uBdpkh4WoWwYvmMNPrGEczenunRh7XrzcyKeAewsojSSttYYjjSMaO8aHbc1SNJoxatRUuXaHC2BX/4ImYlEeRfJNZ0Zv5uSS1cO3sOaoeWMCGB024cDmbWiMHvKbPx6MlhcMX8uhLfLkZsizpHf/0pSXpG8LPqFg+YxMPTpWQm/I5//15qlwCutfBUsn/C1bi0qDmxe9buNZp31JVXDQZoRuZ89AmTKJTqDFzxz84AEXuAS53nvRqsWDs6ochLoFKUzcCggMwqbi5PXpC3zhZFRtN5ryNBD/8IKbRSVQqnfANCmZo5QWOXGvBULv1dzzVj4Ed946BIdxlVMK5Sz3cSmhlxH3jlbjUwLOZmj41+yeXhLjOegjXWR2/kxN3kJBWDBjhPX8rS3zat9ia2ZtGa8u1npkH6i/uYJf1eubNXMLi6RYYaeqoKU7j7M4vONvN3tTK07s46raJwNCNjDFVIsuNXPnkHLnxN9e1NUi1vyNEqj7Nvv+Ys2BJMFOWTcJEXUlJ2iF27z/S9sZkgH5S5Un2fGBE6JIQZi4PwVRTQ3l2DPvf20NyL85mpx15mzStZIOf7Q5JaubYZzGcPmSBt6OCirxaslXezOtcriyfp/8h8fRqFZvXqbCSm8lJK+DZT9OJaOiqy/XjKbzqNZqHloxmnpkC5BbC3ykkLk4nr6qQP75lzO9Xj2DDmmEMaWkkIzmDx3dnk9GunyvPJvOojTdPBXvwpyBjTNTNlBRVsP39VD4pbOsGQ/XTC1N7Hvm1dkd7S30DudeLeGVHKrtKupGXV8KpYk88qgo42G6zXmf8QsbxUkinL68kcDi5Hg0Sgcv8+F/f9g+b3tCh9Y6P43o3QD95ke3+eiu7tVIatZfYaU8y5b6tFLz7by6XGp6ISFItcV++y9CVKwmYs46xygYqsi9w4th5gh4M7eaJdM4dL8Fv5Vpm2iiozY/h8L6vbxxXvRnd+Xld/Kfs3FHO3LlTmLE8GHOpnvLsHzn83h4ulHWV15v40hX945++SFIVSXtfIC3CGUd7U+oKsqgYvp4xNyk/1FGBC5CVqemSgIA2Xn39oRGhS0OYGjYNE3UFxakH+GL/4a63pcqpnDtZybiwdYywgdr88xz+pmd7KBQKoKXD/Syt9eoTJ6XKk+z50Ih5dwczeelkXblI9h7cR2o3fn4ru/V3PNWHgRr3sixhNe5+1oa6U3/5A05na266ccvKXsIFSM/R9HDaS8/2jB07VvwnIEG/Ivv6cPpJBw6+fJqX035qE9A/TWQnN/b+zYuKL07z0PFe3IdyB6IYFsK6LevwHlJB5tnd7Nt/keoBWoZyvvt5tszKZvf/fMC1O3Sp63Yh+/yK320Zy6W3n+FYVltfybLM7KmmPOwg80lEE5F9PJppsF6yET4bXmb9qDh2PLeDLGHHW6LvuJfNRhOy8T6m+TjRnLGfXR+Gk38T+8qyzPSJpvzGRWb7sSaOiyO6gsHGyMGaue66IyRKY/yDnBhaX8al64Or152Eb6AzozRlPHe+iZ/xjtQOaAqP88XrGQSELmOqpzc2XKR6ICvstCFRoEVhNxKfEbpzsQoLXGcGYN5wjdwue4YVjLGFmvwWTt2mYWqhCkA1VAkKc4Z6TmPGhCHkH4ske+Cr/vmgz7i3cMfVrpwrB3dy4lQStT1eD6BglD00Fqo53Q/jQCQhgj5jMd6T1zfopujVLRQXlvHBB6kc6e0yxi8MWbJm9TQLGhKyOVLDLyUHAUCuyyT2wFvEwk/ngpJfGKZjwli7Ureko26gpvgap3buJrHzcq+NAh8TmdMZGsNv8u0lqqCHWTvBVKtXWS4ZR94kIjIbWYyVfkUq/Y6dr3zX+qnnwhYK7jKD89lqg6+66LZusRwjEAgEAoFgMOjFtTACgUAgEAgEfUckIQKBQCAQCAYFkYQIBAKBQCAYFEQSIhAIBAKBYFAQSYhAIBAIBIJBQSQhAoFAIBAIBgWRhAgEAoFAIBgURBIiEAgEAoFgUBBJiEAgEAgEgkFBJCECgUAgEAgGBZGECAQCgUAgGBT+P65COPpBFfJ9AAAAAElFTkSuQmCC" alt="image-20210810110752919"></p> <p>2.Mapper.xml</p> <p><img src="/docs/assets/img/image-20210810110807048.32488076.png" alt="image-20210810110807048"></p> <p>3.测试</p> <p><img src="/docs/assets/img/image-20210810110839430.36b0f72a.png" alt="image-20210810110839430"></p> <h3 id="_10-1、rowbounds分页-项目中不建议使用-了解即可"><a href="#_10-1、rowbounds分页-项目中不建议使用-了解即可" class="header-anchor">#</a> 10.1、RowBounds分页（项目中不建议使用，了解即可）</h3> <h2 id="_11、使用注解开发"><a href="#_11、使用注解开发" class="header-anchor">#</a> 11、使用注解开发</h2> <h3 id="_11-1、面向接口编程"><a href="#_11-1、面向接口编程" class="header-anchor">#</a> 11.1、面向接口编程</h3> <h3 id="_11-2、使用注解开发"><a href="#_11-2、使用注解开发" class="header-anchor">#</a> 11.2、使用注解开发</h3> <p>1.接口直接在接口上实现</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//根据id查询用户</span>
<span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from user where id = #{id}&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">User</span> <span class="token function">getUserById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>2.需要在核心配置文件中绑定接口</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.fannnnn.dao.UserMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>3.测试</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getUserById</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token class-name">MybatisUtils</span><span class="token punctuation">.</span><span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">UserMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getUserById</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>本质：反射机制实现</p> <p>底层：动态代理！</p> <h3 id="_11-3、crud"><a href="#_11-3、crud" class="header-anchor">#</a> 11.3、CRUD</h3> <p>我们可以在工具类创建的时候实现自动提交事务，将opsession的参数设置为true</p> <p><img src="/docs/assets/img/image-20210811104806480.48ccff98.png" alt="image-20210811104806480"></p> <p><strong>openSession()方式实现了方法重载；</strong></p> <p>编写接口，增加注解</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from user where id = #{id}&quot;</span><span class="token punctuation">)</span>
<span class="token class-name">User</span> <span class="token function">getUserById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Insert</span><span class="token punctuation">(</span><span class="token string">&quot;insert into user(id,name,pwd) values (#{id},#{name},#{password})&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">int</span> <span class="token function">addUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Delete</span><span class="token punctuation">(</span><span class="token string">&quot;delete from user where id = #{id}&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">int</span> <span class="token function">deleteUser</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Update</span><span class="token punctuation">(</span><span class="token string">&quot;update user set name = #{name} where id = #{id}&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">int</span> <span class="token function">updateUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token keyword">int</span> id<span class="token punctuation">,</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>测试类:【注意我们必须把接口注册到核心配置文件当中】</p> <p><strong>关于@Param解释</strong></p> <ul><li>基本类型的参数或者String类型，需要加上</li> <li>引用类型不需要加</li> <li>如果只有一个基本类型的话，可以忽略，但是建议加上!</li> <li>我们在SQL中引用的就是我们这里@Param()中设定的属性名！</li></ul> <h2 id="_12、lombok"><a href="#_12、lombok" class="header-anchor">#</a> 12、Lombok</h2> <p>1.按idea中安装lombok插件</p> <p>2.在项目中导入lombok的jar包</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@AllArgsConstructor</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_13-多对一处理"><a href="#_13-多对一处理" class="header-anchor">#</a> 13.多对一处理</h2> <ul><li><p>多对一：对于学生而言，<strong>关联</strong>    多个学生关联一个老师</p></li> <li><p>一对多：对于老师而言， <strong>集合</strong>   一个老师有很多学生</p></li></ul> <p>测试环境搭建</p> <ol><li><p>导入lombok</p></li> <li><p>新建实体类Teache、Student</p></li> <li><p>建立Mapper接口</p></li> <li><p>建立Mapper.xml文件</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>
        <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.fannnnn.dao.StudentMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>



<span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>
        <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.fannnnn.dao.TeacherMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>5.核心配置文件当中注册绑定接口</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.fannnnn.dao.TeacherMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.fannnnn.dao.StudentMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li></ol> <p>6.测试查询是否能够成功</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token class-name">MybatisUtils</span><span class="token punctuation">.</span><span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">TeacherMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">TeacherMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Teacher</span> teacherByID <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getTeacherByID</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>teacherByID<span class="token punctuation">)</span><span class="token punctuation">;</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="按照查询嵌套处理-类似子查询"><a href="#按照查询嵌套处理-类似子查询" class="header-anchor">#</a> 按照查询嵌套处理 --&gt;类似子查询</h5> <p><img src="/docs/assets/img/image-20210811154219456.c1e68069.png" alt="image-20210811154219456"></p> <p><strong>按照结果嵌套查询--&gt;类似联表查询</strong></p> <p><img src="/docs/assets/img/image-20210811160716479.c73c95c7.png" alt="image-20210811160716479"></p> <h2 id="_14、一对多处理"><a href="#_14、一对多处理" class="header-anchor">#</a> 14、一对多处理</h2> <p>比如：一个老师拥有多个学生</p> <p>对于老师而言，就是一对多的关系</p> <p>环境搭建：</p> <p><strong>按照查询嵌套处理</strong></p> <p><img src="/docs/assets/img/image-20210811211959943.69ded917.png" alt="image-20210811211959943"></p> <p><strong>按照结果查询</strong></p> <p><img src="/docs/assets/img/image-20210811212051545.f0527e98.png" alt="image-20210811212051545"></p> <p><strong>小结</strong></p> <ol><li>关联：association【多对一】</li> <li>集合：collection【一对多】</li> <li>javaType 和 ofType
<ol><li>javaType:用来指定方法返回的实体类类型</li> <li>ofType：用来指定方法中映射到List或集合中的pojo类型，泛型中的约束类型，个人理解，专门用来取泛型中的约束类型</li></ol></li></ol> <h2 id="_15、动态sql"><a href="#_15、动态sql" class="header-anchor">#</a> 15、动态SQL</h2> <p><strong>什么是动态SQL：动态SQL就是指根据不同的条件生成不同的SQL语句</strong></p> <p><strong>搭建环境</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>blog<span class="token punctuation">`</span></span><span class="token punctuation">(</span>
  <span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">COMMENT</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>title<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">&quot;博客标题&quot;</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>author<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">&quot;博客作者&quot;</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>created_time<span class="token punctuation">`</span></span> <span class="token keyword">DATETIME</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">&quot;创建时间&quot;</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>views<span class="token punctuation">`</span></span> <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">&quot;浏览量&quot;</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token keyword">ENGINE</span> <span class="token operator">=</span> <span class="token keyword">INNODB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span>
</code></pre></div><p>创建一个基础工程</p> <ol><li>导包</li> <li>编写配置文件</li> <li>编写实体类</li> <li>编写mapper</li></ol> <h3 id="动态sql-if"><a href="#动态sql-if" class="header-anchor">#</a> 动态SQL-IF</h3> <p>1.创建接口</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Blog</span><span class="token punctuation">&gt;</span></span> <span class="token function">queryBlogIF</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>2.编写xml文件</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>queryBlogIF<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>map<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>blog<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from mybatis.blog where 1=1
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title!=null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        and title = #{title}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>author!=null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        and author=#{author}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>3.测试</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">queryBlogIF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token class-name">MybatisUtils</span><span class="token punctuation">.</span><span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BlogMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">BlogMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Java&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;author&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;kuangshen&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Blog</span><span class="token punctuation">&gt;</span></span> blogs <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">queryBlogIF</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Blog</span> blog <span class="token operator">:</span> blogs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>blog<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>注意：无论sql当中有多少个if语句，所有的这些语句都是用and来连接，是一个完整sql的一部分</strong></p> <h3 id="动态sql-choose-when-otherwise"><a href="#动态sql-choose-when-otherwise" class="header-anchor">#</a> 动态SQL-choose(When,otherwise)</h3> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>queryBlogChoose<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>map<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>blog<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from mybatis.blog
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>choose</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title!=null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                title = #{title}
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>when</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>when</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>author!=null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                and author = #{author}
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>when</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>otherwise</span><span class="token punctuation">&gt;</span></span>
                and views = #{views}
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>otherwise</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>choose</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="动态sql-trim-where-set"><a href="#动态sql-trim-where-set" class="header-anchor">#</a> 动态SQL-trim(where,set)</h3> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>queryBlogChoose<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>map<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>blog<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from mybatis.blog
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id!=null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            id = #{id}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title!=null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            and title=#{title}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>set</strong></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateBlog<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>blog<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    update mybatis.blog
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title!=null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            title = #{title},
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>author!=null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            author = #{author},
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">&gt;</span></span>
    where id = #{id}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>注意：每一个属性结尾一定要跟上&quot;,&quot;</strong></p> <blockquote><p>所谓的动态SQL，本质还是SQL一语句，只是我们可以在SQL层面去执行一个逻辑代码</p></blockquote> <h3 id="sql片段"><a href="#sql片段" class="header-anchor">#</a> <strong>SQL片段</strong></h3> <p>有时候我们可能会将一些功能的部分抽取出来，方便复用</p> <p>1.使用sql标签抽取公共的部分</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sql</span> <span class="token attr-name">id</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>if-title-author<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id!=null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        id = #{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>if</span> <span class="token attr-name">test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title!=null<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        and title=#{title}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>if</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sql</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>2.在需要使用的地方使用include标签引用即可</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>queryBlogChoose<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>map<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>blog<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from mybatis.blog
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">refid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>if-title-author<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="foreach"><a href="#foreach" class="header-anchor">#</a> Foreach</h3> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getBolgListByID<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>map<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>blog<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    select * from mybatis.blog
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>where</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- collection代表传过来的数据集合  item代表我要遍历的元素  open代表拼接sql的开头，close代表拼接sql的结尾 separator代表分割符--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>foreach</span> <span class="token attr-name">collection</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ids<span class="token punctuation">&quot;</span></span> <span class="token attr-name">item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">open</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>and (<span class="token punctuation">&quot;</span></span> <span class="token attr-name">close</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">separator</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>or<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            id = #{id}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>foreach</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>where</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>测试</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">queryBlogById</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token class-name">MybatisUtils</span><span class="token punctuation">.</span><span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BlogMapper</span> mapper <span class="token operator">=</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">BlogMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">HashMap</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> ids <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ids<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ids<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;ids&quot;</span><span class="token punctuation">,</span>ids<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Blog</span><span class="token punctuation">&gt;</span></span> blogList <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">getBolgListByID</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Blog</span> blog <span class="token operator">:</span> blogList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>blog<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    sqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>动态SQL实际就是在拼接sql</p></blockquote> <h2 id="_16、缓存"><a href="#_16、缓存" class="header-anchor">#</a> 16、缓存</h2> <h3 id="一级缓存"><a href="#一级缓存" class="header-anchor">#</a> 一级缓存：</h3> <p><img src="/docs/assets/img/image-20210812154400776.a0c0af33.png" alt="image-20210812154400776"></p> <p><strong>查询同一个目标，直接从缓存当中拿</strong></p> <p>加上另一个方法以后再次查询这个目标就会重新从数据库当中拿：这时缓存失效</p> <p><img src="/docs/assets/img/image-20210812154315215.c798b672.png" alt="image-20210812154315215"></p> <p>缓存失效原因</p> <ul><li>查询不同的东西</li> <li>增删改查操作，有可能会改变原来的数据，所以必定会刷新缓存！</li> <li>查询不同的Mapper.xml</li> <li>手动清理缓存！</li></ul> <p><img src="/docs/assets/img/image-20210812154732503.c66cc755.png" alt="image-20210812154732503"></p> <p>小结：一级缓存是默认开启的，只在一次sqlSession中有效，也就是拿到连接到关闭连接这个区间段！</p> <h3 id="二级缓存"><a href="#二级缓存" class="header-anchor">#</a> 二级缓存</h3> <ul><li><p>二级缓存也叫全局缓存，一级缓存作用域太低了，所以诞生了二级缓存</p></li> <li><p>基于namespace级别的缓存，一个名称空间，对应一个二级缓存；</p></li></ul> <p>工作机制</p> <ul><li><p>一个会话查询一条数据，这个数据就会被放在当前会话的一级缓存中；</p></li> <li><p>如果当前会话关闭了，这个会话对应的一级缓存就没了；但是我们想要的是，会话关闭了，一级缓存中的数据被保存到二级缓存中；</p></li> <li><p>新的会话查询信息，就可以从二级缓存中获取内容；</p></li></ul> <p>不同的mapper查出的数据会放在自己对应的缓存（map）中；</p> <p>1、开启全局缓存 【mybatis-config.xml】</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cacheEnabled<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>2.去每一个mapper.xml中配置二级缓存</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cache</span>
       <span class="token attr-name">eviction</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>FIFO<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name">flushInterval</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>60000<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>512<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name">readOnly</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>3.测试</p> <ol><li><p>问题：我们需要将实体类序列化！否则就会报错！</p> <div class="language-java extra-class"><pre class="language-java"><code> <span class="token class-name">Cause</span><span class="token operator">:</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>NotSerializableException</span><span class="token operator">:</span> <span class="token class-name"><span class="token namespace">com<span class="token punctuation">.</span>fannnnn<span class="token punctuation">.</span>pojo<span class="token punctuation">.</span></span>User</span>
</code></pre></div><p>解决办法：给实体类序列化</p> <p><img src="/docs/assets/img/image-20210812161130656.c25f6369.png" alt="image-20210812161130656"></p></li></ol> <p>小结：</p> <ul><li>只要开启了二级缓存，在同一个Mapper下就有效！</li> <li>所有的数据都会先放在一级缓存中</li> <li>只有当会话提交或者关闭的时候，才会提交到二级缓存当中</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">2/10/2022, 10:07:26 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.cf5f4e08.js" defer></script><script src="/docs/assets/js/2.5d1e2b3f.js" defer></script><script src="/docs/assets/js/4.27d27964.js" defer></script>
  </body>
</html>
