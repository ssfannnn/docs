<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1.Spring | 记录美好生活</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/docs/favicon.ico">
    <meta name="description" content="面向学习">
    <meta name="author" content="沉溺的鱼">
    <meta name="keywords" content="记录自己的学习过程">
    
    <link rel="preload" href="/docs/assets/css/0.styles.4fbbd53d.css" as="style"><link rel="preload" href="/docs/assets/js/app.cf5f4e08.js" as="script"><link rel="preload" href="/docs/assets/js/2.5d1e2b3f.js" as="script"><link rel="preload" href="/docs/assets/js/6.5834fd47.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.279998ef.js"><link rel="prefetch" href="/docs/assets/js/11.fdb914f3.js"><link rel="prefetch" href="/docs/assets/js/12.240da4c1.js"><link rel="prefetch" href="/docs/assets/js/13.27adc495.js"><link rel="prefetch" href="/docs/assets/js/14.33b94b6c.js"><link rel="prefetch" href="/docs/assets/js/15.2d5d2839.js"><link rel="prefetch" href="/docs/assets/js/16.1ff5ea8a.js"><link rel="prefetch" href="/docs/assets/js/17.4b738493.js"><link rel="prefetch" href="/docs/assets/js/18.da36ac29.js"><link rel="prefetch" href="/docs/assets/js/19.28e99716.js"><link rel="prefetch" href="/docs/assets/js/3.c42f2619.js"><link rel="prefetch" href="/docs/assets/js/4.27d27964.js"><link rel="prefetch" href="/docs/assets/js/5.a5f1d2d8.js"><link rel="prefetch" href="/docs/assets/js/7.1aa795cf.js"><link rel="prefetch" href="/docs/assets/js/8.621cf6b8.js"><link rel="prefetch" href="/docs/assets/js/9.2f397d83.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.4fbbd53d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><img src="/docs/favicon.ico" alt="记录美好生活" class="logo"> <span class="site-name can-hide">记录美好生活</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">Java系列</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">Java系列</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/javaweb/javaweb.html" class="nav-link">
  JavaWeb
</a></li><li class="dropdown-item"><!----> <a href="/docs/mybatis/mybatis.html" class="nav-link">
  Mybatis
</a></li><li class="dropdown-item"><!----> <a href="/docs/springmvc/springmvc.html" class="nav-link">
  SpringMVC
</a></li><li class="dropdown-item"><!----> <a href="/docs/spring/spring.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/docs/springboot/springboot.html" class="nav-link">
  Springboot
</a></li><li class="dropdown-item"><!----> <a href="/docs/redis/redis.html" class="nav-link">
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/docs/mysql/mysql.html" class="nav-link">
  Mysql
</a></li><li class="dropdown-item"><!----> <a href="/docs/stream/stream.html" class="nav-link">
  函数式编程
</a></li></ul></div></div><div class="nav-item"><a href="/docs/question/question.html" class="nav-link">
  提问
</a></div><div class="nav-item"><a href="/docs/others/others.html" class="nav-link">
  技术分享
</a></div><div class="nav-item"><a href="/docs/knowledge/knowledge.html" class="nav-link">
  心得体会
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">Java系列</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">Java系列</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/javaweb/javaweb.html" class="nav-link">
  JavaWeb
</a></li><li class="dropdown-item"><!----> <a href="/docs/mybatis/mybatis.html" class="nav-link">
  Mybatis
</a></li><li class="dropdown-item"><!----> <a href="/docs/springmvc/springmvc.html" class="nav-link">
  SpringMVC
</a></li><li class="dropdown-item"><!----> <a href="/docs/spring/spring.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/docs/springboot/springboot.html" class="nav-link">
  Springboot
</a></li><li class="dropdown-item"><!----> <a href="/docs/redis/redis.html" class="nav-link">
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/docs/mysql/mysql.html" class="nav-link">
  Mysql
</a></li><li class="dropdown-item"><!----> <a href="/docs/stream/stream.html" class="nav-link">
  函数式编程
</a></li></ul></div></div><div class="nav-item"><a href="/docs/question/question.html" class="nav-link">
  提问
</a></div><div class="nav-item"><a href="/docs/others/others.html" class="nav-link">
  技术分享
</a></div><div class="nav-item"><a href="/docs/knowledge/knowledge.html" class="nav-link">
  心得体会
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>1.Spring</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/spring/spring.html#_1-简介" class="sidebar-link">1.简介</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/spring/spring.html#_2-ioc理论推导" class="sidebar-link">2.IOC理论推导</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/spring/spring.html#_3-hellospring" class="sidebar-link">3.HelloSpring</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/spring/spring.html#_4-ioc创建对象的方式" class="sidebar-link">4. IOC创建对象的方式</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/spring/spring.html#_5-spring配置" class="sidebar-link">5.Spring配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/spring/spring.html#_5-1、别名" class="sidebar-link">5.1、别名</a></li><li class="sidebar-sub-header"><a href="/docs/spring/spring.html#_5-2、bean的配置" class="sidebar-link">5.2、Bean的配置</a></li><li class="sidebar-sub-header"><a href="/docs/spring/spring.html#_5-3、import" class="sidebar-link">5.3、import</a></li></ul></li><li><a href="/docs/spring/spring.html#_6、di注入-依赖注入" class="sidebar-link">6、DI注入(依赖注入)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/spring/spring.html#_6-1、构造器注入-前面说过了" class="sidebar-link">6.1、构造器注入，前面说过了</a></li><li class="sidebar-sub-header"><a href="/docs/spring/spring.html#_6-2、通过set方式注入【重点】" class="sidebar-link">6.2、通过Set方式注入【重点】</a></li><li class="sidebar-sub-header"><a href="/docs/spring/spring.html#_6-3、拓展方式注入" class="sidebar-link">6.3、拓展方式注入</a></li><li class="sidebar-sub-header"><a href="/docs/spring/spring.html#_6-4、bean作用域" class="sidebar-link">6.4、Bean作用域</a></li></ul></li><li><a href="/docs/spring/spring.html#_7-bean的自动装配" class="sidebar-link">7.Bean的自动装配</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/spring/spring.html#_7-1、自动装配" class="sidebar-link">7.1、自动装配</a></li><li class="sidebar-sub-header"><a href="/docs/spring/spring.html#_7-2、byname自动装配" class="sidebar-link">7.2、ByName自动装配</a></li><li class="sidebar-sub-header"><a href="/docs/spring/spring.html#_7-3、bytype自动装配" class="sidebar-link">7.3、ByType自动装配</a></li><li class="sidebar-sub-header"><a href="/docs/spring/spring.html#_7-4、注解自动装配" class="sidebar-link">7.4、注解自动装配</a></li></ul></li><li><a href="/docs/spring/spring.html#_8、使用注解开发" class="sidebar-link">8、使用注解开发</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/spring/spring.html#_9、使用java的方式配置spring" class="sidebar-link">9、使用Java的方式配置Spring</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/spring/spring.html#_10、代理模式" class="sidebar-link">10、代理模式</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/spring/spring.html#_11、aop" class="sidebar-link">11、AOP</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/docs/spring/spring.html#_12、整合mybatis" class="sidebar-link">12、整合Mybatis</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/spring/spring.html#_12-1、回忆mybatis" class="sidebar-link">12.1、回忆Mybatis</a></li><li class="sidebar-sub-header"><a href="/docs/spring/spring.html#_12-2、mybatis-spring" class="sidebar-link">12.2、Mybatis-spring</a></li></ul></li><li><a href="/docs/spring/spring.html#_13、声明式事务" class="sidebar-link">13、声明式事务</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/spring/spring.html#_1、回顾事务" class="sidebar-link">1、回顾事务</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_1-spring"><a href="#_1-spring" class="header-anchor">#</a> 1.Spring</h1> <h2 id="_1-简介"><a href="#_1-简介" class="header-anchor">#</a> 1.简介</h2> <ul><li>spring理念：使现有的技术更加容易使用，本身是一个大杂烩</li></ul> <p>官网：https://spring.io/why-spring</p> <p>github地址：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-webmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.3.9<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

与mybatis需要导spring-jdbc的包
<span class="token comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-jdbc --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-jdbc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.3.9<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p><strong>优点</strong></p> <ul><li>控制反转(IOC) 面向切面(AOP)</li> <li>支持事务的处理，对框架整合的支持</li></ul> <p>总结：spring就是一个轻量级的控制反转(IOC) 和 面向切面编程的框架！</p> <h2 id="_2-ioc理论推导"><a href="#_2-ioc理论推导" class="header-anchor">#</a> 2.IOC理论推导</h2> <ol><li>UserDao接口</li> <li>UserDaoImpl实现类</li> <li>UserService接口</li> <li>UserServiceImpl接口实现类</li></ol> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token class-name">UserDao</span> userdao<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUserdao</span><span class="token punctuation">(</span><span class="token class-name">UserDao</span> userdao<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>userdao <span class="token operator">=</span> userdao<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    userdao<span class="token punctuation">.</span><span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>之前，程序控制的主动权在程序员手上，必须要在业务层修改业务代码</li> <li>现在使用的set注入对象，程序不再主动创建对象，而是被动的接收对象</li></ul> <p>这是控制反转(IOC)的原型。 主动权从程序员手上转移到了用户的手上</p> <p><img src="/docs/assets/img/image-20210813143650399.cb969a88.png" alt="image-20210813143650399"></p> <h2 id="_3-hellospring"><a href="#_3-hellospring" class="header-anchor">#</a> 3.HelloSpring</h2> <p>1.新建spring配置文件</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>2.新建实体类</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> str<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getStr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> str<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setStr</span><span class="token punctuation">(</span><span class="token class-name">String</span> str<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>str <span class="token operator">=</span> str<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Hello{&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;str='&quot;</span> <span class="token operator">+</span> str <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token char">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>3.在配置文件中注册bean</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hello<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.fannnnn.pojo.Hello<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>str<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hellospring<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>4.测试</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;beans.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Hello</span> hello <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Hello</span><span class="token punctuation">)</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>hello<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_4-ioc创建对象的方式"><a href="#_4-ioc创建对象的方式" class="header-anchor">#</a> 4. IOC创建对象的方式</h2> <p><strong>1.使用无参构造创建对象，默认！</strong></p> <p>2.假设我们要使用有参构造方法。</p> <ol><li>下标赋值</li></ol> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--    使用下标进行属性赋值--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.fannnnn.pojo.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>shensifan<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>--&gt;
</code></pre></div><p>2.类型</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--    使用数据类型进行赋值--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.fannnnn.pojo.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>java.lang.String<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>shensifan<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>3.通过对象属性名</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--    使用属性名进行赋值--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.fannnnn.pojo.User<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>shensifan<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>总结：在配置文件加载的时候，容器中管理的所有对象都会被初始化！且是单例模式</p> <h2 id="_5-spring配置"><a href="#_5-spring配置" class="header-anchor">#</a> 5.Spring配置</h2> <h3 id="_5-1、别名"><a href="#_5-1、别名" class="header-anchor">#</a> 5.1、别名</h3> <div class="language-xml extra-class"><pre class="language-xml"><code>
</code></pre></div><h3 id="_5-2、bean的配置"><a href="#_5-2、bean的配置" class="header-anchor">#</a> 5.2、Bean的配置</h3> <div class="language-xml extra-class"><pre class="language-xml"><code>name有起别名的作用，并且一次可以取多个别名
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>com.fannnnn.pojo.user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>myUser<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_5-3、import"><a href="#_5-3、import" class="header-anchor">#</a> 5.3、import</h3> <p>这个import，一般用于团队开发使用，它可以将多个配置文件，导入合并为一个</p> <p>假设现在项目中有个人开发，这三个人负责不同的类开发，不同的类需要注册在不同的bean中，我们可以利用import将所有人的beans.xml合并为一个</p> <ul><li>小沈 bean1.xml</li> <li>小吴 bean2.xml</li> <li>小余 bean3.xml</li> <li>applicationContext.xml中导入</li></ul> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>import</span> <span class="token attr-name">resource</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>bean1.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>import</span> <span class="token attr-name">resource</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>bean2.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>import</span> <span class="token attr-name">resource</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>bean3.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>使用的时候，直接使用总的配置就可以</p> <h2 id="_6、di注入-依赖注入"><a href="#_6、di注入-依赖注入" class="header-anchor">#</a> 6、DI注入(依赖注入)</h2> <h3 id="_6-1、构造器注入-前面说过了"><a href="#_6-1、构造器注入-前面说过了" class="header-anchor">#</a> 6.1、构造器注入，前面说过了</h3> <h3 id="_6-2、通过set方式注入【重点】"><a href="#_6-2、通过set方式注入【重点】" class="header-anchor">#</a> 6.2、通过Set方式注入【重点】</h3> <ul><li>依赖注入:set注入
<ul><li>依赖：bean对象的创建依赖于容器</li> <li>注入：bean对象中的所有属性，由容器来注入</li></ul></li></ul> <p>【环境搭建】</p> <ol><li><p>复杂类型</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Address</span> address<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> books<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> hobbys<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> card<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> games<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> wife<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Properties</span> info<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>xml文件</p></li></ol> <div class="language-xml extra-class"><pre class="language-xml"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.fannnnn.pojo.Address<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>宁波<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>student<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.fannnnn.pojo.Student<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--        普通类型注入--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>shensifan<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token comment">&lt;!--        引用类型注入--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>address<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token comment">&lt;!--    数组--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>books<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>array</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>三国演义<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>水浒传<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>红楼梦<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>西游记<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>array</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--        list--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hobbys<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>list</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>看电影<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>打游戏<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>桥底阿妈<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>list</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--        map--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>card<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>map</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>身份证<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>123456123456123456<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>银行卡<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>321546312587646541326854<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>map</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--        games--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>games<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>LOL<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>BOB<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>COC<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wife<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ying<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>props</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>prop</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driver<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>123<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>prop</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>prop</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>456<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>prop</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>prop</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>prop</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>prop</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>123456<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>prop</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>props</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>3.真实测试对象</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> test <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;beans.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Student</span> student <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Student</span><span class="token punctuation">)</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;student&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        student<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_6-3、拓展方式注入"><a href="#_6-3、拓展方式注入" class="header-anchor">#</a> 6.3、拓展方式注入</h3> <p>我们可以使用p命名空间和c命名空间进行注入</p> <p>注意点：p命名和c命名不能直接使用，需要导入约束，去官网找</p> <h3 id="_6-4、bean作用域"><a href="#_6-4、bean作用域" class="header-anchor">#</a> 6.4、Bean作用域</h3> <p><img src="/docs/assets/img/image-20210813205355017.29b39da0.png" alt="image-20210813205355017"></p> <ul><li>单例模式（singleton） spring默认 每个从容器中get的都是同一个对象</li> <li>原型模式：（prototype）每次从容器中 get时都会产生一个新对象</li></ul> <p><img src="data:image/png;base64,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" alt="image-20210813205444257"></p> <p>其余的request、session、application、websocket只能在web开发中使用</p> <h2 id="_7-bean的自动装配"><a href="#_7-bean的自动装配" class="header-anchor">#</a> 7.Bean的自动装配</h2> <ul><li>自动装配是spring满足bean依赖的一种方式</li> <li>Spring会在上下文中自动寻找，并自动给bean装配属性</li></ul> <p>在Spring中有三种装配的方式</p> <ol><li>在xml中显示的配置</li> <li>在java中显示配置</li> <li>隐式的自动装配bean【重要】</li></ol> <h3 id="_7-1、自动装配"><a href="#_7-1、自动装配" class="header-anchor">#</a> 7.1、自动装配</h3> <h3 id="_7-2、byname自动装配"><a href="#_7-2、byname自动装配" class="header-anchor">#</a> 7.2、ByName自动装配</h3> <h3 id="_7-3、bytype自动装配"><a href="#_7-3、bytype自动装配" class="header-anchor">#</a> 7.3、ByType自动装配</h3> <h3 id="_7-4、注解自动装配"><a href="#_7-4、注解自动装配" class="header-anchor">#</a> 7.4、注解自动装配</h3> <p>要使用注解须知：</p> <ol><li><p>导入约束</p> <p>xmlns:context=&quot;http://www.springframework.org/schema/context&quot;</p> <p>http://www.springframework.org/schema/context</p> <p>https://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;</p></li> <li><p>配置注解的支持 <a href="/docs/spring/context:annotation-config/">context:annotation-config/</a></p></li></ol> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context
        https://www.springframework.org/schema/context/spring-context.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>annotation-config</span><span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>@Autowired 通过ByName的方法</p> <ul><li>可以属性上使用也可以在set方法上使用</li> <li>可以不写set方法，前提是这个自动装配的属性在ioc容器中存在</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Autowired</span> <span class="token punctuation">{</span>
    <span class="token keyword">boolean</span> <span class="token function">required</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果自动装配的环境比较复杂，自动装配无法通过一个注解完成的时候，我们可以使用@Qualifier(value = &quot;xxx&quot;)去配合@Autowried的使用，指定一个唯一的bean</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">People</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
<span class="token comment">//如果显式的设置了required=false,说明这个对象可以为null，，否则不允许为空</span>
    <span class="token annotation punctuation">@Autowired</span><span class="token punctuation">(</span>required <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Cat</span> cat<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;dog111&quot;</span><span class="token punctuation">)</span> <span class="token comment">//如果ioc容器中没有属性名相同的id的对象，那么可以显示设置 使用Qualifier注解</span>
    <span class="token keyword">private</span> <span class="token class-name">Dog</span> dog<span class="token punctuation">;</span>
    
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_8、使用注解开发"><a href="#_8、使用注解开发" class="header-anchor">#</a> 8、使用注解开发</h2> <p><strong>spring4.0以后，要使用注解开发，必须要导入aop的包</strong></p> <p><img src="/docs/assets/img/image-20210814092830553.18b9fbb6.png" alt="image-20210814092830553"></p> <ol><li><p>bean</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//@component ==  &lt;bean id = &quot;user&quot; class=&quot;com.fannnnn.pojo.User/&gt;</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token string">&quot;shensifan&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>属性如何注入</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//@component ==  &lt;bean id = &quot;user&quot; class=&quot;com.fannnnn.pojo.User/&gt;</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;shensifan&quot;</span><span class="token punctuation">)</span>  <span class="token comment">// 相当于 &lt;property name = &quot;name&quot; value = &quot;shensifan&quot;/&gt;</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>衍生的注解</p> <p>@component有几个衍生注解，我们在web开发中，会按照mvc三层架构分层!</p> <ul><li><p>dao 【@Repository】</p></li> <li><p>service【@service】</p></li> <li><p>controller【@Controller】</p> <p>这四个注解的功能都是一样的</p></li></ul></li> <li><p>自动装配</p></li> <li><p>作用域</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//@component ==  &lt;bean id = &quot;user&quot; class=&quot;com.fannnnn.pojo.User/&gt;</span>
<span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Scope</span><span class="token punctuation">(</span><span class="token string">&quot;singleton&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;shensifan&quot;</span><span class="token punctuation">)</span>  <span class="token comment">// 相当于 &lt;property name = &quot;name&quot; value = &quot;shensifan&quot;/&gt;</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>小结</p> <p>xml与注解：</p> <ul><li>xml更加万能，适用于任何场景！维护简单方便</li> <li>注解 不是自己的类使用不了，维护相对复杂</li></ul> <p>xml与注解的最佳实践：</p> <ul><li>xml用来管理bean</li> <li>注解用来完成属性的注入</li></ul></li></ol> <p><strong>注意：必须要添加注解支持和component-scan</strong></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd
         http://www.springframework.org/schema/context
        https://www.springframework.org/schema/context/spring-context.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--    添加conponent-scan并指定一个包，程序运行时会去扫描这个包下的注解并使注解生效--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.fannnnn<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token comment">&lt;!--开启注解支持--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>annotation-config</span><span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="_9、使用java的方式配置spring"><a href="#_9、使用java的方式配置spring" class="header-anchor">#</a> 9、使用Java的方式配置Spring</h2> <p>我们现在要完全不使用spring的xml配置，全权交给Java来做</p> <p>JavaConfig是Spring的一个子项目，在Spring 4 之后它成为了一个核心功能！</p> <h2 id="_10、代理模式"><a href="#_10、代理模式" class="header-anchor">#</a> 10、代理模式</h2> <p>代理模式的分类：</p> <ul><li>静态代理</li> <li>动态代理</li></ul> <p><strong>动态代理分为两大类</strong></p> <ul><li>基于接口的动态代码</li> <li>基于类的动态代码</li></ul> <p>动态代理类</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyInvocationHandler</span> <span class="token keyword">implements</span> <span class="token class-name">InvocationHandler</span> <span class="token punctuation">{</span>

    <span class="token comment">//target是接口</span>
    <span class="token keyword">private</span> <span class="token class-name">Object</span> target<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setTarget</span><span class="token punctuation">(</span><span class="token class-name">Object</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>target <span class="token operator">=</span> target<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//    Foo f = (Foo) Proxy.newProxyInstance(Foo.class.getClassLoader(),</span>
<span class="token comment">//            new Class&lt;?&gt;[] { Foo.class },</span>
<span class="token comment">//            handler);</span>


    <span class="token comment">//获取要代理的对象</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">getProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//使用反射实现</span>
        <span class="token keyword">return</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                 <span class="token keyword">this</span><span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token comment">//动态代理的本质就是使用反射机制、</span>
        <span class="token class-name">Object</span> result <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//</span>
        <span class="token class-name">ProxyInvocationHandler</span> pih <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxyInvocationHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//要代理的真实角色,根据自己的代理角色而定</span>
        <span class="token class-name">Host</span> host <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Host</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pih<span class="token punctuation">.</span><span class="token function">setTarget</span><span class="token punctuation">(</span>host<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Rent</span> proxy <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Rent</span><span class="token punctuation">)</span> pih<span class="token punctuation">.</span><span class="token function">getProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//这个调用rent方法时，实际上走的是InvocationHandler的invoke方法</span>
        proxy<span class="token punctuation">.</span><span class="token function">rent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_11、aop"><a href="#_11、aop" class="header-anchor">#</a> 11、AOP</h2> <p><img src="/docs/assets/img/image-20210815141724353.2ccb80b2.png" alt="image-20210815141724353"></p> <p>1.接口</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>2.接口实现类</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span><span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;增加了一个用户&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;删除了一个用户&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;更新了一个用户&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;查询了一个用户&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>3.增加的方法</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> log <span class="token keyword">implements</span> <span class="token class-name">MethodBeforeAdvice</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">,</span> <span class="token class-name">Object</span> target<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>target <span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;的&quot;</span><span class="token operator">+</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;方法被执行了！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AfterLog</span> <span class="token keyword">implements</span> <span class="token class-name">AfterReturningAdvice</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterReturning</span><span class="token punctuation">(</span><span class="token class-name">Object</span> returnValue<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">,</span> <span class="token class-name">Object</span> target<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;的&quot;</span><span class="token operator">+</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;被执行了！返回值是&quot;</span><span class="token operator">+</span>returnValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>4.在xml文件当中编写织入点</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>aop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/aop<span class="token punctuation">&quot;</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/aop
        https://www.springframework.org/schema/aop/spring-aop.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--    //注册bean--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>userService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.fannnnn.service.UserServiceImpl<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>log<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.fannnnn.service.log<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>afterLog<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.fannnnn.service.AfterLog<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--            设置织入点--&gt;</span>
<span class="token comment">&lt;!--        这里的execution(* com.fannnnn.service.UserServiceImpl.*(..))是一个表达式，表示定位到具体某个包下的某个类的某个方法,*(..)代表所有方法，且方法中的参数不限--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>pointcut</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pointcut<span class="token punctuation">&quot;</span></span> <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>execution(* com.fannnnn.service.UserServiceImpl.*(..))<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

<span class="token comment">&lt;!--        这个织入点代表具体要织入的方法是add方法--&gt;</span>
<span class="token comment">&lt;!--        &lt;aop:pointcut id=&quot;pointcut&quot; expression=&quot;execution(* com.fannnnn.service.UserServiceImpl.add())&quot;/&gt;--&gt;</span>


        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>advisor</span> <span class="token attr-name">advice-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>log<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pointcut<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>advisor</span> <span class="token attr-name">advice-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>afterLog<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pointcut<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>5.测试</p> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;applicationContext.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//        aop的底层是基于动态代理实现的，而动态代理代理的是接口，所以这个bean的类型是接口类</span>
        <span class="token class-name">UserService</span> userService <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;userService&quot;</span><span class="token punctuation">,</span> <span class="token class-name">UserService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        userService<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/* 结果显示：
        com.fannnnn.service.UserServiceImpl的add方法被执行了！
        增加了一个用户
        com.fannnnn.service.UserServiceImpl的add被执行了！返回值是null
        * */</span>
<span class="token comment">//        userService.delete();   //结果显示   “删除了一个用户”</span>

    <span class="token punctuation">}</span>
</code></pre></div><p>上面是使用aop的API去实现切面</p> <p><strong>第二种方式：自定义一个类实现aop</strong></p> <p>方法类</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> diypointcut <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;===========方法执行前==========&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;===========方法执行后===========&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--    第二种方式,使用自定义类切入--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>diy<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.fannnnn.diy.diypointcut<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!--        定义切面--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>aspect</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>diy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--            定义切入点--&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>pointcut</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pointcut<span class="token punctuation">&quot;</span></span> <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>execution(* com.fannnnn.service.UserServiceImpl.*(..))<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>before</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>before<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pointcut<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>after</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>after<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pointcut<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>aspect</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>注解实现AOP</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Aspect</span> <span class="token comment">//将这个类定义为一个切面</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> annotationPointCut <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.fannnnn.service.UserServiceImpl.*(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">before</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;======方法执行前========&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@After</span><span class="token punctuation">(</span><span class="token string">&quot;execution(* com.fannnnn.service.UserServiceImpl.*(..))&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">after</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;=======方法执行后========&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--    第三种方式，注解实现aop--&gt;</span>
<span class="token comment">&lt;!--    将切面类注册到spring容器当中--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>annotationPointCut<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.fannnnn.diy.annotationPointCut<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token comment">&lt;!--    开启注解支持--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>aspectj-autoproxy</span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><h2 id="_12、整合mybatis"><a href="#_12、整合mybatis" class="header-anchor">#</a> 12、整合Mybatis</h2> <p>步骤：</p> <p>1.导入相关jar包</p> <ul><li>junit</li> <li>mybatis</li> <li>mysql数据库</li> <li>spring相关的</li> <li>aop织入</li> <li>mybatis-spring</li></ul> <h3 id="_12-1、回忆mybatis"><a href="#_12-1、回忆mybatis" class="header-anchor">#</a> 12.1、回忆Mybatis</h3> <ol><li>编写实体类</li> <li>编写核心配置文件</li> <li>编写接口</li> <li>编写Mapper.xml</li> <li>测试</li></ol> <h3 id="_12-2、mybatis-spring"><a href="#_12-2、mybatis-spring" class="header-anchor">#</a> 12.2、Mybatis-spring</h3> <p>1.编写数据源配置</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--注册连接数据库的数据源--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.jdbc.datasource.DriverManagerDataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driverClassName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.mysql.jdbc.Driver<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>jdbc:mysql://localhost:3306?mybatis?useSSL=false<span class="token entity named-entity" title="&amp;">&amp;amp;</span>useUnicode=true<span class="token entity named-entity" title="&amp;">&amp;amp;</span>characterEncoding=utf8<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Shen9299<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>2.sqlSessionFactory</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--使用数据源注册一个sqlSessionFactory--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sqlSessionFactory<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.mybatis.spring.SqlSessionFactoryBean<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token comment">&lt;!--        关联mybatis--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>configLocation<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>classpath:mybatis-config.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token comment">&lt;!--        映射--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mapperLocations<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>classpath:com/fannnnn/Mapper/*.xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>3.sqlSessinTemplate</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--    注册完sqlSessionFactory以后，用sqlSession注册sqlSessionTemplate
    在mybatis中我们使用sqlSession，但是spring中要使用sqlSessionTemplate，本质上是一样的
--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sqlSessionTemplate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.mybatis.spring.SqlSessionTemplate<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sqlSessionFactory<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>4.需要给接口添加实现类</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserMapperImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserMapper</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">SqlSessionTemplate</span> sqlSessionTemplate<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setSqlSessionTemplate</span><span class="token punctuation">(</span><span class="token class-name">SqlSessionTemplate</span> sqlSessionTemplate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>sqlSessionTemplate <span class="token operator">=</span> sqlSessionTemplate<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">UserMapper</span> mapper <span class="token operator">=</span> sqlSessionTemplate<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> mapper<span class="token punctuation">.</span><span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>5.将自己写的实现类，注入到spring中</p> <div class="language-xml extra-class"><pre class="language-xml"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userMapper<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.fannnnn.Mapper.UserMapperImpl<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sqlSessionTemplate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sqlSessionTemplate<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>6.测试使用即可</p> <div class="language-java extra-class"><pre class="language-java"><code>    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">&quot;applicationContext.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">UserMapper</span> userMapper <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;userMapper&quot;</span><span class="token punctuation">,</span> <span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> users <span class="token operator">=</span> userMapper<span class="token punctuation">.</span><span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">User</span> user <span class="token operator">:</span> users<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div><p><img src="/docs/assets/img/image-20210815175927509.156af4ed.png" alt="image-20210815175927509"></p> <p><strong>方式二：sqlSessionDaoSupport</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserMapperImpl2</span> <span class="token keyword">extends</span> <span class="token class-name">SqlSessionDaoSupport</span> <span class="token keyword">implements</span> <span class="token class-name">UserMapper</span><span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//SqlSessionDaoSupport中已经存在getsqlSession()方法，直接用即可，实际上是省略了在xml文件中注册sqlSessionTemplate的步骤</span>
        <span class="token class-name">SqlSession</span> sqlSession <span class="token operator">=</span> <span class="token function">getSqlSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> sqlSession<span class="token punctuation">.</span><span class="token function">getMapper</span><span class="token punctuation">(</span><span class="token class-name">UserMapper</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_13、声明式事务"><a href="#_13、声明式事务" class="header-anchor">#</a> 13、声明式事务</h2> <h3 id="_1、回顾事务"><a href="#_1、回顾事务" class="header-anchor">#</a> 1、回顾事务</h3> <ul><li>要么都成功，要么都失败</li> <li>事务在项目开发中十分重要</li> <li>确保完整性和一致性</li></ul> <p>事务的ACID原则:</p> <ul><li>原子性</li> <li>一致性</li> <li>隔离性</li> <li>持久性</li></ul> <p>在applicationContext.xml中配置以下代码即可</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token comment">&lt;!--    配置声明式事务 spring帮我们写死的这段代码--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transactionManage<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.jdbc.datasource.DataSourceTransactionManager<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--    结合AOP实现事务的织入--&gt;</span>
<span class="token comment">&lt;!--    配置事务通知:--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>advice</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>txAdvice<span class="token punctuation">&quot;</span></span> <span class="token attr-name">transaction-manager</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transactionManage<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--        给哪些方法配置事务--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>attributes</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--            * 代表所有方法--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>*<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">tx:</span>attributes</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">tx:</span>advice</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--    配置事务切入--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>pointcut</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>txPointCut<span class="token punctuation">&quot;</span></span> <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>execution(* com.fannnnn.Mapper.*.*(..))<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>advisor</span> <span class="token attr-name">advice-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>txAdvice<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>txPointCut<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">2/10/2022, 10:07:26 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.cf5f4e08.js" defer></script><script src="/docs/assets/js/2.5d1e2b3f.js" defer></script><script src="/docs/assets/js/6.5834fd47.js" defer></script>
  </body>
</html>
